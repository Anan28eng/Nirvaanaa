/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/rate-limiter-flexible";
exports.ids = ["vendor-chunks/rate-limiter-flexible"];
exports.modules = {

/***/ "(rsc)/./node_modules/rate-limiter-flexible/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/index.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterRedis = __webpack_require__(/*! ./lib/RateLimiterRedis */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRedis.js\");\nconst RateLimiterMongo = __webpack_require__(/*! ./lib/RateLimiterMongo */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMongo.js\");\nconst RateLimiterMySQL = __webpack_require__(/*! ./lib/RateLimiterMySQL */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMySQL.js\");\nconst RateLimiterPostgres = __webpack_require__(/*! ./lib/RateLimiterPostgres */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPostgres.js\");\nconst { RateLimiterClusterMaster, RateLimiterClusterMasterPM2, RateLimiterCluster } = __webpack_require__(/*! ./lib/RateLimiterCluster */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterCluster.js\");\nconst RateLimiterMemory = __webpack_require__(/*! ./lib/RateLimiterMemory */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemory.js\");\nconst RateLimiterMemcache = __webpack_require__(/*! ./lib/RateLimiterMemcache */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemcache.js\");\nconst RLWrapperBlackAndWhite = __webpack_require__(/*! ./lib/RLWrapperBlackAndWhite */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RLWrapperBlackAndWhite.js\");\nconst RateLimiterUnion = __webpack_require__(/*! ./lib/RateLimiterUnion */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterUnion.js\");\nconst RateLimiterQueue = __webpack_require__(/*! ./lib/RateLimiterQueue */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterQueue.js\");\nconst BurstyRateLimiter = __webpack_require__(/*! ./lib/BurstyRateLimiter */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/BurstyRateLimiter.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./lib/RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nconst RateLimiterDynamo = __webpack_require__(/*! ./lib/RateLimiterDynamo */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterDynamo.js\");\nconst RateLimiterPrisma = __webpack_require__(/*! ./lib/RateLimiterPrisma */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPrisma.js\");\nmodule.exports = {\n    RateLimiterRedis,\n    RateLimiterMongo,\n    RateLimiterMySQL,\n    RateLimiterPostgres,\n    RateLimiterMemory,\n    RateLimiterMemcache,\n    RateLimiterClusterMaster,\n    RateLimiterClusterMasterPM2,\n    RateLimiterCluster,\n    RLWrapperBlackAndWhite,\n    RateLimiterUnion,\n    RateLimiterQueue,\n    BurstyRateLimiter,\n    RateLimiterRes,\n    RateLimiterDynamo,\n    RateLimiterPrisma\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLG1CQUFtQkMsbUJBQU9BLENBQUM7QUFDakMsTUFBTUMsbUJBQW1CRCxtQkFBT0EsQ0FBQztBQUNqQyxNQUFNRSxtQkFBbUJGLG1CQUFPQSxDQUFDO0FBQ2pDLE1BQU1HLHNCQUFzQkgsbUJBQU9BLENBQUM7QUFDcEMsTUFBTSxFQUFDSSx3QkFBd0IsRUFBRUMsMkJBQTJCLEVBQUVDLGtCQUFrQixFQUFDLEdBQUdOLG1CQUFPQSxDQUFDO0FBQzVGLE1BQU1PLG9CQUFvQlAsbUJBQU9BLENBQUM7QUFDbEMsTUFBTVEsc0JBQXNCUixtQkFBT0EsQ0FBQztBQUNwQyxNQUFNUyx5QkFBeUJULG1CQUFPQSxDQUFDO0FBQ3ZDLE1BQU1VLG1CQUFtQlYsbUJBQU9BLENBQUM7QUFDakMsTUFBTVcsbUJBQW1CWCxtQkFBT0EsQ0FBQztBQUNqQyxNQUFNWSxvQkFBb0JaLG1CQUFPQSxDQUFDO0FBQ2xDLE1BQU1hLGlCQUFpQmIsbUJBQU9BLENBQUM7QUFDL0IsTUFBTWMsb0JBQW9CZCxtQkFBT0EsQ0FBQztBQUNsQyxNQUFNZSxvQkFBb0JmLG1CQUFPQSxDQUFDO0FBRWxDZ0IsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZsQjtJQUNBRTtJQUNBQztJQUNBQztJQUNBSTtJQUNBQztJQUNBSjtJQUNBQztJQUNBQztJQUNBRztJQUNBQztJQUNBQztJQUNBQztJQUNBQztJQUNBQztJQUNBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvaW5kZXguanM/ZGNkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSYXRlTGltaXRlclJlZGlzID0gcmVxdWlyZSgnLi9saWIvUmF0ZUxpbWl0ZXJSZWRpcycpO1xuY29uc3QgUmF0ZUxpbWl0ZXJNb25nbyA9IHJlcXVpcmUoJy4vbGliL1JhdGVMaW1pdGVyTW9uZ28nKTtcbmNvbnN0IFJhdGVMaW1pdGVyTXlTUUwgPSByZXF1aXJlKCcuL2xpYi9SYXRlTGltaXRlck15U1FMJyk7XG5jb25zdCBSYXRlTGltaXRlclBvc3RncmVzID0gcmVxdWlyZSgnLi9saWIvUmF0ZUxpbWl0ZXJQb3N0Z3JlcycpO1xuY29uc3Qge1JhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlciwgUmF0ZUxpbWl0ZXJDbHVzdGVyTWFzdGVyUE0yLCBSYXRlTGltaXRlckNsdXN0ZXJ9ID0gcmVxdWlyZSgnLi9saWIvUmF0ZUxpbWl0ZXJDbHVzdGVyJyk7XG5jb25zdCBSYXRlTGltaXRlck1lbW9yeSA9IHJlcXVpcmUoJy4vbGliL1JhdGVMaW1pdGVyTWVtb3J5Jyk7XG5jb25zdCBSYXRlTGltaXRlck1lbWNhY2hlID0gcmVxdWlyZSgnLi9saWIvUmF0ZUxpbWl0ZXJNZW1jYWNoZScpO1xuY29uc3QgUkxXcmFwcGVyQmxhY2tBbmRXaGl0ZSA9IHJlcXVpcmUoJy4vbGliL1JMV3JhcHBlckJsYWNrQW5kV2hpdGUnKTtcbmNvbnN0IFJhdGVMaW1pdGVyVW5pb24gPSByZXF1aXJlKCcuL2xpYi9SYXRlTGltaXRlclVuaW9uJyk7XG5jb25zdCBSYXRlTGltaXRlclF1ZXVlID0gcmVxdWlyZSgnLi9saWIvUmF0ZUxpbWl0ZXJRdWV1ZScpO1xuY29uc3QgQnVyc3R5UmF0ZUxpbWl0ZXIgPSByZXF1aXJlKCcuL2xpYi9CdXJzdHlSYXRlTGltaXRlcicpO1xuY29uc3QgUmF0ZUxpbWl0ZXJSZXMgPSByZXF1aXJlKCcuL2xpYi9SYXRlTGltaXRlclJlcycpO1xuY29uc3QgUmF0ZUxpbWl0ZXJEeW5hbW8gPSByZXF1aXJlKCcuL2xpYi9SYXRlTGltaXRlckR5bmFtbycpO1xuY29uc3QgUmF0ZUxpbWl0ZXJQcmlzbWEgPSByZXF1aXJlKCcuL2xpYi9SYXRlTGltaXRlclByaXNtYScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUmF0ZUxpbWl0ZXJSZWRpcyxcbiAgUmF0ZUxpbWl0ZXJNb25nbyxcbiAgUmF0ZUxpbWl0ZXJNeVNRTCxcbiAgUmF0ZUxpbWl0ZXJQb3N0Z3JlcyxcbiAgUmF0ZUxpbWl0ZXJNZW1vcnksXG4gIFJhdGVMaW1pdGVyTWVtY2FjaGUsXG4gIFJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlcixcbiAgUmF0ZUxpbWl0ZXJDbHVzdGVyTWFzdGVyUE0yLFxuICBSYXRlTGltaXRlckNsdXN0ZXIsXG4gIFJMV3JhcHBlckJsYWNrQW5kV2hpdGUsXG4gIFJhdGVMaW1pdGVyVW5pb24sXG4gIFJhdGVMaW1pdGVyUXVldWUsXG4gIEJ1cnN0eVJhdGVMaW1pdGVyLFxuICBSYXRlTGltaXRlclJlcyxcbiAgUmF0ZUxpbWl0ZXJEeW5hbW8sXG4gIFJhdGVMaW1pdGVyUHJpc21hLFxufTtcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlclJlZGlzIiwicmVxdWlyZSIsIlJhdGVMaW1pdGVyTW9uZ28iLCJSYXRlTGltaXRlck15U1FMIiwiUmF0ZUxpbWl0ZXJQb3N0Z3JlcyIsIlJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlciIsIlJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlclBNMiIsIlJhdGVMaW1pdGVyQ2x1c3RlciIsIlJhdGVMaW1pdGVyTWVtb3J5IiwiUmF0ZUxpbWl0ZXJNZW1jYWNoZSIsIlJMV3JhcHBlckJsYWNrQW5kV2hpdGUiLCJSYXRlTGltaXRlclVuaW9uIiwiUmF0ZUxpbWl0ZXJRdWV1ZSIsIkJ1cnN0eVJhdGVMaW1pdGVyIiwiUmF0ZUxpbWl0ZXJSZXMiLCJSYXRlTGltaXRlckR5bmFtbyIsIlJhdGVMaW1pdGVyUHJpc21hIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/BurstyRateLimiter.js":
/*!*********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/BurstyRateLimiter.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\n/**\n * Bursty rate limiter exposes only msBeforeNext time and doesn't expose points from bursty limiter by default\n * @type {BurstyRateLimiter}\n */ module.exports = class BurstyRateLimiter {\n    constructor(rateLimiter, burstLimiter){\n        this._rateLimiter = rateLimiter;\n        this._burstLimiter = burstLimiter;\n    }\n    /**\n   * Merge rate limiter response objects. Responses can be null\n   *\n   * @param {RateLimiterRes} [rlRes] Rate limiter response\n   * @param {RateLimiterRes} [blRes] Bursty limiter response\n   */ _combineRes(rlRes, blRes) {\n        if (!rlRes) {\n            return null;\n        }\n        return new RateLimiterRes(rlRes.remainingPoints, Math.min(rlRes.msBeforeNext, blRes ? blRes.msBeforeNext : 0), rlRes.consumedPoints, rlRes.isFirstInDuration);\n    }\n    /**\n   * @param key\n   * @param pointsToConsume\n   * @param options\n   * @returns {Promise<any>}\n   */ consume(key, pointsToConsume = 1, options = {}) {\n        return this._rateLimiter.consume(key, pointsToConsume, options).catch((rlRej)=>{\n            if (rlRej instanceof RateLimiterRes) {\n                return this._burstLimiter.consume(key, pointsToConsume, options).then((blRes)=>{\n                    return Promise.resolve(this._combineRes(rlRej, blRes));\n                }).catch((blRej)=>{\n                    if (blRej instanceof RateLimiterRes) {\n                        return Promise.reject(this._combineRes(rlRej, blRej));\n                    } else {\n                        return Promise.reject(blRej);\n                    }\n                });\n            } else {\n                return Promise.reject(rlRej);\n            }\n        });\n    }\n    /**\n   * It doesn't expose available points from burstLimiter\n   *\n   * @param key\n   * @returns {Promise<RateLimiterRes>}\n   */ get(key) {\n        return Promise.all([\n            this._rateLimiter.get(key),\n            this._burstLimiter.get(key)\n        ]).then(([rlRes, blRes])=>{\n            return this._combineRes(rlRes, blRes);\n        });\n    }\n    get points() {\n        return this._rateLimiter.points;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9CdXJzdHlSYXRlTGltaXRlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxpQkFBaUJDLG1CQUFPQSxDQUFDLDBGQUFrQjtBQUVqRDs7O0NBR0MsR0FDREMsT0FBT0MsT0FBTyxHQUFHLE1BQU1DO0lBQ3JCQyxZQUFZQyxXQUFXLEVBQUVDLFlBQVksQ0FBRTtRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR0Y7UUFDcEIsSUFBSSxDQUFDRyxhQUFhLEdBQUdGO0lBQ3ZCO0lBRUE7Ozs7O0dBS0MsR0FDREcsWUFBWUMsS0FBSyxFQUFFQyxLQUFLLEVBQUU7UUFDeEIsSUFBSSxDQUFDRCxPQUFPO1lBQ1YsT0FBTztRQUNUO1FBRUEsT0FBTyxJQUFJWCxlQUNUVyxNQUFNRSxlQUFlLEVBQ3JCQyxLQUFLQyxHQUFHLENBQUNKLE1BQU1LLFlBQVksRUFBRUosUUFBUUEsTUFBTUksWUFBWSxHQUFHLElBQzFETCxNQUFNTSxjQUFjLEVBQ3BCTixNQUFNTyxpQkFBaUI7SUFFM0I7SUFFQTs7Ozs7R0FLQyxHQUNEQyxRQUFRQyxHQUFHLEVBQUVDLGtCQUFrQixDQUFDLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDOUMsT0FBTyxJQUFJLENBQUNkLFlBQVksQ0FBQ1csT0FBTyxDQUFDQyxLQUFLQyxpQkFBaUJDLFNBQ3BEQyxLQUFLLENBQUMsQ0FBQ0M7WUFDTixJQUFJQSxpQkFBaUJ4QixnQkFBZ0I7Z0JBQ25DLE9BQU8sSUFBSSxDQUFDUyxhQUFhLENBQUNVLE9BQU8sQ0FBQ0MsS0FBS0MsaUJBQWlCQyxTQUNyREcsSUFBSSxDQUFDLENBQUNiO29CQUNMLE9BQU9jLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNqQixXQUFXLENBQUNjLE9BQU9aO2dCQUNqRCxHQUNDVyxLQUFLLENBQUMsQ0FBQ0s7b0JBQ0osSUFBSUEsaUJBQWlCNUIsZ0JBQWdCO3dCQUNuQyxPQUFPMEIsUUFBUUcsTUFBTSxDQUFDLElBQUksQ0FBQ25CLFdBQVcsQ0FBQ2MsT0FBT0k7b0JBQ2hELE9BQU87d0JBQ0wsT0FBT0YsUUFBUUcsTUFBTSxDQUFDRDtvQkFDeEI7Z0JBQ0Y7WUFFTixPQUFPO2dCQUNMLE9BQU9GLFFBQVFHLE1BQU0sQ0FBQ0w7WUFDeEI7UUFDRjtJQUNKO0lBRUE7Ozs7O0dBS0MsR0FDRE0sSUFBSVYsR0FBRyxFQUFFO1FBQ1AsT0FBT00sUUFBUUssR0FBRyxDQUFDO1lBQ2pCLElBQUksQ0FBQ3ZCLFlBQVksQ0FBQ3NCLEdBQUcsQ0FBQ1Y7WUFDdEIsSUFBSSxDQUFDWCxhQUFhLENBQUNxQixHQUFHLENBQUNWO1NBQ3hCLEVBQUVLLElBQUksQ0FBQyxDQUFDLENBQUNkLE9BQU9DLE1BQU07WUFDckIsT0FBTyxJQUFJLENBQUNGLFdBQVcsQ0FBQ0MsT0FBT0M7UUFDakM7SUFDRjtJQUVBLElBQUlvQixTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUN4QixZQUFZLENBQUN3QixNQUFNO0lBQ2pDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvQnVyc3R5UmF0ZUxpbWl0ZXIuanM/ZDkyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSYXRlTGltaXRlclJlcyA9IHJlcXVpcmUoXCIuL1JhdGVMaW1pdGVyUmVzXCIpO1xuXG4vKipcbiAqIEJ1cnN0eSByYXRlIGxpbWl0ZXIgZXhwb3NlcyBvbmx5IG1zQmVmb3JlTmV4dCB0aW1lIGFuZCBkb2Vzbid0IGV4cG9zZSBwb2ludHMgZnJvbSBidXJzdHkgbGltaXRlciBieSBkZWZhdWx0XG4gKiBAdHlwZSB7QnVyc3R5UmF0ZUxpbWl0ZXJ9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQnVyc3R5UmF0ZUxpbWl0ZXIge1xuICBjb25zdHJ1Y3RvcihyYXRlTGltaXRlciwgYnVyc3RMaW1pdGVyKSB7XG4gICAgdGhpcy5fcmF0ZUxpbWl0ZXIgPSByYXRlTGltaXRlcjtcbiAgICB0aGlzLl9idXJzdExpbWl0ZXIgPSBidXJzdExpbWl0ZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSByYXRlIGxpbWl0ZXIgcmVzcG9uc2Ugb2JqZWN0cy4gUmVzcG9uc2VzIGNhbiBiZSBudWxsXG4gICAqXG4gICAqIEBwYXJhbSB7UmF0ZUxpbWl0ZXJSZXN9IFtybFJlc10gUmF0ZSBsaW1pdGVyIHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7UmF0ZUxpbWl0ZXJSZXN9IFtibFJlc10gQnVyc3R5IGxpbWl0ZXIgcmVzcG9uc2VcbiAgICovXG4gIF9jb21iaW5lUmVzKHJsUmVzLCBibFJlcykge1xuICAgIGlmICghcmxSZXMpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSYXRlTGltaXRlclJlcyhcbiAgICAgIHJsUmVzLnJlbWFpbmluZ1BvaW50cyxcbiAgICAgIE1hdGgubWluKHJsUmVzLm1zQmVmb3JlTmV4dCwgYmxSZXMgPyBibFJlcy5tc0JlZm9yZU5leHQgOiAwKSxcbiAgICAgIHJsUmVzLmNvbnN1bWVkUG9pbnRzLFxuICAgICAgcmxSZXMuaXNGaXJzdEluRHVyYXRpb25cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gcG9pbnRzVG9Db25zdW1lXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBjb25zdW1lKGtleSwgcG9pbnRzVG9Db25zdW1lID0gMSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JhdGVMaW1pdGVyLmNvbnN1bWUoa2V5LCBwb2ludHNUb0NvbnN1bWUsIG9wdGlvbnMpXG4gICAgICAuY2F0Y2goKHJsUmVqKSA9PiB7XG4gICAgICAgIGlmIChybFJlaiBpbnN0YW5jZW9mIFJhdGVMaW1pdGVyUmVzKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2J1cnN0TGltaXRlci5jb25zdW1lKGtleSwgcG9pbnRzVG9Db25zdW1lLCBvcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oKGJsUmVzKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fY29tYmluZVJlcyhybFJlaiwgYmxSZXMpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoYmxSZWopID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYmxSZWogaW5zdGFuY2VvZiBSYXRlTGltaXRlclJlcykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMuX2NvbWJpbmVSZXMocmxSZWosIGJsUmVqKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGJsUmVqKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChybFJlailcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBkb2Vzbid0IGV4cG9zZSBhdmFpbGFibGUgcG9pbnRzIGZyb20gYnVyc3RMaW1pdGVyXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHJldHVybnMge1Byb21pc2U8UmF0ZUxpbWl0ZXJSZXM+fVxuICAgKi9cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLl9yYXRlTGltaXRlci5nZXQoa2V5KSxcbiAgICAgIHRoaXMuX2J1cnN0TGltaXRlci5nZXQoa2V5KSxcbiAgICBdKS50aGVuKChbcmxSZXMsIGJsUmVzXSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbWJpbmVSZXMocmxSZXMsIGJsUmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBwb2ludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JhdGVMaW1pdGVyLnBvaW50cztcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlclJlcyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiQnVyc3R5UmF0ZUxpbWl0ZXIiLCJjb25zdHJ1Y3RvciIsInJhdGVMaW1pdGVyIiwiYnVyc3RMaW1pdGVyIiwiX3JhdGVMaW1pdGVyIiwiX2J1cnN0TGltaXRlciIsIl9jb21iaW5lUmVzIiwicmxSZXMiLCJibFJlcyIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtaW4iLCJtc0JlZm9yZU5leHQiLCJjb25zdW1lZFBvaW50cyIsImlzRmlyc3RJbkR1cmF0aW9uIiwiY29uc3VtZSIsImtleSIsInBvaW50c1RvQ29uc3VtZSIsIm9wdGlvbnMiLCJjYXRjaCIsInJsUmVqIiwidGhlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiYmxSZWoiLCJyZWplY3QiLCJnZXQiLCJhbGwiLCJwb2ludHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/BurstyRateLimiter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RLWrapperBlackAndWhite.js":
/*!**************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RLWrapperBlackAndWhite.js ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nmodule.exports = class RLWrapperBlackAndWhite {\n    constructor(opts = {}){\n        this.limiter = opts.limiter;\n        this.blackList = opts.blackList;\n        this.whiteList = opts.whiteList;\n        this.isBlackListed = opts.isBlackListed;\n        this.isWhiteListed = opts.isWhiteListed;\n        this.runActionAnyway = opts.runActionAnyway;\n    }\n    get limiter() {\n        return this._limiter;\n    }\n    set limiter(value) {\n        if (typeof value === \"undefined\") {\n            throw new Error(\"limiter is not set\");\n        }\n        this._limiter = value;\n    }\n    get runActionAnyway() {\n        return this._runActionAnyway;\n    }\n    set runActionAnyway(value) {\n        this._runActionAnyway = typeof value === \"undefined\" ? false : value;\n    }\n    get blackList() {\n        return this._blackList;\n    }\n    set blackList(value) {\n        this._blackList = Array.isArray(value) ? value : [];\n    }\n    get isBlackListed() {\n        return this._isBlackListed;\n    }\n    set isBlackListed(func) {\n        if (typeof func === \"undefined\") {\n            func = ()=>false;\n        }\n        if (typeof func !== \"function\") {\n            throw new Error(\"isBlackListed must be function\");\n        }\n        this._isBlackListed = func;\n    }\n    get whiteList() {\n        return this._whiteList;\n    }\n    set whiteList(value) {\n        this._whiteList = Array.isArray(value) ? value : [];\n    }\n    get isWhiteListed() {\n        return this._isWhiteListed;\n    }\n    set isWhiteListed(func) {\n        if (typeof func === \"undefined\") {\n            func = ()=>false;\n        }\n        if (typeof func !== \"function\") {\n            throw new Error(\"isWhiteListed must be function\");\n        }\n        this._isWhiteListed = func;\n    }\n    isBlackListedSomewhere(key) {\n        return this.blackList.indexOf(key) >= 0 || this.isBlackListed(key);\n    }\n    isWhiteListedSomewhere(key) {\n        return this.whiteList.indexOf(key) >= 0 || this.isWhiteListed(key);\n    }\n    getBlackRes() {\n        return new RateLimiterRes(0, Number.MAX_SAFE_INTEGER, 0, false);\n    }\n    getWhiteRes() {\n        return new RateLimiterRes(Number.MAX_SAFE_INTEGER, 0, 0, false);\n    }\n    rejectBlack() {\n        return Promise.reject(this.getBlackRes());\n    }\n    resolveBlack() {\n        return Promise.resolve(this.getBlackRes());\n    }\n    resolveWhite() {\n        return Promise.resolve(this.getWhiteRes());\n    }\n    consume(key, pointsToConsume = 1) {\n        let res;\n        if (this.isWhiteListedSomewhere(key)) {\n            res = this.resolveWhite();\n        } else if (this.isBlackListedSomewhere(key)) {\n            res = this.rejectBlack();\n        }\n        if (typeof res === \"undefined\") {\n            return this.limiter.consume(key, pointsToConsume);\n        }\n        if (this.runActionAnyway) {\n            this.limiter.consume(key, pointsToConsume).catch(()=>{});\n        }\n        return res;\n    }\n    block(key, secDuration) {\n        let res;\n        if (this.isWhiteListedSomewhere(key)) {\n            res = this.resolveWhite();\n        } else if (this.isBlackListedSomewhere(key)) {\n            res = this.resolveBlack();\n        }\n        if (typeof res === \"undefined\") {\n            return this.limiter.block(key, secDuration);\n        }\n        if (this.runActionAnyway) {\n            this.limiter.block(key, secDuration).catch(()=>{});\n        }\n        return res;\n    }\n    penalty(key, points) {\n        let res;\n        if (this.isWhiteListedSomewhere(key)) {\n            res = this.resolveWhite();\n        } else if (this.isBlackListedSomewhere(key)) {\n            res = this.resolveBlack();\n        }\n        if (typeof res === \"undefined\") {\n            return this.limiter.penalty(key, points);\n        }\n        if (this.runActionAnyway) {\n            this.limiter.penalty(key, points).catch(()=>{});\n        }\n        return res;\n    }\n    reward(key, points) {\n        let res;\n        if (this.isWhiteListedSomewhere(key)) {\n            res = this.resolveWhite();\n        } else if (this.isBlackListedSomewhere(key)) {\n            res = this.resolveBlack();\n        }\n        if (typeof res === \"undefined\") {\n            return this.limiter.reward(key, points);\n        }\n        if (this.runActionAnyway) {\n            this.limiter.reward(key, points).catch(()=>{});\n        }\n        return res;\n    }\n    get(key) {\n        let res;\n        if (this.isWhiteListedSomewhere(key)) {\n            res = this.resolveWhite();\n        } else if (this.isBlackListedSomewhere(key)) {\n            res = this.resolveBlack();\n        }\n        if (typeof res === \"undefined\" || this.runActionAnyway) {\n            return this.limiter.get(key);\n        }\n        return res;\n    }\n    delete(key) {\n        return this.limiter.delete(key);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9STFdyYXBwZXJCbGFja0FuZFdoaXRlLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGlCQUFpQkMsbUJBQU9BLENBQUM7QUFFL0JDLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQkMsWUFBWUMsT0FBTyxDQUFDLENBQUMsQ0FBRTtRQUNyQixJQUFJLENBQUNDLE9BQU8sR0FBR0QsS0FBS0MsT0FBTztRQUMzQixJQUFJLENBQUNDLFNBQVMsR0FBR0YsS0FBS0UsU0FBUztRQUMvQixJQUFJLENBQUNDLFNBQVMsR0FBR0gsS0FBS0csU0FBUztRQUMvQixJQUFJLENBQUNDLGFBQWEsR0FBR0osS0FBS0ksYUFBYTtRQUN2QyxJQUFJLENBQUNDLGFBQWEsR0FBR0wsS0FBS0ssYUFBYTtRQUN2QyxJQUFJLENBQUNDLGVBQWUsR0FBR04sS0FBS00sZUFBZTtJQUM3QztJQUVBLElBQUlMLFVBQVU7UUFDWixPQUFPLElBQUksQ0FBQ00sUUFBUTtJQUN0QjtJQUVBLElBQUlOLFFBQVFPLEtBQUssRUFBRTtRQUNqQixJQUFJLE9BQU9BLFVBQVUsYUFBYTtZQUNoQyxNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFFQSxJQUFJLENBQUNGLFFBQVEsR0FBR0M7SUFDbEI7SUFFQSxJQUFJRixrQkFBa0I7UUFDcEIsT0FBTyxJQUFJLENBQUNJLGdCQUFnQjtJQUM5QjtJQUVBLElBQUlKLGdCQUFnQkUsS0FBSyxFQUFFO1FBQ3pCLElBQUksQ0FBQ0UsZ0JBQWdCLEdBQUcsT0FBT0YsVUFBVSxjQUFjLFFBQVFBO0lBQ2pFO0lBRUEsSUFBSU4sWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDUyxVQUFVO0lBQ3hCO0lBRUEsSUFBSVQsVUFBVU0sS0FBSyxFQUFFO1FBQ25CLElBQUksQ0FBQ0csVUFBVSxHQUFHQyxNQUFNQyxPQUFPLENBQUNMLFNBQVNBLFFBQVEsRUFBRTtJQUNyRDtJQUVBLElBQUlKLGdCQUFn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QUVBTyxJQUFJdEIsR0FBRyxFQUFFO1FBQ1AsSUFBSWU7UUFDSixJQUFJLElBQUksQ0FBQ2Isc0JBQXNCLENBQUNGLE1BQU07WUFDcENlLE1BQU0sSUFBSSxDQUFDSCxZQUFZO1FBQ3pCLE9BQU8sSUFBSSxJQUFJLENBQUNiLHNCQUFzQixDQUFDQyxNQUFNO1lBQzNDZSxNQUFNLElBQUksQ0FBQ0wsWUFBWTtRQUN6QjtRQUVBLElBQUksT0FBT0ssUUFBUSxlQUFlLElBQUksQ0FBQzVCLGVBQWUsRUFBRTtZQUN0RCxPQUFPLElBQUksQ0FBQ0wsT0FBTyxDQUFDd0MsR0FBRyxDQUFDdEI7UUFDMUI7UUFFQSxPQUFPZTtJQUNUO0lBRUFRLE9BQU92QixHQUFHLEVBQUU7UUFDVixPQUFPLElBQUksQ0FBQ2xCLE9BQU8sQ0FBQ3lDLE1BQU0sQ0FBQ3ZCO0lBQzdCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUkxXcmFwcGVyQmxhY2tBbmRXaGl0ZS5qcz85NWJlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJhdGVMaW1pdGVyUmVzID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclJlcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFJMV3JhcHBlckJsYWNrQW5kV2hpdGUge1xuICBjb25zdHJ1Y3RvcihvcHRzID0ge30pIHtcbiAgICB0aGlzLmxpbWl0ZXIgPSBvcHRzLmxpbWl0ZXI7XG4gICAgdGhpcy5ibGFja0xpc3QgPSBvcHRzLmJsYWNrTGlzdDtcbiAgICB0aGlzLndoaXRlTGlzdCA9IG9wdHMud2hpdGVMaXN0O1xuICAgIHRoaXMuaXNCbGFja0xpc3RlZCA9IG9wdHMuaXNCbGFja0xpc3RlZDtcbiAgICB0aGlzLmlzV2hpdGVMaXN0ZWQgPSBvcHRzLmlzV2hpdGVMaXN0ZWQ7XG4gICAgdGhpcy5ydW5BY3Rpb25Bbnl3YXkgPSBvcHRzLnJ1bkFjdGlvbkFueXdheTtcbiAgfVxuXG4gIGdldCBsaW1pdGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9saW1pdGVyO1xuICB9XG5cbiAgc2V0IGxpbWl0ZXIodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaW1pdGVyIGlzIG5vdCBzZXQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9saW1pdGVyID0gdmFsdWU7XG4gIH1cblxuICBnZXQgcnVuQWN0aW9uQW55d2F5KCkge1xuICAgIHJldHVybiB0aGlzLl9ydW5BY3Rpb25Bbnl3YXk7XG4gIH1cblxuICBzZXQgcnVuQWN0aW9uQW55d2F5KHZhbHVlKSB7XG4gICAgdGhpcy5fcnVuQWN0aW9uQW55d2F5ID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogdmFsdWU7XG4gIH1cblxuICBnZXQgYmxhY2tMaXN0KCkge1xuICAgIHJldHVybiB0aGlzLl9ibGFja0xpc3Q7XG4gIH1cblxuICBzZXQgYmxhY2tMaXN0KHZhbHVlKSB7XG4gICAgdGhpcy5fYmxhY2tMaXN0ID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdO1xuICB9XG5cbiAgZ2V0IGlzQmxhY2tMaXN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxhY2tMaXN0ZWQ7XG4gIH1cblxuICBzZXQgaXNCbGFja0xpc3RlZChmdW5jKSB7XG4gICAgaWYgKHR5cGVvZiBmdW5jID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZnVuYyA9ICgpID0+IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaXNCbGFja0xpc3RlZCBtdXN0IGJlIGZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuX2lzQmxhY2tMaXN0ZWQgPSBmdW5jO1xuICB9XG5cbiAgZ2V0IHdoaXRlTGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd2hpdGVMaXN0O1xuICB9XG5cbiAgc2V0IHdoaXRlTGlzdCh2YWx1ZSkge1xuICAgIHRoaXMuX3doaXRlTGlzdCA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXTtcbiAgfVxuXG4gIGdldCBpc1doaXRlTGlzdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1doaXRlTGlzdGVkO1xuICB9XG5cbiAgc2V0IGlzV2hpdGVMaXN0ZWQoZnVuYykge1xuICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZ1bmMgPSAoKSA9PiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmdW5jICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lzV2hpdGVMaXN0ZWQgbXVzdCBiZSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICB0aGlzLl9pc1doaXRlTGlzdGVkID0gZnVuYztcbiAgfVxuXG4gIGlzQmxhY2tMaXN0ZWRTb21ld2hlcmUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuYmxhY2tMaXN0LmluZGV4T2Yoa2V5KSA+PSAwIHx8IHRoaXMuaXNCbGFja0xpc3RlZChrZXkpO1xuICB9XG5cbiAgaXNXaGl0ZUxpc3RlZFNvbWV3aGVyZShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy53aGl0ZUxpc3QuaW5kZXhPZihrZXkpID49IDAgfHwgdGhpcy5pc1doaXRlTGlzdGVkKGtleSk7XG4gIH1cblxuICBnZXRCbGFja1JlcygpIHtcbiAgICByZXR1cm4gbmV3IFJhdGVMaW1pdGVyUmVzKDAsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCAwLCBmYWxzZSk7XG4gIH1cblxuICBnZXRXaGl0ZVJlcygpIHtcbiAgICByZXR1cm4gbmV3IFJhdGVMaW1pdGVyUmVzKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCAwLCAwLCBmYWxzZSk7XG4gIH1cblxuICByZWplY3RCbGFjaygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy5nZXRCbGFja1JlcygpKTtcbiAgfVxuXG4gIHJlc29sdmVCbGFjaygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuZ2V0QmxhY2tSZXMoKSk7XG4gIH1cblxuICByZXNvbHZlV2hpdGUoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmdldFdoaXRlUmVzKCkpO1xuICB9XG5cbiAgY29uc3VtZShrZXksIHBvaW50c1RvQ29uc3VtZSA9IDEpIHtcbiAgICBsZXQgcmVzO1xuICAgIGlmICh0aGlzLmlzV2hpdGVMaXN0ZWRTb21ld2hlcmUoa2V5KSkge1xuICAgICAgcmVzID0gdGhpcy5yZXNvbHZlV2hpdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNCbGFja0xpc3RlZFNvbWV3aGVyZShrZXkpKSB7XG4gICAgICByZXMgPSB0aGlzLnJlamVjdEJsYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5saW1pdGVyLmNvbnN1bWUoa2V5LCBwb2ludHNUb0NvbnN1bWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bkFjdGlvbkFueXdheSkge1xuICAgICAgdGhpcy5saW1pdGVyLmNvbnN1bWUoa2V5LCBwb2ludHNUb0NvbnN1bWUpLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGJsb2NrKGtleSwgc2VjRHVyYXRpb24pIHtcbiAgICBsZXQgcmVzO1xuICAgIGlmICh0aGlzLmlzV2hpdGVMaXN0ZWRTb21ld2hlcmUoa2V5KSkge1xuICAgICAgcmVzID0gdGhpcy5yZXNvbHZlV2hpdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNCbGFja0xpc3RlZFNvbWV3aGVyZShrZXkpKSB7XG4gICAgICByZXMgPSB0aGlzLnJlc29sdmVCbGFjaygpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHRoaXMubGltaXRlci5ibG9jayhrZXksIHNlY0R1cmF0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydW5BY3Rpb25Bbnl3YXkpIHtcbiAgICAgIHRoaXMubGltaXRlci5ibG9jayhrZXksIHNlY0R1cmF0aW9uKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwZW5hbHR5KGtleSwgcG9pbnRzKSB7XG4gICAgbGV0IHJlcztcbiAgICBpZiAodGhpcy5pc1doaXRlTGlzdGVkU29tZXdoZXJlKGtleSkpIHtcbiAgICAgIHJlcyA9IHRoaXMucmVzb2x2ZVdoaXRlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQmxhY2tMaXN0ZWRTb21ld2hlcmUoa2V5KSkge1xuICAgICAgcmVzID0gdGhpcy5yZXNvbHZlQmxhY2soKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpbWl0ZXIucGVuYWx0eShrZXksIHBvaW50cyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucnVuQWN0aW9uQW55d2F5KSB7XG4gICAgICB0aGlzLmxpbWl0ZXIucGVuYWx0eShrZXksIHBvaW50cykuY2F0Y2goKCkgPT4ge30pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcmV3YXJkKGtleSwgcG9pbnRzKSB7XG4gICAgbGV0IHJlcztcbiAgICBpZiAodGhpcy5pc1doaXRlTGlzdGVkU29tZXdoZXJlKGtleSkpIHtcbiAgICAgIHJlcyA9IHRoaXMucmVzb2x2ZVdoaXRlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQmxhY2tMaXN0ZWRTb21ld2hlcmUoa2V5KSkge1xuICAgICAgcmVzID0gdGhpcy5yZXNvbHZlQmxhY2soKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpbWl0ZXIucmV3YXJkKGtleSwgcG9pbnRzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydW5BY3Rpb25Bbnl3YXkpIHtcbiAgICAgIHRoaXMubGltaXRlci5yZXdhcmQoa2V5LCBwb2ludHMpLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGdldChrZXkpIHtcbiAgICBsZXQgcmVzO1xuICAgIGlmICh0aGlzLmlzV2hpdGVMaXN0ZWRTb21ld2hlcmUoa2V5KSkge1xuICAgICAgcmVzID0gdGhpcy5yZXNvbHZlV2hpdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNCbGFja0xpc3RlZFNvbWV3aGVyZShrZXkpKSB7XG4gICAgICByZXMgPSB0aGlzLnJlc29sdmVCbGFjaygpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVzID09PSAndW5kZWZpbmVkJyB8fCB0aGlzLnJ1bkFjdGlvbkFueXdheSkge1xuICAgICAgcmV0dXJuIHRoaXMubGltaXRlci5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgZGVsZXRlKGtleSkge1xuICAgIHJldHVybiB0aGlzLmxpbWl0ZXIuZGVsZXRlKGtleSk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJSZXMiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIlJMV3JhcHBlckJsYWNrQW5kV2hpdGUiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJsaW1pdGVyIiwiYmxhY2tMaXN0Iiwid2hpdGVMaXN0IiwiaXNCbGFja0xpc3RlZCIsImlzV2hpdGVMaXN0ZWQiLCJydW5BY3Rpb25Bbnl3YXkiLCJfbGltaXRlciIsInZhbHVlIiwiRXJyb3IiLCJfcnVuQWN0aW9uQW55d2F5IiwiX2JsYWNrTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsIl9pc0JsYWNrTGlzdGVkIiwiZnVuYyIsIl93aGl0ZUxpc3QiLCJfaXNXaGl0ZUxpc3RlZCIsImlzQmxhY2tMaXN0ZWRTb21ld2hlcmUiLCJrZXkiLCJpbmRleE9mIiwiaXNXaGl0ZUxpc3RlZFNvbWV3aGVyZSIsImdldEJsYWNrUmVzIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImdldFdoaXRlUmVzIiwicmVqZWN0QmxhY2siLCJQcm9taXNlIiwicmVqZWN0IiwicmVzb2x2ZUJsYWNrIiwicmVzb2x2ZSIsInJlc29sdmVXaGl0ZSIsImNvbnN1bWUiLCJwb2ludHNUb0NvbnN1bWUiLCJyZXMiLCJjYXRjaCIsImJsb2NrIiwic2VjRHVyYXRpb24iLCJwZW5hbHR5IiwicG9pbnRzIiwicmV3YXJkIiwiZ2V0IiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RLWrapperBlackAndWhite.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js":
/*!***********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js ***!
  \***********************************************************************/
/***/ ((module) => {

eval("module.exports = class RateLimiterAbstract {\n    /**\n   *\n   * @param opts Object Defaults {\n   *   points: 4, // Number of points\n   *   duration: 1, // Per seconds\n   *   blockDuration: 0, // Block if consumed more than points in current duration for blockDuration seconds\n   *   execEvenly: false, // Execute allowed actions evenly over duration\n   *   execEvenlyMinDelayMs: duration * 1000 / points, // ms, works with execEvenly=true option\n   *   keyPrefix: 'rlflx',\n   * }\n   */ constructor(opts = {}){\n        this.points = opts.points;\n        this.duration = opts.duration;\n        this.blockDuration = opts.blockDuration;\n        this.execEvenly = opts.execEvenly;\n        this.execEvenlyMinDelayMs = opts.execEvenlyMinDelayMs;\n        this.keyPrefix = opts.keyPrefix;\n    }\n    get points() {\n        return this._points;\n    }\n    set points(value) {\n        this._points = value >= 0 ? value : 4;\n    }\n    get duration() {\n        return this._duration;\n    }\n    set duration(value) {\n        this._duration = typeof value === \"undefined\" ? 1 : value;\n    }\n    get msDuration() {\n        return this.duration * 1000;\n    }\n    get blockDuration() {\n        return this._blockDuration;\n    }\n    set blockDuration(value) {\n        this._blockDuration = typeof value === \"undefined\" ? 0 : value;\n    }\n    get msBlockDuration() {\n        return this.blockDuration * 1000;\n    }\n    get execEvenly() {\n        return this._execEvenly;\n    }\n    set execEvenly(value) {\n        this._execEvenly = typeof value === \"undefined\" ? false : Boolean(value);\n    }\n    get execEvenlyMinDelayMs() {\n        return this._execEvenlyMinDelayMs;\n    }\n    set execEvenlyMinDelayMs(value) {\n        this._execEvenlyMinDelayMs = typeof value === \"undefined\" ? Math.ceil(this.msDuration / this.points) : value;\n    }\n    get keyPrefix() {\n        return this._keyPrefix;\n    }\n    set keyPrefix(value) {\n        if (typeof value === \"undefined\") {\n            value = \"rlflx\";\n        }\n        if (typeof value !== \"string\") {\n            throw new Error(\"keyPrefix must be string\");\n        }\n        this._keyPrefix = value;\n    }\n    _getKeySecDuration(options = {}) {\n        return options && options.customDuration >= 0 ? options.customDuration : this.duration;\n    }\n    getKey(key) {\n        return this.keyPrefix.length > 0 ? `${this.keyPrefix}:${key}` : key;\n    }\n    parseKey(rlKey) {\n        return rlKey.substring(this.keyPrefix.length);\n    }\n    consume() {\n        throw new Error(\"You have to implement the method 'consume'!\");\n    }\n    penalty() {\n        throw new Error(\"You have to implement the method 'penalty'!\");\n    }\n    reward() {\n        throw new Error(\"You have to implement the method 'reward'!\");\n    }\n    get() {\n        throw new Error(\"You have to implement the method 'get'!\");\n    }\n    set() {\n        throw new Error(\"You have to implement the method 'set'!\");\n    }\n    block() {\n        throw new Error(\"You have to implement the method 'block'!\");\n    }\n    delete() {\n        throw new Error(\"You have to implement the method 'delete'!\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJBYnN0cmFjdC5qcz83ODJiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUmF0ZUxpbWl0ZXJBYnN0cmFjdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBPYmplY3QgRGVmYXVsdHMge1xuICAgKiAgIHBvaW50czogNCwgLy8gTnVtYmVyIG9mIHBvaW50c1xuICAgKiAgIGR1cmF0aW9uOiAxLCAvLyBQZXIgc2Vjb25kc1xuICAgKiAgIGJsb2NrRHVyYXRpb246IDAsIC8vIEJsb2NrIGlmIGNvbnN1bWVkIG1vcmUgdGhhbiBwb2ludHMgaW4gY3VycmVudCBkdXJhdGlvbiBmb3IgYmxvY2tEdXJhdGlvbiBzZWNvbmRzXG4gICAqICAgZXhlY0V2ZW5seTogZmFsc2UsIC8vIEV4ZWN1dGUgYWxsb3dlZCBhY3Rpb25zIGV2ZW5seSBvdmVyIGR1cmF0aW9uXG4gICAqICAgZXhlY0V2ZW5seU1pbkRlbGF5TXM6IGR1cmF0aW9uICogMTAwMCAvIHBvaW50cywgLy8gbXMsIHdvcmtzIHdpdGggZXhlY0V2ZW5seT10cnVlIG9wdGlvblxuICAgKiAgIGtleVByZWZpeDogJ3JsZmx4JyxcbiAgICogfVxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG4gICAgdGhpcy5wb2ludHMgPSBvcHRzLnBvaW50cztcbiAgICB0aGlzLmR1cmF0aW9uID0gb3B0cy5kdXJhdGlvbjtcbiAgICB0aGlzLmJsb2NrRHVyYXRpb24gPSBvcHRzLmJsb2NrRHVyYXRpb247XG4gICAgdGhpcy5leGVjRXZlbmx5ID0gb3B0cy5leGVjRXZlbmx5O1xuICAgIHRoaXMuZXhlY0V2ZW5seU1pbkRlbGF5TXMgPSBvcHRzLmV4ZWNFdmVubHlNaW5EZWxheU1zO1xuICAgIHRoaXMua2V5UHJlZml4ID0gb3B0cy5rZXlQcmVmaXg7XG4gIH1cblxuICBnZXQgcG9pbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9wb2ludHM7XG4gIH1cblxuICBzZXQgcG9pbnRzKHZhbHVlKSB7XG4gICAgdGhpcy5fcG9pbnRzID0gdmFsdWUgPj0gMCA/IHZhbHVlIDogNDtcbiAgfVxuXG4gIGdldCBkdXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZHVyYXRpb247XG4gIH1cblxuICBzZXQgZHVyYXRpb24odmFsdWUpIHtcbiAgICB0aGlzLl9kdXJhdGlvbiA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAxIDogdmFsdWU7XG4gIH1cblxuICBnZXQgbXNEdXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kdXJhdGlvbiAqIDEwMDA7XG4gIH1cblxuICBnZXQgYmxvY2tEdXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fYmxvY2tEdXJhdGlvbjtcbiAgfVxuXG4gIHNldCBibG9ja0R1cmF0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fYmxvY2tEdXJhdGlvbiA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAwIDogdmFsdWU7XG4gIH1cblxuICBnZXQgbXNCbG9ja0R1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJsb2NrRHVyYXRpb24gKiAxMDAwO1xuICB9XG5cbiAgZ2V0IGV4ZWNFdmVubHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2V4ZWNFdmVubHk7XG4gIH1cblxuICBzZXQgZXhlY0V2ZW5seSh2YWx1ZSkge1xuICAgIHRoaXMuX2V4ZWNFdmVubHkgPSB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gZmFsc2UgOiBCb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBleGVjRXZlbmx5TWluRGVsYXlNcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZXhlY0V2ZW5seU1pbkRlbGF5TXM7XG4gIH1cblxuICBzZXQgZXhlY0V2ZW5seU1pbkRlbGF5TXModmFsdWUpIHtcbiAgICB0aGlzLl9leGVjRXZlbmx5TWluRGVsYXlNcyA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyBNYXRoLmNlaWwodGhpcy5tc0R1cmF0aW9uIC8gdGhpcy5wb2ludHMpIDogdmFsdWU7XG4gIH1cblxuICBnZXQga2V5UHJlZml4KCkge1xuICAgIHJldHVybiB0aGlzLl9rZXlQcmVmaXg7XG4gIH1cblxuICBzZXQga2V5UHJlZml4KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhbHVlID0gJ3JsZmx4JztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigna2V5UHJlZml4IG11c3QgYmUgc3RyaW5nJyk7XG4gICAgfVxuICAgIHRoaXMuX2tleVByZWZpeCA9IHZhbHVlO1xuICB9XG5cbiAgX2dldEtleVNlY0R1cmF0aW9uKG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMuY3VzdG9tRHVyYXRpb24gPj0gMFxuICAgICAgPyBvcHRpb25zLmN1c3RvbUR1cmF0aW9uXG4gICAgICA6IHRoaXMuZHVyYXRpb247XG4gIH1cblxuICBnZXRLZXkoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMua2V5UHJlZml4Lmxlbmd0aCA+IDAgPyBgJHt0aGlzLmtleVByZWZpeH06JHtrZXl9YCA6IGtleTtcbiAgfVxuXG4gIHBhcnNlS2V5KHJsS2V5KSB7XG4gICAgcmV0dXJuIHJsS2V5LnN1YnN0cmluZyh0aGlzLmtleVByZWZpeC5sZW5ndGgpO1xuICB9XG5cbiAgY29uc3VtZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSB0byBpbXBsZW1lbnQgdGhlIG1ldGhvZCAnY29uc3VtZSchXCIpO1xuICB9XG5cbiAgcGVuYWx0eSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSB0byBpbXBsZW1lbnQgdGhlIG1ldGhvZCAncGVuYWx0eSchXCIpO1xuICB9XG5cbiAgcmV3YXJkKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIHRvIGltcGxlbWVudCB0aGUgbWV0aG9kICdyZXdhcmQnIVwiKTtcbiAgfVxuXG4gIGdldCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSB0byBpbXBsZW1lbnQgdGhlIG1ldGhvZCAnZ2V0JyFcIik7XG4gIH1cblxuICBzZXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgdG8gaW1wbGVtZW50IHRoZSBtZXRob2QgJ3NldCchXCIpO1xuICB9XG5cbiAgYmxvY2soKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgdG8gaW1wbGVtZW50IHRoZSBtZXRob2QgJ2Jsb2NrJyFcIik7XG4gIH1cblxuICBkZWxldGUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgdG8gaW1wbGVtZW50IHRoZSBtZXRob2QgJ2RlbGV0ZSchXCIpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJSYXRlTGltaXRlckFic3RyYWN0IiwiY29uc3RydWN0b3IiLCJvcHRzIiwicG9pbnRzIiwiZHVyYXRpb24iLCJibG9ja0R1cmF0aW9uIiwiZXhlY0V2ZW5seSIsImV4ZWNFdmVubHlNaW5EZWxheU1zIiwia2V5UHJlZml4IiwiX3BvaW50cyIsInZhbHVlIiwiX2R1cmF0aW9uIiwibXNEdXJhdGlvbiIsIl9ibG9ja0R1cmF0aW9uIiwibXNCbG9ja0R1cmF0aW9uIiwiX2V4ZWNFdmVubHkiLCJCb29sZWFuIiwiX2V4ZWNFdmVubHlNaW5EZWxheU1zIiwiTWF0aCIsImNlaWwiLCJfa2V5UHJlZml4IiwiRXJyb3IiLCJfZ2V0S2V5U2VjRHVyYXRpb24iLCJvcHRpb25zIiwiY3VzdG9tRHVyYXRpb24iLCJnZXRLZXkiLCJrZXkiLCJsZW5ndGgiLCJwYXJzZUtleSIsInJsS2V5Iiwic3Vic3RyaW5nIiwiY29uc3VtZSIsInBlbmFsdHkiLCJyZXdhcmQiLCJnZXQiLCJzZXQiLCJibG9jayIsImRlbGV0ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQjs7Ozs7Ozs7OztHQVVDLEdBQ0RDLFlBQVlDLE9BQU8sQ0FBQyxDQUFDLENBQUU7UUFDckIsSUFBSSxDQUFDQyxNQUFNLEdBQUdELEtBQUtDLE1BQU07UUFDekIsSUFBSSxDQUFDQyxRQUFRLEdBQUdGLEtBQUtFLFFBQVE7UUFDN0IsSUFBSSxDQUFDQyxhQUFhLEdBQUdILEtBQUtHLGFBQWE7UUFDdkMsSUFBSSxDQUFDQyxVQUFVLEdBQUdKLEtBQUtJLFVBQVU7UUFDakMsSUFBSSxDQUFDQyxvQkFBb0IsR0FBR0wsS0FBS0ssb0JBQW9CO1FBQ3JELElBQUksQ0FBQ0MsU0FBUyxHQUFHTixLQUFLTSxTQUFTO0lBQ2pDO0lBRUEsSUFBSUwsU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDTSxPQUFPO0lBQ3JCO0lBRUEsSUFBSU4sT0FBT08sS0FBSyxFQUFFO1FBQ2hCLElBQUksQ0FBQ0QsT0FBTyxHQUFHQyxTQUFTLElBQUlBLFFBQVE7SUFDdEM7SUFFQSxJQUFJTixXQUFXO1FBQ2IsT0FBTyxJQUFJLENBQUNPLFNBQVM7SUFDdkI7SUFFQSxJQUFJUCxTQUFTTSxLQUFLLEVBQUU7UUFDbEIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsT0FBT0QsVUFBVSxjQUFjLElBQUlBO0lBQ3REO0lBRUEsSUFBSUUsYUFBYTtRQUNmLE9BQU8sSUFBSSxDQUFDUixRQUFRLEdBQUc7SUFDekI7SUFFQSxJQUFJQyxnQkFBZ0I7UUFDbEIsT0FBTyxJQUFJLENBQUNRLGNBQWM7SUFDNUI7SUFFQSxJQUFJUixjQUFjSyxLQUFLLEVBQUU7UUFDdkIsSUFBSSxDQUFDRyxjQUFjLEdBQUcsT0FBT0gsVUFBVSxjQUFjLElBQUlBO0lBQzNEO0lBRUEsSUFBSUksa0JBQWtCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDVCxhQUFhLEdBQUc7SUFDOUI7SUFFQSxJQUFJQyxhQUFhO1FBQ2YsT0FBTyxJQUFJLENBQUNTLFdBQVc7SUFDekI7SUFFQSxJQUFJVCxXQUFXSSxLQUFLLEVBQUU7UUFDcEIsSUFBSSxDQUFDSyxXQUFXLEdBQUcsT0FBT0wsVUFBVSxjQUFjLFFBQVFNLFFBQVFOO0lBQ3BFO0lBRUEsSUFBSUgsdUJBQXVCO1FBQ3pCLE9BQU8sSUFBSSxDQUFDVSxxQkFBcUI7SUFDbkM7SUFFQSxJQUFJVixxQkFBcUJHLEtBQUssRUFBRTtRQUM5QixJQUFJLENBQUNPLHFCQUFxQixHQUFHLE9BQU9QLFVBQVUsY0FBY1EsS0FBS0MsSUFBSSxDQUFDLElBQUksQ0FBQ1AsVUFBVSxHQUFHLElBQUksQ0FBQ1QsTUFBTSxJQUFJTztJQUN6RztJQUVBLElBQUlGLFlBQVk7UUFDZCxPQUFPLElBQUksQ0FBQ1ksVUFBVTtJQUN4QjtJQUVBLElBQUlaLFVBQVVFLEtBQUssRUFBRTtRQUNuQixJQUFJLE9BQU9BLFVBQVUsYUFBYTtZQUNoQ0EsUUFBUTtRQUNWO1FBQ0EsSUFBSSxPQUFPQSxVQUFVLFVBQVU7WUFDN0IsTUFBTSxJQUFJVyxNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDRCxVQUFVLEdBQUdWO0lBQ3BCO0lBRUFZLG1CQUFtQkMsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUMvQixPQUFPQSxXQUFXQSxRQUFRQyxjQUFjLElBQUksSUFDeENELFFBQVFDLGNBQWMsR0FDdEIsSUFBSSxDQUFDcEIsUUFBUTtJQUNuQjtJQUVBcUIsT0FBT0MsR0FBRyxFQUFFO1FBQ1YsT0FBTyxJQUFJLENBQUNsQixTQUFTLENBQUNtQixNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDbkIsU0FBUyxDQUFDLENBQUMsRUFBRWtCLElBQUksQ0FBQyxHQUFHQTtJQUNsRTtJQUVBRSxTQUFTQyxLQUFLLEVBQUU7UUFDZCxPQUFPQSxNQUFNQyxTQUFTLENBQUMsSUFBSSxDQUFDdEIsU0FBUyxDQUFDbUIsTUFBTTtJQUM5QztJQUVBSSxVQUFVO1FBQ1IsTUFBTSxJQUFJVixNQUFNO0lBQ2xCO0lBRUFXLFVBQVU7UUFDUixNQUFNLElBQUlYLE1BQU07SUFDbEI7SUFFQVksU0FBUztRQUNQLE1BQU0sSUFBSVosTUFBTTtJQUNsQjtJQUVBYSxNQUFNO1FBQ0osTUFBTSxJQUFJYixNQUFNO0lBQ2xCO0lBRUFjLE1BQU07UUFDSixNQUFNLElBQUlkLE1BQU07SUFDbEI7SUFFQWUsUUFBUTtRQUNOLE1BQU0sSUFBSWYsTUFBTTtJQUNsQjtJQUVBZ0IsU0FBUztRQUNQLE1BQU0sSUFBSWhCLE1BQU07SUFDbEI7QUFDRiIsImZpbGUiOiIocnNjKS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvbGliL1JhdGVMaW1pdGVyQWJzdHJhY3QuanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterCluster.js":
/*!**********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterCluster.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\n * Implements rate limiting in cluster using built-in IPC\n *\n * Two classes are described here: master and worker\n * Master have to be create in the master process without any options.\n * Any number of rate limiters can be created in workers, but each rate limiter must be with unique keyPrefix\n *\n * Workflow:\n * 1. master rate limiter created in master process\n * 2. worker rate limiter sends 'init' message with necessary options during creating\n * 3. master receives options and adds new rate limiter by keyPrefix if it isn't created yet\n * 4. master sends 'init' back to worker's rate limiter\n * 5. worker can process requests immediately,\n *    but they will be postponed by 'workerWaitInit' until master sends 'init' to worker\n * 6. every request to worker rate limiter creates a promise\n * 7. if master doesn't response for 'timeout', promise is rejected\n * 8. master sends 'resolve' or 'reject' command to worker\n * 9. worker resolves or rejects promise depending on message from master\n *\n */ const cluster = __webpack_require__(/*! cluster */ \"cluster\");\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst RateLimiterAbstract = __webpack_require__(/*! ./RateLimiterAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js\");\nconst RateLimiterMemory = __webpack_require__(/*! ./RateLimiterMemory */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemory.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nconst channel = \"rate_limiter_flexible\";\nlet masterInstance = null;\nconst masterSendToWorker = function(worker, msg, type, res) {\n    let data;\n    if (res === null || res === true || res === false) {\n        data = res;\n    } else {\n        data = {\n            remainingPoints: res.remainingPoints,\n            msBeforeNext: res.msBeforeNext,\n            consumedPoints: res.consumedPoints,\n            isFirstInDuration: res.isFirstInDuration\n        };\n    }\n    worker.send({\n        channel,\n        keyPrefix: msg.keyPrefix,\n        promiseId: msg.promiseId,\n        type,\n        data\n    });\n};\nconst workerWaitInit = function(payload) {\n    setTimeout(()=>{\n        if (this._initiated) {\n            process.send(payload);\n        // Promise will be removed by timeout if too long\n        } else if (typeof this._promises[payload.promiseId] !== \"undefined\") {\n            workerWaitInit.call(this, payload);\n        }\n    }, 30);\n};\nconst workerSendToMaster = function(func, promiseId, key, arg, opts) {\n    const payload = {\n        channel,\n        keyPrefix: this.keyPrefix,\n        func,\n        promiseId,\n        data: {\n            key,\n            arg,\n            opts\n        }\n    };\n    if (!this._initiated) {\n        // Wait init before sending messages to master\n        workerWaitInit.call(this, payload);\n    } else {\n        process.send(payload);\n    }\n};\nconst masterProcessMsg = function(worker, msg) {\n    if (!msg || msg.channel !== channel || typeof this._rateLimiters[msg.keyPrefix] === \"undefined\") {\n        return false;\n    }\n    let promise;\n    switch(msg.func){\n        case \"consume\":\n            promise = this._rateLimiters[msg.keyPrefix].consume(msg.data.key, msg.data.arg, msg.data.opts);\n            break;\n        case \"penalty\":\n            promise = this._rateLimiters[msg.keyPrefix].penalty(msg.data.key, msg.data.arg, msg.data.opts);\n            break;\n        case \"reward\":\n            promise = this._rateLimiters[msg.keyPrefix].reward(msg.data.key, msg.data.arg, msg.data.opts);\n            break;\n        case \"block\":\n            promise = this._rateLimiters[msg.keyPrefix].block(msg.data.key, msg.data.arg, msg.data.opts);\n            break;\n        case \"get\":\n            promise = this._rateLimiters[msg.keyPrefix].get(msg.data.key, msg.data.opts);\n            break;\n        case \"delete\":\n            promise = this._rateLimiters[msg.keyPrefix].delete(msg.data.key, msg.data.opts);\n            break;\n        default:\n            return false;\n    }\n    if (promise) {\n        promise.then((res)=>{\n            masterSendToWorker(worker, msg, \"resolve\", res);\n        }).catch((rejRes)=>{\n            masterSendToWorker(worker, msg, \"reject\", rejRes);\n        });\n    }\n};\nconst workerProcessMsg = function(msg) {\n    if (!msg || msg.channel !== channel || msg.keyPrefix !== this.keyPrefix) {\n        return false;\n    }\n    if (this._promises[msg.promiseId]) {\n        clearTimeout(this._promises[msg.promiseId].timeoutId);\n        let res;\n        if (msg.data === null || msg.data === true || msg.data === false) {\n            res = msg.data;\n        } else {\n            res = new RateLimiterRes(msg.data.remainingPoints, msg.data.msBeforeNext, msg.data.consumedPoints, msg.data.isFirstInDuration // eslint-disable-line comma-dangle\n            );\n        }\n        switch(msg.type){\n            case \"resolve\":\n                this._promises[msg.promiseId].resolve(res);\n                break;\n            case \"reject\":\n                this._promises[msg.promiseId].reject(res);\n                break;\n            default:\n                throw new Error(`RateLimiterCluster: no such message type '${msg.type}'`);\n        }\n        delete this._promises[msg.promiseId];\n    }\n};\n/**\n * Prepare options to send to master\n * Master will create rate limiter depending on options\n *\n * @returns {{points: *, duration: *, blockDuration: *, execEvenly: *, execEvenlyMinDelayMs: *, keyPrefix: *}}\n */ const getOpts = function() {\n    return {\n        points: this.points,\n        duration: this.duration,\n        blockDuration: this.blockDuration,\n        execEvenly: this.execEvenly,\n        execEvenlyMinDelayMs: this.execEvenlyMinDelayMs,\n        keyPrefix: this.keyPrefix\n    };\n};\nconst savePromise = function(resolve, reject) {\n    const hrtime = process.hrtime();\n    let promiseId = hrtime[0].toString() + hrtime[1].toString();\n    if (typeof this._promises[promiseId] !== \"undefined\") {\n        promiseId += crypto.randomBytes(12).toString(\"base64\");\n    }\n    this._promises[promiseId] = {\n        resolve,\n        reject,\n        timeoutId: setTimeout(()=>{\n            delete this._promises[promiseId];\n            reject(new Error(\"RateLimiterCluster timeout: no answer from master in time\"));\n        }, this.timeoutMs)\n    };\n    return promiseId;\n};\nclass RateLimiterClusterMaster {\n    constructor(){\n        if (masterInstance) {\n            return masterInstance;\n        }\n        this._rateLimiters = {};\n        cluster.setMaxListeners(0);\n        cluster.on(\"message\", (worker, msg)=>{\n            if (msg && msg.channel === channel && msg.type === \"init\") {\n                // If init request, check or create rate limiter by key prefix and send 'init' back to worker\n                if (typeof this._rateLimiters[msg.opts.keyPrefix] === \"undefined\") {\n                    this._rateLimiters[msg.opts.keyPrefix] = new RateLimiterMemory(msg.opts);\n                }\n                worker.send({\n                    channel,\n                    type: \"init\",\n                    keyPrefix: msg.opts.keyPrefix\n                });\n            } else {\n                masterProcessMsg.call(this, worker, msg);\n            }\n        });\n        masterInstance = this;\n    }\n}\nclass RateLimiterClusterMasterPM2 {\n    constructor(pm2){\n        if (masterInstance) {\n            return masterInstance;\n        }\n        this._rateLimiters = {};\n        pm2.launchBus((err, pm2Bus)=>{\n            pm2Bus.on(\"process:msg\", (packet)=>{\n                const msg = packet.raw;\n                if (msg && msg.channel === channel && msg.type === \"init\") {\n                    // If init request, check or create rate limiter by key prefix and send 'init' back to worker\n                    if (typeof this._rateLimiters[msg.opts.keyPrefix] === \"undefined\") {\n                        this._rateLimiters[msg.opts.keyPrefix] = new RateLimiterMemory(msg.opts);\n                    }\n                    pm2.sendDataToProcessId(packet.process.pm_id, {\n                        data: {},\n                        topic: channel,\n                        channel,\n                        type: \"init\",\n                        keyPrefix: msg.opts.keyPrefix\n                    }, (sendErr, res)=>{\n                        if (sendErr) {\n                            console.log(sendErr, res);\n                        }\n                    });\n                } else {\n                    const worker = {\n                        send: (msgData)=>{\n                            const pm2Message = msgData;\n                            pm2Message.topic = channel;\n                            if (typeof pm2Message.data === \"undefined\") {\n                                pm2Message.data = {};\n                            }\n                            pm2.sendDataToProcessId(packet.process.pm_id, pm2Message, (sendErr, res)=>{\n                                if (sendErr) {\n                                    console.log(sendErr, res);\n                                }\n                            });\n                        }\n                    };\n                    masterProcessMsg.call(this, worker, msg);\n                }\n            });\n        });\n        masterInstance = this;\n    }\n}\nclass RateLimiterClusterWorker extends RateLimiterAbstract {\n    get timeoutMs() {\n        return this._timeoutMs;\n    }\n    set timeoutMs(value) {\n        this._timeoutMs = typeof value === \"undefined\" ? 5000 : Math.abs(parseInt(value));\n    }\n    constructor(opts = {}){\n        super(opts);\n        process.setMaxListeners(0);\n        this.timeoutMs = opts.timeoutMs;\n        this._initiated = false;\n        process.on(\"message\", (msg)=>{\n            if (msg && msg.channel === channel && msg.type === \"init\" && msg.keyPrefix === this.keyPrefix) {\n                this._initiated = true;\n            } else {\n                workerProcessMsg.call(this, msg);\n            }\n        });\n        // Create limiter on master with specific options\n        process.send({\n            channel,\n            type: \"init\",\n            opts: getOpts.call(this)\n        });\n        this._promises = {};\n    }\n    consume(key, pointsToConsume = 1, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"consume\", promiseId, key, pointsToConsume, options);\n        });\n    }\n    penalty(key, points = 1, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"penalty\", promiseId, key, points, options);\n        });\n    }\n    reward(key, points = 1, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"reward\", promiseId, key, points, options);\n        });\n    }\n    block(key, secDuration, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"block\", promiseId, key, secDuration, options);\n        });\n    }\n    get(key, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"get\", promiseId, key, options);\n        });\n    }\n    delete(key, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const promiseId = savePromise.call(this, resolve, reject);\n            workerSendToMaster.call(this, \"delete\", promiseId, key, options);\n        });\n    }\n}\nmodule.exports = {\n    RateLimiterClusterMaster,\n    RateLimiterClusterMasterPM2,\n    RateLimiterCluster: RateLimiterClusterWorker\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlckNsdXN0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FtQkMsR0FFRCxNQUFNQSxVQUFVQyxtQkFBT0EsQ0FBQztBQUN4QixNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQztBQUN2QixNQUFNRSxzQkFBc0JGLG1CQUFPQSxDQUFDO0FBQ3BDLE1BQU1HLG9CQUFvQkgsbUJBQU9BLENBQUM7QUFDbEMsTUFBTUksaUJBQWlCSixtQkFBT0EsQ0FBQztBQUUvQixNQUFNSyxVQUFVO0FBQ2hCLElBQUlDLGlCQUFpQjtBQUVyQixNQUFNQyxxQkFBcUIsU0FBVUMsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsR0FBRztJQUN6RCxJQUFJQztJQUNKLElBQUlELFFBQVEsUUFBUUEsUUFBUSxRQUFRQSxRQUFRLE9BQU87UUFDakRDLE9BQU9EO0lBQ1QsT0FBTztRQUNMQyxPQUFPO1lBQ0xDLGlCQUFpQkYsSUFBSUUsZUFBZTtZQUNwQ0MsY0FBY0gsSUFBSUcsWUFBWTtZQUM5QkMsZ0JBQWdCSixJQUFJSSxjQUFjO1lBQ2xDQyxtQkFBbUJMLElBQUlLLGlCQUFpQjtRQUMxQztJQUNGO0lBQ0FSLE9BQU9TLElBQUksQ0FBQztRQUNWWjtRQUNBYSxXQUFXVCxJQUFJUyxTQUFTO1FBQ3hCQyxXQUFXVixJQUFJVSxTQUFTO1FBQ3hCVDtRQUNBRTtJQUNGO0FBQ0Y7QUFFQSxNQUFNUSxpQkFBaUIsU0FBVUMsT0FBTztJQUN0Q0MsV0FBVztRQUNULElBQUksSUFBSSxDQUFDQyxVQUFVLEVBQUU7WUFDbkJDLFFBQVFQLElBQUksQ0FBQ0k7UUFDYixpREFBaUQ7UUFDbkQsT0FBTyxJQUFJLE9BQU8sSUFBSSxDQUFDSSxTQUFTLENBQUNKLFFBQVFGLFNBQVMsQ0FBQyxLQUFLLGFBQWE7WUFDbkVDLGVBQWVNLElBQUksQ0FBQyxJQUFJLEVBQUVMO1FB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LFlBQVk5QixJQUFJLENBQUMsSUFBSSxFQUFFcUIsU0FBU0M7WUFFbERyQixtQkFBbUJELElBQUksQ0FBQyxJQUFJLEVBQUUsU0FBU1AsV0FBV1UsS0FBSzRELGFBQWFGO1FBQ3RFO0lBQ0Y7SUFFQWhELElBQUlWLEdBQUcsRUFBRTBELFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDckIsT0FBTyxJQUFJQyxRQUFRLENBQUN6QyxTQUFTQztZQUMzQixNQUFNN0IsWUFBWXFDLFlBQVk5QixJQUFJLENBQUMsSUFBSSxFQUFFcUIsU0FBU0M7WUFFbERyQixtQkFBbUJELElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBT1AsV0FBV1UsS0FBSzBEO1FBQ3ZEO0lBQ0Y7SUFFQS9DLE9BQU9YLEdBQUcsRUFBRTBELFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDeEIsT0FBTyxJQUFJQyxRQUFRLENBQUN6QyxTQUFTQztZQUMzQixNQUFNN0IsWUFBWXFDLFlBQVk5QixJQUFJLENBQUMsSUFBSSxFQUFFcUIsU0FBU0M7WUFFbERyQixtQkFBbUJELElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVVAsV0FBV1UsS0FBSzBEO1FBQzFEO0lBQ0Y7QUFDRjtBQUVBRyxPQUFPQyxPQUFPLEdBQUc7SUFDZjlCO0lBQ0FJO0lBQ0EyQixvQkFBb0JaO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvbGliL1JhdGVMaW1pdGVyQ2x1c3Rlci5qcz82ZmJjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW1wbGVtZW50cyByYXRlIGxpbWl0aW5nIGluIGNsdXN0ZXIgdXNpbmcgYnVpbHQtaW4gSVBDXG4gKlxuICogVHdvIGNsYXNzZXMgYXJlIGRlc2NyaWJlZCBoZXJlOiBtYXN0ZXIgYW5kIHdvcmtlclxuICogTWFzdGVyIGhhdmUgdG8gYmUgY3JlYXRlIGluIHRoZSBtYXN0ZXIgcHJvY2VzcyB3aXRob3V0IGFueSBvcHRpb25zLlxuICogQW55IG51bWJlciBvZiByYXRlIGxpbWl0ZXJzIGNhbiBiZSBjcmVhdGVkIGluIHdvcmtlcnMsIGJ1dCBlYWNoIHJhdGUgbGltaXRlciBtdXN0IGJlIHdpdGggdW5pcXVlIGtleVByZWZpeFxuICpcbiAqIFdvcmtmbG93OlxuICogMS4gbWFzdGVyIHJhdGUgbGltaXRlciBjcmVhdGVkIGluIG1hc3RlciBwcm9jZXNzXG4gKiAyLiB3b3JrZXIgcmF0ZSBsaW1pdGVyIHNlbmRzICdpbml0JyBtZXNzYWdlIHdpdGggbmVjZXNzYXJ5IG9wdGlvbnMgZHVyaW5nIGNyZWF0aW5nXG4gKiAzLiBtYXN0ZXIgcmVjZWl2ZXMgb3B0aW9ucyBhbmQgYWRkcyBuZXcgcmF0ZSBsaW1pdGVyIGJ5IGtleVByZWZpeCBpZiBpdCBpc24ndCBjcmVhdGVkIHlldFxuICogNC4gbWFzdGVyIHNlbmRzICdpbml0JyBiYWNrIHRvIHdvcmtlcidzIHJhdGUgbGltaXRlclxuICogNS4gd29ya2VyIGNhbiBwcm9jZXNzIHJlcXVlc3RzIGltbWVkaWF0ZWx5LFxuICogICAgYnV0IHRoZXkgd2lsbCBiZSBwb3N0cG9uZWQgYnkgJ3dvcmtlcldhaXRJbml0JyB1bnRpbCBtYXN0ZXIgc2VuZHMgJ2luaXQnIHRvIHdvcmtlclxuICogNi4gZXZlcnkgcmVxdWVzdCB0byB3b3JrZXIgcmF0ZSBsaW1pdGVyIGNyZWF0ZXMgYSBwcm9taXNlXG4gKiA3LiBpZiBtYXN0ZXIgZG9lc24ndCByZXNwb25zZSBmb3IgJ3RpbWVvdXQnLCBwcm9taXNlIGlzIHJlamVjdGVkXG4gKiA4LiBtYXN0ZXIgc2VuZHMgJ3Jlc29sdmUnIG9yICdyZWplY3QnIGNvbW1hbmQgdG8gd29ya2VyXG4gKiA5LiB3b3JrZXIgcmVzb2x2ZXMgb3IgcmVqZWN0cyBwcm9taXNlIGRlcGVuZGluZyBvbiBtZXNzYWdlIGZyb20gbWFzdGVyXG4gKlxuICovXG5cbmNvbnN0IGNsdXN0ZXIgPSByZXF1aXJlKCdjbHVzdGVyJyk7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IFJhdGVMaW1pdGVyQWJzdHJhY3QgPSByZXF1aXJlKCcuL1JhdGVMaW1pdGVyQWJzdHJhY3QnKTtcbmNvbnN0IFJhdGVMaW1pdGVyTWVtb3J5ID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlck1lbW9yeScpO1xuY29uc3QgUmF0ZUxpbWl0ZXJSZXMgPSByZXF1aXJlKCcuL1JhdGVMaW1pdGVyUmVzJyk7XG5cbmNvbnN0IGNoYW5uZWwgPSAncmF0ZV9saW1pdGVyX2ZsZXhpYmxlJztcbmxldCBtYXN0ZXJJbnN0YW5jZSA9IG51bGw7XG5cbmNvbnN0IG1hc3RlclNlbmRUb1dvcmtlciA9IGZ1bmN0aW9uICh3b3JrZXIsIG1zZywgdHlwZSwgcmVzKSB7XG4gIGxldCBkYXRhO1xuICBpZiAocmVzID09PSBudWxsIHx8IHJlcyA9PT0gdHJ1ZSB8fCByZXMgPT09IGZhbHNlKSB7XG4gICAgZGF0YSA9IHJlcztcbiAgfSBlbHNlIHtcbiAgICBkYXRhID0ge1xuICAgICAgcmVtYWluaW5nUG9pbnRzOiByZXMucmVtYWluaW5nUG9pbnRzLFxuICAgICAgbXNCZWZvcmVOZXh0OiByZXMubXNCZWZvcmVOZXh0LFxuICAgICAgY29uc3VtZWRQb2ludHM6IHJlcy5jb25zdW1lZFBvaW50cyxcbiAgICAgIGlzRmlyc3RJbkR1cmF0aW9uOiByZXMuaXNGaXJzdEluRHVyYXRpb24sXG4gICAgfTtcbiAgfVxuICB3b3JrZXIuc2VuZCh7XG4gICAgY2hhbm5lbCxcbiAgICBrZXlQcmVmaXg6IG1zZy5rZXlQcmVmaXgsIC8vIHdoaWNoIHJhdGUgbGltaXRlciBleGFjdGx5XG4gICAgcHJvbWlzZUlkOiBtc2cucHJvbWlzZUlkLFxuICAgIHR5cGUsXG4gICAgZGF0YSxcbiAgfSk7XG59O1xuXG5jb25zdCB3b3JrZXJXYWl0SW5pdCA9IGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pbml0aWF0ZWQpIHtcbiAgICAgIHByb2Nlc3Muc2VuZChwYXlsb2FkKTtcbiAgICAgIC8vIFByb21pc2Ugd2lsbCBiZSByZW1vdmVkIGJ5IHRpbWVvdXQgaWYgdG9vIGxvbmdcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLl9wcm9taXNlc1twYXlsb2FkLnByb21pc2VJZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3b3JrZXJXYWl0SW5pdC5jYWxsKHRoaXMsIHBheWxvYWQpO1xuICAgIH1cbiAgfSwgMzApO1xufTtcblxuY29uc3Qgd29ya2VyU2VuZFRvTWFzdGVyID0gZnVuY3Rpb24gKGZ1bmMsIHByb21pc2VJZCwga2V5LCBhcmcsIG9wdHMpIHtcbiAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICBjaGFubmVsLFxuICAgIGtleVByZWZpeDogdGhpcy5rZXlQcmVmaXgsXG4gICAgZnVuYyxcbiAgICBwcm9taXNlSWQsXG4gICAgZGF0YToge1xuICAgICAga2V5LFxuICAgICAgYXJnLFxuICAgICAgb3B0cyxcbiAgICB9LFxuICB9O1xuXG4gIGlmICghdGhpcy5faW5pdGlhdGVkKSB7XG4gICAgLy8gV2FpdCBpbml0IGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2VzIHRvIG1hc3RlclxuICAgIHdvcmtlcldhaXRJbml0LmNhbGwodGhpcywgcGF5bG9hZCk7XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5zZW5kKHBheWxvYWQpO1xuICB9XG59O1xuXG5jb25zdCBtYXN0ZXJQcm9jZXNzTXNnID0gZnVuY3Rpb24gKHdvcmtlciwgbXNnKSB7XG4gIGlmICghbXNnIHx8IG1zZy5jaGFubmVsICE9PSBjaGFubmVsIHx8IHR5cGVvZiB0aGlzLl9yYXRlTGltaXRlcnNbbXNnLmtleVByZWZpeF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IHByb21pc2U7XG5cbiAgc3dpdGNoIChtc2cuZnVuYykge1xuICAgIGNhc2UgJ2NvbnN1bWUnOlxuICAgICAgcHJvbWlzZSA9IHRoaXMuX3JhdGVMaW1pdGVyc1ttc2cua2V5UHJlZml4XS5jb25zdW1lKG1zZy5kYXRhLmtleSwgbXNnLmRhdGEuYXJnLCBtc2cuZGF0YS5vcHRzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3BlbmFsdHknOlxuICAgICAgcHJvbWlzZSA9IHRoaXMuX3JhdGVMaW1pdGVyc1ttc2cua2V5UHJlZml4XS5wZW5hbHR5KG1zZy5kYXRhLmtleSwgbXNnLmRhdGEuYXJnLCBtc2cuZGF0YS5vcHRzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3Jld2FyZCc6XG4gICAgICBwcm9taXNlID0gdGhpcy5fcmF0ZUxpbWl0ZXJzW21zZy5rZXlQcmVmaXhdLnJld2FyZChtc2cuZGF0YS5rZXksIG1zZy5kYXRhLmFyZywgbXNnLmRhdGEub3B0cyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdibG9jayc6XG4gICAgICBwcm9taXNlID0gdGhpcy5fcmF0ZUxpbWl0ZXJzW21zZy5rZXlQcmVmaXhdLmJsb2NrKG1zZy5kYXRhLmtleSwgbXNnLmRhdGEuYXJnLCBtc2cuZGF0YS5vcHRzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2dldCc6XG4gICAgICBwcm9taXNlID0gdGhpcy5fcmF0ZUxpbWl0ZXJzW21zZy5rZXlQcmVmaXhdLmdldChtc2cuZGF0YS5rZXksIG1zZy5kYXRhLm9wdHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgIHByb21pc2UgPSB0aGlzLl9yYXRlTGltaXRlcnNbbXNnLmtleVByZWZpeF0uZGVsZXRlKG1zZy5kYXRhLmtleSwgbXNnLmRhdGEub3B0cyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHByb21pc2UpIHtcbiAgICBwcm9taXNlXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIG1hc3RlclNlbmRUb1dvcmtlcih3b3JrZXIsIG1zZywgJ3Jlc29sdmUnLCByZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVqUmVzKSA9PiB7XG4gICAgICAgIG1hc3RlclNlbmRUb1dvcmtlcih3b3JrZXIsIG1zZywgJ3JlamVjdCcsIHJlalJlcyk7XG4gICAgICB9KTtcbiAgfVxufTtcblxuY29uc3Qgd29ya2VyUHJvY2Vzc01zZyA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgaWYgKCFtc2cgfHwgbXNnLmNoYW5uZWwgIT09IGNoYW5uZWwgfHwgbXNnLmtleVByZWZpeCAhPT0gdGhpcy5rZXlQcmVmaXgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodGhpcy5fcHJvbWlzZXNbbXNnLnByb21pc2VJZF0pIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fcHJvbWlzZXNbbXNnLnByb21pc2VJZF0udGltZW91dElkKTtcbiAgICBsZXQgcmVzO1xuICAgIGlmIChtc2cuZGF0YSA9PT0gbnVsbCB8fCBtc2cuZGF0YSA9PT0gdHJ1ZSB8fCBtc2cuZGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgIHJlcyA9IG1zZy5kYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMgPSBuZXcgUmF0ZUxpbWl0ZXJSZXMoXG4gICAgICAgIG1zZy5kYXRhLnJlbWFpbmluZ1BvaW50cyxcbiAgICAgICAgbXNnLmRhdGEubXNCZWZvcmVOZXh0LFxuICAgICAgICBtc2cuZGF0YS5jb25zdW1lZFBvaW50cyxcbiAgICAgICAgbXNnLmRhdGEuaXNGaXJzdEluRHVyYXRpb24gLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb21tYS1kYW5nbGVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChtc2cudHlwZSkge1xuICAgICAgY2FzZSAncmVzb2x2ZSc6XG4gICAgICAgIHRoaXMuX3Byb21pc2VzW21zZy5wcm9taXNlSWRdLnJlc29sdmUocmVzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyZWplY3QnOlxuICAgICAgICB0aGlzLl9wcm9taXNlc1ttc2cucHJvbWlzZUlkXS5yZWplY3QocmVzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJhdGVMaW1pdGVyQ2x1c3Rlcjogbm8gc3VjaCBtZXNzYWdlIHR5cGUgJyR7bXNnLnR5cGV9J2ApO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLl9wcm9taXNlc1ttc2cucHJvbWlzZUlkXTtcbiAgfVxufTtcbi8qKlxuICogUHJlcGFyZSBvcHRpb25zIHRvIHNlbmQgdG8gbWFzdGVyXG4gKiBNYXN0ZXIgd2lsbCBjcmVhdGUgcmF0ZSBsaW1pdGVyIGRlcGVuZGluZyBvbiBvcHRpb25zXG4gKlxuICogQHJldHVybnMge3twb2ludHM6ICosIGR1cmF0aW9uOiAqLCBibG9ja0R1cmF0aW9uOiAqLCBleGVjRXZlbmx5OiAqLCBleGVjRXZlbmx5TWluRGVsYXlNczogKiwga2V5UHJlZml4OiAqfX1cbiAqL1xuY29uc3QgZ2V0T3B0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBwb2ludHM6IHRoaXMucG9pbnRzLFxuICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxuICAgIGJsb2NrRHVyYXRpb246IHRoaXMuYmxvY2tEdXJhdGlvbixcbiAgICBleGVjRXZlbmx5OiB0aGlzLmV4ZWNFdmVubHksXG4gICAgZXhlY0V2ZW5seU1pbkRlbGF5TXM6IHRoaXMuZXhlY0V2ZW5seU1pbkRlbGF5TXMsXG4gICAga2V5UHJlZml4OiB0aGlzLmtleVByZWZpeCxcbiAgfTtcbn07XG5cbmNvbnN0IHNhdmVQcm9taXNlID0gZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICBjb25zdCBocnRpbWUgPSBwcm9jZXNzLmhydGltZSgpO1xuICBsZXQgcHJvbWlzZUlkID0gaHJ0aW1lWzBdLnRvU3RyaW5nKCkgKyBocnRpbWVbMV0udG9TdHJpbmcoKTtcblxuICBpZiAodHlwZW9mIHRoaXMuX3Byb21pc2VzW3Byb21pc2VJZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcHJvbWlzZUlkICs9IGNyeXB0by5yYW5kb21CeXRlcygxMikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgdGhpcy5fcHJvbWlzZXNbcHJvbWlzZUlkXSA9IHtcbiAgICByZXNvbHZlLFxuICAgIHJlamVjdCxcbiAgICB0aW1lb3V0SWQ6IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVsZXRlIHRoaXMuX3Byb21pc2VzW3Byb21pc2VJZF07XG4gICAgICByZWplY3QobmV3IEVycm9yKCdSYXRlTGltaXRlckNsdXN0ZXIgdGltZW91dDogbm8gYW5zd2VyIGZyb20gbWFzdGVyIGluIHRpbWUnKSk7XG4gICAgfSwgdGhpcy50aW1lb3V0TXMpLFxuICB9O1xuXG4gIHJldHVybiBwcm9taXNlSWQ7XG59O1xuXG5jbGFzcyBSYXRlTGltaXRlckNsdXN0ZXJNYXN0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAobWFzdGVySW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBtYXN0ZXJJbnN0YW5jZTtcbiAgICB9XG5cbiAgICB0aGlzLl9yYXRlTGltaXRlcnMgPSB7fTtcblxuICAgIGNsdXN0ZXIuc2V0TWF4TGlzdGVuZXJzKDApO1xuXG4gICAgY2x1c3Rlci5vbignbWVzc2FnZScsICh3b3JrZXIsIG1zZykgPT4ge1xuICAgICAgaWYgKG1zZyAmJiBtc2cuY2hhbm5lbCA9PT0gY2hhbm5lbCAmJiBtc2cudHlwZSA9PT0gJ2luaXQnKSB7XG4gICAgICAgIC8vIElmIGluaXQgcmVxdWVzdCwgY2hlY2sgb3IgY3JlYXRlIHJhdGUgbGltaXRlciBieSBrZXkgcHJlZml4IGFuZCBzZW5kICdpbml0JyBiYWNrIHRvIHdvcmtlclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX3JhdGVMaW1pdGVyc1ttc2cub3B0cy5rZXlQcmVmaXhdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuX3JhdGVMaW1pdGVyc1ttc2cub3B0cy5rZXlQcmVmaXhdID0gbmV3IFJhdGVMaW1pdGVyTWVtb3J5KG1zZy5vcHRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdvcmtlci5zZW5kKHtcbiAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgIHR5cGU6ICdpbml0JyxcbiAgICAgICAgICBrZXlQcmVmaXg6IG1zZy5vcHRzLmtleVByZWZpeCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXN0ZXJQcm9jZXNzTXNnLmNhbGwodGhpcywgd29ya2VyLCBtc2cpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWFzdGVySW5zdGFuY2UgPSB0aGlzO1xuICB9XG59XG5cbmNsYXNzIFJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlclBNMiB7XG4gIGNvbnN0cnVjdG9yKHBtMikge1xuICAgIGlmIChtYXN0ZXJJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIG1hc3Rlckluc3RhbmNlO1xuICAgIH1cblxuICAgIHRoaXMuX3JhdGVMaW1pdGVycyA9IHt9O1xuXG4gICAgcG0yLmxhdW5jaEJ1cygoZXJyLCBwbTJCdXMpID0+IHtcbiAgICAgIHBtMkJ1cy5vbigncHJvY2Vzczptc2cnLCAocGFja2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IG1zZyA9IHBhY2tldC5yYXc7XG4gICAgICAgIGlmIChtc2cgJiYgbXNnLmNoYW5uZWwgPT09IGNoYW5uZWwgJiYgbXNnLnR5cGUgPT09ICdpbml0Jykge1xuICAgICAgICAgIC8vIElmIGluaXQgcmVxdWVzdCwgY2hlY2sgb3IgY3JlYXRlIHJhdGUgbGltaXRlciBieSBrZXkgcHJlZml4IGFuZCBzZW5kICdpbml0JyBiYWNrIHRvIHdvcmtlclxuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fcmF0ZUxpbWl0ZXJzW21zZy5vcHRzLmtleVByZWZpeF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXRlTGltaXRlcnNbbXNnLm9wdHMua2V5UHJlZml4XSA9IG5ldyBSYXRlTGltaXRlck1lbW9yeShtc2cub3B0cyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcG0yLnNlbmREYXRhVG9Qcm9jZXNzSWQocGFja2V0LnByb2Nlc3MucG1faWQsIHtcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgdG9waWM6IGNoYW5uZWwsXG4gICAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgICAgdHlwZTogJ2luaXQnLFxuICAgICAgICAgICAga2V5UHJlZml4OiBtc2cub3B0cy5rZXlQcmVmaXgsXG4gICAgICAgICAgfSwgKHNlbmRFcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRFcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VuZEVyciwgcmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB3b3JrZXIgPSB7XG4gICAgICAgICAgICBzZW5kOiAobXNnRGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwbTJNZXNzYWdlID0gbXNnRGF0YTtcbiAgICAgICAgICAgICAgcG0yTWVzc2FnZS50b3BpYyA9IGNoYW5uZWw7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcG0yTWVzc2FnZS5kYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHBtMk1lc3NhZ2UuZGF0YSA9IHt9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBtMi5zZW5kRGF0YVRvUHJvY2Vzc0lkKHBhY2tldC5wcm9jZXNzLnBtX2lkLCBwbTJNZXNzYWdlLCAoc2VuZEVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRFcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbmRFcnIsIHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBtYXN0ZXJQcm9jZXNzTXNnLmNhbGwodGhpcywgd29ya2VyLCBtc2cpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1hc3Rlckluc3RhbmNlID0gdGhpcztcbiAgfVxufVxuXG5jbGFzcyBSYXRlTGltaXRlckNsdXN0ZXJXb3JrZXIgZXh0ZW5kcyBSYXRlTGltaXRlckFic3RyYWN0IHtcbiAgZ2V0IHRpbWVvdXRNcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdGltZW91dE1zO1xuICB9XG5cbiAgc2V0IHRpbWVvdXRNcyh2YWx1ZSkge1xuICAgIHRoaXMuX3RpbWVvdXRNcyA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyA1MDAwIDogTWF0aC5hYnMocGFyc2VJbnQodmFsdWUpKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgcHJvY2Vzcy5zZXRNYXhMaXN0ZW5lcnMoMCk7XG5cbiAgICB0aGlzLnRpbWVvdXRNcyA9IG9wdHMudGltZW91dE1zO1xuXG4gICAgdGhpcy5faW5pdGlhdGVkID0gZmFsc2U7XG5cbiAgICBwcm9jZXNzLm9uKCdtZXNzYWdlJywgKG1zZykgPT4ge1xuICAgICAgaWYgKG1zZyAmJiBtc2cuY2hhbm5lbCA9PT0gY2hhbm5lbCAmJiBtc2cudHlwZSA9PT0gJ2luaXQnICYmIG1zZy5rZXlQcmVmaXggPT09IHRoaXMua2V5UHJlZml4KSB7XG4gICAgICAgIHRoaXMuX2luaXRpYXRlZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3b3JrZXJQcm9jZXNzTXNnLmNhbGwodGhpcywgbXNnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBsaW1pdGVyIG9uIG1hc3RlciB3aXRoIHNwZWNpZmljIG9wdGlvbnNcbiAgICBwcm9jZXNzLnNlbmQoe1xuICAgICAgY2hhbm5lbCxcbiAgICAgIHR5cGU6ICdpbml0JyxcbiAgICAgIG9wdHM6IGdldE9wdHMuY2FsbCh0aGlzKSxcbiAgICB9KTtcblxuICAgIHRoaXMuX3Byb21pc2VzID0ge307XG4gIH1cblxuICBjb25zdW1lKGtleSwgcG9pbnRzVG9Db25zdW1lID0gMSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VJZCA9IHNhdmVQcm9taXNlLmNhbGwodGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcblxuICAgICAgd29ya2VyU2VuZFRvTWFzdGVyLmNhbGwodGhpcywgJ2NvbnN1bWUnLCBwcm9taXNlSWQsIGtleSwgcG9pbnRzVG9Db25zdW1lLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIHBlbmFsdHkoa2V5LCBwb2ludHMgPSAxLCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZUlkID0gc2F2ZVByb21pc2UuY2FsbCh0aGlzLCByZXNvbHZlLCByZWplY3QpO1xuXG4gICAgICB3b3JrZXJTZW5kVG9NYXN0ZXIuY2FsbCh0aGlzLCAncGVuYWx0eScsIHByb21pc2VJZCwga2V5LCBwb2ludHMsIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV3YXJkKGtleSwgcG9pbnRzID0gMSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VJZCA9IHNhdmVQcm9taXNlLmNhbGwodGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcblxuICAgICAgd29ya2VyU2VuZFRvTWFzdGVyLmNhbGwodGhpcywgJ3Jld2FyZCcsIHByb21pc2VJZCwga2V5LCBwb2ludHMsIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgYmxvY2soa2V5LCBzZWNEdXJhdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VJZCA9IHNhdmVQcm9taXNlLmNhbGwodGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcblxuICAgICAgd29ya2VyU2VuZFRvTWFzdGVyLmNhbGwodGhpcywgJ2Jsb2NrJywgcHJvbWlzZUlkLCBrZXksIHNlY0R1cmF0aW9uLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldChrZXksIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlSWQgPSBzYXZlUHJvbWlzZS5jYWxsKHRoaXMsIHJlc29sdmUsIHJlamVjdCk7XG5cbiAgICAgIHdvcmtlclNlbmRUb01hc3Rlci5jYWxsKHRoaXMsICdnZXQnLCBwcm9taXNlSWQsIGtleSwgb3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGUoa2V5LCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZUlkID0gc2F2ZVByb21pc2UuY2FsbCh0aGlzLCByZXNvbHZlLCByZWplY3QpO1xuXG4gICAgICB3b3JrZXJTZW5kVG9NYXN0ZXIuY2FsbCh0aGlzLCAnZGVsZXRlJywgcHJvbWlzZUlkLCBrZXksIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBSYXRlTGltaXRlckNsdXN0ZXJNYXN0ZXIsXG4gIFJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlclBNMixcbiAgUmF0ZUxpbWl0ZXJDbHVzdGVyOiBSYXRlTGltaXRlckNsdXN0ZXJXb3JrZXIsXG59O1xuIl0sIm5hbWVzIjpbImNsdXN0ZXIiLCJyZXF1aXJlIiwiY3J5cHRvIiwiUmF0ZUxpbWl0ZXJBYnN0cmFjdCIsIlJhdGVMaW1pdGVyTWVtb3J5IiwiUmF0ZUxpbWl0ZXJSZXMiLCJjaGFubmVsIiwibWFzdGVySW5zdGFuY2UiLCJtYXN0ZXJTZW5kVG9Xb3JrZXIiLCJ3b3JrZXIiLCJtc2ciLCJ0eXBlIiwicmVzIiwiZGF0YSIsInJlbWFpbmluZ1BvaW50cyIsIm1zQmVmb3JlTmV4dCIsImNvbnN1bWVkUG9pbnRzIiwiaXNGaXJzdEluRHVyYXRpb24iLCJzZW5kIiwia2V5UHJlZml4IiwicHJvbWlzZUlkIiwid29ya2VyV2FpdEluaXQiLCJwYXlsb2FkIiwic2V0VGltZW91dCIsIl9pbml0aWF0ZWQiLCJwcm9jZXNzIiwiX3Byb21pc2VzIiwiY2FsbCIsIndvcmtlclNlbmRUb01hc3RlciIsImZ1bmMiLCJrZXkiLCJhcmciLCJvcHRzIiwibWFzdGVyUHJvY2Vzc01zZyIsIl9yYXRlTGltaXRlcnMiLCJwcm9taXNlIiwiY29uc3VtZSIsInBlbmFsdHkiLCJyZXdhcmQiLCJibG9jayIsImdldCIsImRlbGV0ZSIsInRoZW4iLCJjYXRjaCIsInJlalJlcyIsIndvcmtlclByb2Nlc3NNc2ciLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJyZXNvbHZlIiwicmVqZWN0IiwiRXJyb3IiLCJnZXRPcHRzIiwicG9pbnRzIiwiZHVyYXRpb24iLCJibG9ja0R1cmF0aW9uIiwiZXhlY0V2ZW5seSIsImV4ZWNFdmVubHlNaW5EZWxheU1zIiwic2F2ZVByb21pc2UiLCJocnRpbWUiLCJ0b1N0cmluZyIsInJhbmRvbUJ5dGVzIiwidGltZW91dE1zIiwiUmF0ZUxpbWl0ZXJDbHVzdGVyTWFzdGVyIiwiY29uc3RydWN0b3IiLCJzZXRNYXhMaXN0ZW5lcnMiLCJvbiIsIlJhdGVMaW1pdGVyQ2x1c3Rlck1hc3RlclBNMiIsInBtMiIsImxhdW5jaEJ1cyIsImVyciIsInBtMkJ1cyIsInBhY2tldCIsInJhdyIsInNlbmREYXRhVG9Qcm9jZXNzSWQiLCJwbV9pZCIsInRvcGljIiwic2VuZEVyciIsImNvbnNvbGUiLCJsb2ciLCJtc2dEYXRhIiwicG0yTWVzc2FnZSIsIlJhdGVMaW1pdGVyQ2x1c3RlcldvcmtlciIsIl90aW1lb3V0TXMiLCJ2YWx1ZSIsIk1hdGgiLCJhYnMiLCJwYXJzZUludCIsInBvaW50c1RvQ29uc3VtZSIsIm9wdGlvbnMiLCJQcm9taXNlIiwic2VjRHVyYXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIiwiUmF0ZUxpbWl0ZXJDbHVzdGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterCluster.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterDynamo.js":
/*!*********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterDynamo.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nconst RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nclass DynamoItem {\n    /**\n   * Create a DynamoItem.\n   * @param {string} rlKey - The key for the rate limiter.\n   * @param {number} points - The number of points.\n   * @param {number} expire - The expiration time in seconds.\n   */ constructor(rlKey, points, expire){\n        this.key = rlKey;\n        this.points = points;\n        this.expire = expire;\n    }\n}\n// Free tier DynamoDB provisioned mode params\nconst DEFAULT_READ_CAPACITY_UNITS = 25;\nconst DEFAULT_WRITE_CAPACITY_UNITS = 25;\n/**\n * Implementation of RateLimiterStoreAbstract using DynamoDB.\n * @class RateLimiterDynamo\n * @extends RateLimiterStoreAbstract\n */ class RateLimiterDynamo extends RateLimiterStoreAbstract {\n    /**\n     * Constructs a new instance of the class.\n     * The storeClient MUST be an instance of AWS.DynamoDB NOT of AWS.DynamoDBClient.\n     *\n     * @param {Object} opts - The options for the constructor.\n     * @param {function} cb - The callback function (optional).\n     * @return {void}\n     */ constructor(opts, cb = null){\n        super(opts);\n        this.client = opts.storeClient;\n        this.tableName = opts.tableName;\n        this.tableCreated = opts.tableCreated;\n        this.ttlManuallySet = opts.ttlSet;\n        if (!this.tableCreated) {\n            this._createTable(opts.dynamoTableOpts).then((data)=>{\n                this.tableCreated = true;\n                this._setTTL().finally(()=>{\n                    // Callback invocation\n                    if (typeof cb === \"function\") {\n                        cb();\n                    }\n                });\n            }).catch((err)=>{\n                //callback invocation\n                if (typeof cb === \"function\") {\n                    cb(err);\n                } else {\n                    throw err;\n                }\n            });\n        } else {\n            this._setTTL().finally(()=>{\n                // Callback invocation\n                if (typeof cb === \"function\") {\n                    cb();\n                }\n            });\n        }\n    }\n    get tableName() {\n        return this._tableName;\n    }\n    set tableName(value) {\n        this._tableName = typeof value === \"undefined\" ? \"node-rate-limiter-flexible\" : value;\n    }\n    get tableCreated() {\n        return this._tableCreated;\n    }\n    set tableCreated(value) {\n        this._tableCreated = typeof value === \"undefined\" ? false : !!value;\n    }\n    /**\n     * Creates a table in the database. Return null if the table already exists.\n     * \n     * @param {{readCapacityUnits: number, writeCapacityUnits: number}} tableOpts\n     * @return {Promise} A promise that resolves with the result of creating the table.\n     */ async _createTable(tableOpts) {\n        const params = {\n            TableName: this.tableName,\n            AttributeDefinitions: [\n                {\n                    AttributeName: \"key\",\n                    AttributeType: \"S\"\n                }\n            ],\n            KeySchema: [\n                {\n                    AttributeName: \"key\",\n                    KeyType: \"HASH\"\n                }\n            ],\n            ProvisionedThroughput: {\n                ReadCapacityUnits: tableOpts && tableOpts.readCapacityUnits ? tableOpts.readCapacityUnits : DEFAULT_READ_CAPACITY_UNITS,\n                WriteCapacityUnits: tableOpts && tableOpts.writeCapacityUnits ? tableOpts.writeCapacityUnits : DEFAULT_WRITE_CAPACITY_UNITS\n            }\n        };\n        try {\n            const data = await this.client.createTable(params);\n            return data;\n        } catch (err) {\n            if (err.__type && err.__type.includes(\"ResourceInUseException\")) {\n                return null;\n            } else {\n                throw err;\n            }\n        }\n    }\n    /**\n     * Retrieves an item from the table based on the provided key.\n     *\n     * @param {string} rlKey - The key used to retrieve the item.\n     * @throws {Error} Throws an error if the table is not created yet.\n     * @return {DynamoItem|null} - The retrieved item, or null if it doesn't exist.\n     */ async _get(rlKey) {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        const params = {\n            TableName: this.tableName,\n            Key: {\n                key: {\n                    S: rlKey\n                }\n            }\n        };\n        const data = await this.client.getItem(params);\n        if (data.Item) {\n            return new DynamoItem(data.Item.key.S, Number(data.Item.points.N), Number(data.Item.expire.N));\n        } else {\n            return null;\n        }\n    }\n    /**\n     * Deletes an item from the table based on the given rlKey.\n     *\n     * @param {string} rlKey - The rlKey of the item to delete.\n     * @throws {Error} Throws an error if the table is not created yet.\n     * @return {boolean} Returns true if the item was successfully deleted, otherwise false.\n     */ async _delete(rlKey) {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        const params = {\n            TableName: this.tableName,\n            Key: {\n                key: {\n                    S: rlKey\n                }\n            },\n            ConditionExpression: \"attribute_exists(#k)\",\n            ExpressionAttributeNames: {\n                \"#k\": \"key\"\n            }\n        };\n        try {\n            const data = await this._client.deleteItem(params);\n            return data.$metadata.httpStatusCode === 200;\n        } catch (err) {\n            // ConditionalCheckFailed, item does not exist in table\n            if (err.__type && err.__type.includes(\"ConditionalCheckFailedException\")) {\n                return false;\n            } else {\n                throw err;\n            }\n        }\n    }\n    /**\n     * Implemented with DynamoDB Atomic Counters. 3 calls are made to DynamoDB but each call is atomic.\n     * From the documentation: \"UpdateItem calls are naturally serialized within DynamoDB,\n     * so there are no race condition concerns with making multiple simultaneous calls.\"\n     * See: https://aws.amazon.com/it/blogs/database/implement-resource-counters-with-amazon-dynamodb/\n     * @param {*} rlKey \n     * @param {*} points \n     * @param {*} msDuration \n     * @param {*} forceExpire \n     * @param {*} options \n     * @returns\n     */ async _upsert(rlKey, points, msDuration, forceExpire = false, options = {}) {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        const dateNow = Date.now();\n        const dateNowSec = dateNow / 1000;\n        /* -1 means never expire, DynamoDb do not support null values in number fields.\n         DynamoDb TTL use unix timestamp in seconds.\n      */ const newExpireSec = msDuration > 0 ? (dateNow + msDuration) / 1000 : -1;\n        // Force expire, overwrite points. Create a new entry if not exists\n        if (forceExpire) {\n            return await this._baseUpsert({\n                TableName: this.tableName,\n                Key: {\n                    key: {\n                        S: rlKey\n                    }\n                },\n                UpdateExpression: \"SET points = :points, expire = :expire\",\n                ExpressionAttributeValues: {\n                    \":points\": {\n                        N: points.toString()\n                    },\n                    \":expire\": {\n                        N: newExpireSec.toString()\n                    }\n                },\n                ReturnValues: \"ALL_NEW\"\n            });\n        }\n        try {\n            // First try update, success if entry NOT exists or IS expired\n            return await this._baseUpsert({\n                TableName: this.tableName,\n                Key: {\n                    key: {\n                        S: rlKey\n                    }\n                },\n                UpdateExpression: \"SET points = :new_points, expire = :new_expire\",\n                ExpressionAttributeValues: {\n                    \":new_points\": {\n                        N: points.toString()\n                    },\n                    \":new_expire\": {\n                        N: newExpireSec.toString()\n                    },\n                    \":where_expire\": {\n                        N: dateNowSec.toString()\n                    }\n                },\n                ConditionExpression: \"expire <= :where_expire OR attribute_not_exists(points)\",\n                ReturnValues: \"ALL_NEW\"\n            });\n        } catch (err) {\n            // Second try update, success if entry exists and IS NOT expired\n            return await this._baseUpsert({\n                TableName: this.tableName,\n                Key: {\n                    key: {\n                        S: rlKey\n                    }\n                },\n                UpdateExpression: \"SET points = points + :new_points\",\n                ExpressionAttributeValues: {\n                    \":new_points\": {\n                        N: points.toString()\n                    },\n                    \":where_expire\": {\n                        N: dateNowSec.toString()\n                    }\n                },\n                ConditionExpression: \"expire > :where_expire\",\n                ReturnValues: \"ALL_NEW\"\n            });\n        }\n    }\n    /**\n     * Asynchronously upserts data into the table. params is a DynamoDB params object.\n     *\n     * @param {Object} params - The parameters for the upsert operation.\n     * @throws {Error} Throws an error if the table is not created yet.\n     * @return {DynamoItem} Returns a DynamoItem object with the updated data.\n     */ async _baseUpsert(params) {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        try {\n            const data = await this.client.updateItem(params);\n            return new DynamoItem(data.Attributes.key.S, Number(data.Attributes.points.N), Number(data.Attributes.expire.N));\n        } catch (err) {\n            //console.log('_baseUpsert', params, err);\n            throw err;\n        }\n    }\n    /**\n     * Sets the Time-to-Live (TTL) for the table. TTL use the expire field in the table.\n     * See: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/howitworks-ttl.html\n     *\n     * @return {Promise} A promise that resolves when the TTL is successfully set.\n     * @throws {Error} Throws an error if the table is not created yet.\n     * @returns {Promise}\n     */ async _setTTL() {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        try {\n            // Check if the TTL is already set\n            const isTTLSet = await this._isTTLSet();\n            if (isTTLSet) {\n                return;\n            }\n            const params = {\n                TableName: this.tableName,\n                TimeToLiveSpecification: {\n                    AttributeName: \"expire\",\n                    Enabled: true\n                }\n            };\n            const res = await this.client.updateTimeToLive(params);\n            return res;\n        } catch (err) {\n            throw err;\n        }\n    }\n    /**\n     * Checks if the Time To Live (TTL) feature is set for the DynamoDB table.\n     *\n     * @return {boolean} Returns true if the TTL feature is enabled for the table, otherwise false.\n     * @throws {Error} Throws an error if the table is not created yet or if there is an error while checking the TTL status.\n     */ async _isTTLSet() {\n        if (!this.tableCreated) {\n            throw new Error(\"Table is not created yet\");\n        }\n        if (this.ttlManuallySet) {\n            return true;\n        }\n        try {\n            const res = await this.client.describeTimeToLive({\n                TableName: this.tableName\n            });\n            return res.$metadata.httpStatusCode == 200 && res.TimeToLiveDescription.TimeToLiveStatus === \"ENABLED\" && res.TimeToLiveDescription.AttributeName === \"expire\";\n        } catch (err) {\n            throw err;\n        }\n    }\n    /**\n     * Generate a RateLimiterRes object based on the provided parameters.\n     *\n     * @param {string} rlKey - The key for the rate limiter.\n     * @param {number} changedPoints - The number of points that have changed.\n     * @param {DynamoItem} result - The result object of _get() method.\n     * @returns {RateLimiterRes} - The generated RateLimiterRes object.\n     */ _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        res.isFirstInDuration = changedPoints === result.points;\n        res.consumedPoints = res.isFirstInDuration ? changedPoints : result.points;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        // Expire time saved in unix time seconds not ms\n        res.msBeforeNext = result.expire != -1 ? Math.max(result.expire * 1000 - Date.now(), 0) : -1;\n        return res;\n    }\n}\nmodule.exports = RateLimiterDynamo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlckR5bmFtby5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxpQkFBaUJDLG1CQUFPQSxDQUFDLDBGQUFrQjtBQUNqRCxNQUFNQywyQkFBMkJELG1CQUFPQSxDQUFDLDhHQUE0QjtBQUVyRSxNQUFNRTtJQUNKOzs7OztHQUtDLEdBQ0RDLFlBQVlDLEtBQUssRUFBRUMsTUFBTSxFQUFFQyxNQUFNLENBQUU7UUFDakMsSUFBSSxDQUFDQyxHQUFHLEdBQUdIO1FBQ1gsSUFBSSxDQUFDQyxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDQyxNQUFNLEdBQUdBO0lBQ2hCO0FBQ0Y7QUFFQSw2Q0FBNkM7QUFDN0MsTUFBTUUsOEJBQThCO0FBQ3BDLE1BQU1DLCtCQUErQjtBQUVyQzs7OztDQUlDLEdBQ0QsTUFBTUMsMEJBQTBCVDtJQUU1Qjs7Ozs7OztLQU9DLEdBQ0RFLFlBQVlRLElBQUksRUFBRUMsS0FBSyxJQUFJLENBQUU7UUFDekIsS0FBSyxDQUFDRDtRQUVOLElBQUksQ0FBQ0UsTUFBTSxHQUFHRixLQUFLRyxXQUFXO1FBQzlCLElBQUksQ0FBQ0MsU0FBUyxHQUFHSixLQUFLSSxTQUFTO1FBQy9CLElBQUksQ0FBQ0MsWUFBWSxHQUFHTCxLQUFLSyxZQUFZO1FBQ3JDLElBQUksQ0FBQ0MsY0FBYyxHQUFHTixLQUFLTyxNQUFNO1FBRWpDLElBQUksQ0FBQyxJQUFJLENBQUNGLFlBQVksRUFBRTtZQUN0QixJQUFJLENBQUNHLFlBQVksQ0FBQ1IsS0FBS1MsZUFBZSxFQUNyQ0MsSUFBSSxDQUFDLENBQUNDO2dCQUNMLElBQUksQ0FBQ04sWUFBWSxHQUFHO2dCQUVwQixJQUFJLENBQUNPLE9BQU8sR0FDWEMsT0FBTyxDQUFDO29CQUNQLHNCQUFzQjtvQkFDdEIsSUFBSSxPQUFPWixPQUFPLFlBQVk7d0JBQzVCQTtvQkFDRjtnQkFDRjtZQUVGLEdBQ0NhLEtBQUssQ0FBRUMs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T1IsS0FBSztZQUNaLE1BQU1BO1FBQ1I7SUFDRjtJQUVBOzs7Ozs7O0tBT0MsR0FDRDRELG1CQUFtQmxGLEtBQUssRUFBRW1GLGFBQWEsRUFBRUMsTUFBTSxFQUFFO1FBRS9DLE1BQU1QLE1BQU0sSUFBSWxGO1FBQ2hCa0YsSUFBSVEsaUJBQWlCLEdBQUdGLGtCQUFrQkMsT0FBT25GLE1BQU07UUFDdkQ0RSxJQUFJUyxjQUFjLEdBQUdULElBQUlRLGlCQUFpQixHQUFHRixnQkFBZ0JDLE9BQU9uRixNQUFNO1FBQzFFNEUsSUFBSVUsZUFBZSxHQUFHQyxLQUFLQyxHQUFHLENBQUMsSUFBSSxDQUFDeEYsTUFBTSxHQUFHNEUsSUFBSVMsY0FBYyxFQUFFO1FBQ2pFLGdEQUFnRDtRQUNoRFQsSUFBSWEsWUFBWSxHQUFHTixPQUFPbEYsTUFBTSxJQUFJLENBQUMsSUFBSXNGLEtBQUtDLEdBQUcsQ0FBQ0wsT0FBT2xGLE1BQU0sR0FBRyxPQUFPNEQsS0FBS0MsR0FBRyxJQUFJLEtBQUssQ0FBQztRQUUzRixPQUFPYztJQUNUO0FBRUo7QUFFQWMsT0FBT0MsT0FBTyxHQUFHdEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJEeW5hbW8uanM/OTE4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSYXRlTGltaXRlclJlcyA9IHJlcXVpcmUoXCIuL1JhdGVMaW1pdGVyUmVzXCIpO1xuY29uc3QgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0ID0gcmVxdWlyZShcIi4vUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0XCIpO1xuXG5jbGFzcyBEeW5hbW9JdGVtIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIER5bmFtb0l0ZW0uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBybEtleSAtIFRoZSBrZXkgZm9yIHRoZSByYXRlIGxpbWl0ZXIuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludHMgLSBUaGUgbnVtYmVyIG9mIHBvaW50cy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGV4cGlyZSAtIFRoZSBleHBpcmF0aW9uIHRpbWUgaW4gc2Vjb25kcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJsS2V5LCBwb2ludHMsIGV4cGlyZSkge1xuICAgIHRoaXMua2V5ID0gcmxLZXk7XG4gICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG4gICAgdGhpcy5leHBpcmUgPSBleHBpcmU7XG4gIH1cbn1cblxuLy8gRnJlZSB0aWVyIER5bmFtb0RCIHByb3Zpc2lvbmVkIG1vZGUgcGFyYW1zXG5jb25zdCBERUZBVUxUX1JFQURfQ0FQQUNJVFlfVU5JVFMgPSAyNTtcbmNvbnN0IERFRkFVTFRfV1JJVEVfQ0FQQUNJVFlfVU5JVFMgPSAyNTtcblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBSYXRlTGltaXRlclN0b3JlQWJzdHJhY3QgdXNpbmcgRHluYW1vREIuXG4gKiBAY2xhc3MgUmF0ZUxpbWl0ZXJEeW5hbW9cbiAqIEBleHRlbmRzIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdFxuICovXG5jbGFzcyBSYXRlTGltaXRlckR5bmFtbyBleHRlbmRzIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCB7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBjbGFzcy5cbiAgICAgKiBUaGUgc3RvcmVDbGllbnQgTVVTVCBiZSBhbiBpbnN0YW5jZSBvZiBBV1MuRHluYW1vREIgTk9UIG9mIEFXUy5EeW5hbW9EQkNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiAob3B0aW9uYWwpLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0cywgY2IgPSBudWxsKSB7XG4gICAgICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgICAgIHRoaXMuY2xpZW50ID0gb3B0cy5zdG9yZUNsaWVudDtcbiAgICAgICAgdGhpcy50YWJsZU5hbWUgPSBvcHRzLnRhYmxlTmFtZTtcbiAgICAgICAgdGhpcy50YWJsZUNyZWF0ZWQgPSBvcHRzLnRhYmxlQ3JlYXRlZDtcbiAgICAgICAgdGhpcy50dGxNYW51YWxseVNldCA9IG9wdHMudHRsU2V0O1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgICAgIHRoaXMuX2NyZWF0ZVRhYmxlKG9wdHMuZHluYW1vVGFibGVPcHRzKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhYmxlQ3JlYXRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldFRUTCgpXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIENhbGxiYWNrIGludm9jYXRpb25cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goIGVyciA9PiB7XG4gICAgICAgICAgICAvL2NhbGxiYWNrIGludm9jYXRpb25cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgY2IoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgdGhpcy5fc2V0VFRMKClcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAvLyBDYWxsYmFjayBpbnZvY2F0aW9uXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgdGFibGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFibGVOYW1lO1xuICAgIH1cblxuICAgIHNldCB0YWJsZU5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdGFibGVOYW1lID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICdub2RlLXJhdGUtbGltaXRlci1mbGV4aWJsZScgOiB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgdGFibGVDcmVhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFibGVDcmVhdGVkXG4gICAgfVxuICAgIFxuICAgIHNldCB0YWJsZUNyZWF0ZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdGFibGVDcmVhdGVkID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogISF2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFibGUgaW4gdGhlIGRhdGFiYXNlLiBSZXR1cm4gbnVsbCBpZiB0aGUgdGFibGUgYWxyZWFkeSBleGlzdHMuXG4gICAgICogXG4gICAgICogQHBhcmFtIHt7cmVhZENhcGFjaXR5VW5pdHM6IG51bWJlciwgd3JpdGVDYXBhY2l0eVVuaXRzOiBudW1iZXJ9fSB0YWJsZU9wdHNcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgY3JlYXRpbmcgdGhlIHRhYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIF9jcmVhdGVUYWJsZSh0YWJsZU9wdHMpIHtcblxuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBUYWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZU5hbWU6ICdrZXknLFxuICAgICAgICAgICAgQXR0cmlidXRlVHlwZTogJ1MnXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBBdHRyaWJ1dGVOYW1lOiAna2V5JyxcbiAgICAgICAgICAgIEtleVR5cGU6ICdIQVNIJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7XG4gICAgICAgICAgUmVhZENhcGFjaXR5VW5pdHM6IHRhYmxlT3B0cyAmJiB0YWJsZU9wdHMucmVhZENhcGFjaXR5VW5pdHMgPyB0YWJsZU9wdHMucmVhZENhcGFjaXR5VW5pdHMgOiBERUZBVUxUX1JFQURfQ0FQQUNJVFlfVU5JVFMsXG4gICAgICAgICAgV3JpdGVDYXBhY2l0eVVuaXRzOiB0YWJsZU9wdHMgJiYgdGFibGVPcHRzLndyaXRlQ2FwYWNpdHlVbml0cyA/IHRhYmxlT3B0cy53cml0ZUNhcGFjaXR5VW5pdHMgOiBERUZBVUxUX1dSSVRFX0NBUEFDSVRZX1VOSVRTXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmNsaWVudC5jcmVhdGVUYWJsZShwYXJhbXMpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgIGlmIChlcnIuX190eXBlICYmIGVyci5fX3R5cGUuaW5jbHVkZXMoJ1Jlc291cmNlSW5Vc2VFeGNlcHRpb24nKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbiBpdGVtIGZyb20gdGhlIHRhYmxlIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmxLZXkgLSBUaGUga2V5IHVzZWQgdG8gcmV0cmlldmUgdGhlIGl0ZW0uXG4gICAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgdGFibGUgaXMgbm90IGNyZWF0ZWQgeWV0LlxuICAgICAqIEByZXR1cm4ge0R5bmFtb0l0ZW18bnVsbH0gLSBUaGUgcmV0cmlldmVkIGl0ZW0sIG9yIG51bGwgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBhc3luYyBfZ2V0KHJsS2V5KSB7XG5cbiAgICAgIGlmICghdGhpcy50YWJsZUNyZWF0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBUYWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICBLZXk6IHtcbiAgICAgICAgICBrZXk6IHtTOiBybEtleX1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuY2xpZW50LmdldEl0ZW0ocGFyYW1zKTtcbiAgICAgIGlmKGRhdGEuSXRlbSkge1xuICAgICAgICByZXR1cm4gbmV3IER5bmFtb0l0ZW0oXG4gICAgICAgICAgZGF0YS5JdGVtLmtleS5TLFxuICAgICAgICAgIE51bWJlcihkYXRhLkl0ZW0ucG9pbnRzLk4pLFxuICAgICAgICAgIE51bWJlcihkYXRhLkl0ZW0uZXhwaXJlLk4pXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGFuIGl0ZW0gZnJvbSB0aGUgdGFibGUgYmFzZWQgb24gdGhlIGdpdmVuIHJsS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJsS2V5IC0gVGhlIHJsS2V5IG9mIHRoZSBpdGVtIHRvIGRlbGV0ZS5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3dzIGFuIGVycm9yIGlmIHRoZSB0YWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBpdGVtIHdhcyBzdWNjZXNzZnVsbHkgZGVsZXRlZCwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgICAqL1xuICAgIGFzeW5jIF9kZWxldGUocmxLZXkpIHtcblxuICAgICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgIFRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgIEtleToge1xuICAgICAgICAgIGtleToge1M6IHJsS2V5fVxuICAgICAgICB9LFxuICAgICAgICBDb25kaXRpb25FeHByZXNzaW9uOiAnYXR0cmlidXRlX2V4aXN0cygjayknLFxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlTmFtZXM6IHtcbiAgICAgICAgICAnI2snOiAna2V5JyAgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2NsaWVudC5kZWxldGVJdGVtKHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBkYXRhLiRtZXRhZGF0YS5odHRwU3RhdHVzQ29kZSA9PT0gMjAwO1xuICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgLy8gQ29uZGl0aW9uYWxDaGVja0ZhaWxlZCwgaXRlbSBkb2VzIG5vdCBleGlzdCBpbiB0YWJsZVxuICAgICAgICBpZiAoZXJyLl9fdHlwZSAmJiBlcnIuX190eXBlLmluY2x1ZGVzKCdDb25kaXRpb25hbENoZWNrRmFpbGVkRXhjZXB0aW9uJykpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRlZCB3aXRoIER5bmFtb0RCIEF0b21pYyBDb3VudGVycy4gMyBjYWxscyBhcmUgbWFkZSB0byBEeW5hbW9EQiBidXQgZWFjaCBjYWxsIGlzIGF0b21pYy5cbiAgICAgKiBGcm9tIHRoZSBkb2N1bWVudGF0aW9uOiBcIlVwZGF0ZUl0ZW0gY2FsbHMgYXJlIG5hdHVyYWxseSBzZXJpYWxpemVkIHdpdGhpbiBEeW5hbW9EQixcbiAgICAgKiBzbyB0aGVyZSBhcmUgbm8gcmFjZSBjb25kaXRpb24gY29uY2VybnMgd2l0aCBtYWtpbmcgbXVsdGlwbGUgc2ltdWx0YW5lb3VzIGNhbGxzLlwiXG4gICAgICogU2VlOiBodHRwczovL2F3cy5hbWF6b24uY29tL2l0L2Jsb2dzL2RhdGFiYXNlL2ltcGxlbWVudC1yZXNvdXJjZS1jb3VudGVycy13aXRoLWFtYXpvbi1keW5hbW9kYi9cbiAgICAgKiBAcGFyYW0geyp9IHJsS2V5IFxuICAgICAqIEBwYXJhbSB7Kn0gcG9pbnRzIFxuICAgICAqIEBwYXJhbSB7Kn0gbXNEdXJhdGlvbiBcbiAgICAgKiBAcGFyYW0geyp9IGZvcmNlRXhwaXJlIFxuICAgICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIF91cHNlcnQocmxLZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSB7XG5cbiAgICAgIGlmICghdGhpcy50YWJsZUNyZWF0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0ZU5vdyA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBkYXRlTm93U2VjID0gZGF0ZU5vdyAvIDEwMDA7XG4gICAgICAvKiAtMSBtZWFucyBuZXZlciBleHBpcmUsIER5bmFtb0RiIGRvIG5vdCBzdXBwb3J0IG51bGwgdmFsdWVzIGluIG51bWJlciBmaWVsZHMuXG4gICAgICAgICBEeW5hbW9EYiBUVEwgdXNlIHVuaXggdGltZXN0YW1wIGluIHNlY29uZHMuXG4gICAgICAqL1xuICAgICAgY29uc3QgbmV3RXhwaXJlU2VjID0gbXNEdXJhdGlvbiA+IDAgPyAoZGF0ZU5vdyArIG1zRHVyYXRpb24pIC8gMTAwMCA6IC0xO1xuXG4gICAgICAvLyBGb3JjZSBleHBpcmUsIG92ZXJ3cml0ZSBwb2ludHMuIENyZWF0ZSBhIG5ldyBlbnRyeSBpZiBub3QgZXhpc3RzXG4gICAgICBpZiAoZm9yY2VFeHBpcmUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2Jhc2VVcHNlcnQoe1xuICAgICAgICAgIFRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgICAgS2V5OiB7IGtleToge1M6IHJsS2V5fSB9LFxuICAgICAgICAgIFVwZGF0ZUV4cHJlc3Npb246ICdTRVQgcG9pbnRzID0gOnBvaW50cywgZXhwaXJlID0gOmV4cGlyZScsXG4gICAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAgICAgJzpwb2ludHMnOiB7TjogcG9pbnRzLnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgJzpleHBpcmUnOiB7TjogbmV3RXhwaXJlU2VjLnRvU3RyaW5nKCl9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBSZXR1cm5WYWx1ZXM6ICdBTExfTkVXJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHsgICAgICAgIFxuICAgICAgICAvLyBGaXJzdCB0cnkgdXBkYXRlLCBzdWNjZXNzIGlmIGVudHJ5IE5PVCBleGlzdHMgb3IgSVMgZXhwaXJlZFxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fYmFzZVVwc2VydCh7XG4gICAgICAgICAgVGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICBLZXk6IHsga2V5OiB7UzogcmxLZXl9IH0sXG4gICAgICAgICAgVXBkYXRlRXhwcmVzc2lvbjogJ1NFVCBwb2ludHMgPSA6bmV3X3BvaW50cywgZXhwaXJlID0gOm5ld19leHBpcmUnLFxuICAgICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcbiAgICAgICAgICAgICc6bmV3X3BvaW50cyc6IHtOOiBwb2ludHMudG9TdHJpbmcoKX0sXG4gICAgICAgICAgICAnOm5ld19leHBpcmUnOiB7TjogbmV3RXhwaXJlU2VjLnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgJzp3aGVyZV9leHBpcmUnOiB7TjogZGF0ZU5vd1NlYy50b1N0cmluZygpfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgQ29uZGl0aW9uRXhwcmVzc2lvbjogJ2V4cGlyZSA8PSA6d2hlcmVfZXhwaXJlIE9SIGF0dHJpYnV0ZV9ub3RfZXhpc3RzKHBvaW50cyknLFxuICAgICAgICAgIFJldHVyblZhbHVlczogJ0FMTF9ORVcnXG4gICAgICAgIH0pO1xuXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gU2Vjb25kIHRyeSB1cGRhdGUsIHN1Y2Nlc3MgaWYgZW50cnkgZXhpc3RzIGFuZCBJUyBOT1QgZXhwaXJlZFxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fYmFzZVVwc2VydCh7XG4gICAgICAgICAgVGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICBLZXk6IHsga2V5OiB7UzogcmxLZXl9IH0sXG4gICAgICAgICAgVXBkYXRlRXhwcmVzc2lvbjogJ1NFVCBwb2ludHMgPSBwb2ludHMgKyA6bmV3X3BvaW50cycsXG4gICAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAgICAgJzpuZXdfcG9pbnRzJzoge046IHBvaW50cy50b1N0cmluZygpfSxcbiAgICAgICAgICAgICc6d2hlcmVfZXhwaXJlJzoge046IGRhdGVOb3dTZWMudG9TdHJpbmcoKX1cbiAgICAgICAgICB9LFxuICAgICAgICAgIENvbmRpdGlvbkV4cHJlc3Npb246ICdleHBpcmUgPiA6d2hlcmVfZXhwaXJlJyxcbiAgICAgICAgICBSZXR1cm5WYWx1ZXM6ICdBTExfTkVXJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzbHkgdXBzZXJ0cyBkYXRhIGludG8gdGhlIHRhYmxlLiBwYXJhbXMgaXMgYSBEeW5hbW9EQiBwYXJhbXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgdXBzZXJ0IG9wZXJhdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3dzIGFuIGVycm9yIGlmIHRoZSB0YWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQuXG4gICAgICogQHJldHVybiB7RHluYW1vSXRlbX0gUmV0dXJucyBhIER5bmFtb0l0ZW0gb2JqZWN0IHdpdGggdGhlIHVwZGF0ZWQgZGF0YS5cbiAgICAgKi9cbiAgICBhc3luYyBfYmFzZVVwc2VydChwYXJhbXMpIHtcblxuICAgICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5jbGllbnQudXBkYXRlSXRlbShwYXJhbXMpO1xuICAgICAgICByZXR1cm4gbmV3IER5bmFtb0l0ZW0oXG4gICAgICAgICAgZGF0YS5BdHRyaWJ1dGVzLmtleS5TLFxuICAgICAgICAgIE51bWJlcihkYXRhLkF0dHJpYnV0ZXMucG9pbnRzLk4pLFxuICAgICAgICAgIE51bWJlcihkYXRhLkF0dHJpYnV0ZXMuZXhwaXJlLk4pXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnX2Jhc2VVcHNlcnQnLCBwYXJhbXMsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBUaW1lLXRvLUxpdmUgKFRUTCkgZm9yIHRoZSB0YWJsZS4gVFRMIHVzZSB0aGUgZXhwaXJlIGZpZWxkIGluIHRoZSB0YWJsZS5cbiAgICAgKiBTZWU6IGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hbWF6b25keW5hbW9kYi9sYXRlc3QvZGV2ZWxvcGVyZ3VpZGUvaG93aXR3b3Jrcy10dGwuaHRtbFxuICAgICAqXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgVFRMIGlzIHN1Y2Nlc3NmdWxseSBzZXQuXG4gICAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgdGFibGUgaXMgbm90IGNyZWF0ZWQgeWV0LlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqL1xuICAgIGFzeW5jIF9zZXRUVEwoKSB7XG5cbiAgICAgIGlmICghdGhpcy50YWJsZUNyZWF0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQnKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBUVEwgaXMgYWxyZWFkeSBzZXRcbiAgICAgICAgY29uc3QgaXNUVExTZXQgPSBhd2FpdCB0aGlzLl9pc1RUTFNldCgpO1xuICAgICAgICBpZiAoaXNUVExTZXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgVGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICBUaW1lVG9MaXZlU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICAgICAgQXR0cmlidXRlTmFtZTogJ2V4cGlyZScsXG4gICAgICAgICAgICBFbmFibGVkOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQudXBkYXRlVGltZVRvTGl2ZShwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBUaW1lIFRvIExpdmUgKFRUTCkgZmVhdHVyZSBpcyBzZXQgZm9yIHRoZSBEeW5hbW9EQiB0YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgVFRMIGZlYXR1cmUgaXMgZW5hYmxlZCBmb3IgdGhlIHRhYmxlLCBvdGhlcndpc2UgZmFsc2UuXG4gICAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgdGFibGUgaXMgbm90IGNyZWF0ZWQgeWV0IG9yIGlmIHRoZXJlIGlzIGFuIGVycm9yIHdoaWxlIGNoZWNraW5nIHRoZSBUVEwgc3RhdHVzLlxuICAgICAqL1xuICAgIGFzeW5jIF9pc1RUTFNldCgpIHtcbiAgICAgIFxuICAgICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50dGxNYW51YWxseVNldCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5kZXNjcmliZVRpbWVUb0xpdmUoe1RhYmxlTmFtZTogdGhpcy50YWJsZU5hbWV9KTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICByZXMuJG1ldGFkYXRhLmh0dHBTdGF0dXNDb2RlID09IDIwMCBcbiAgICAgICAgICAmJiByZXMuVGltZVRvTGl2ZURlc2NyaXB0aW9uLlRpbWVUb0xpdmVTdGF0dXMgPT09ICdFTkFCTEVEJ1xuICAgICAgICAgICYmIHJlcy5UaW1lVG9MaXZlRGVzY3JpcHRpb24uQXR0cmlidXRlTmFtZSA9PT0gJ2V4cGlyZSdcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgUmF0ZUxpbWl0ZXJSZXMgb2JqZWN0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJsS2V5IC0gVGhlIGtleSBmb3IgdGhlIHJhdGUgbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbmdlZFBvaW50cyAtIFRoZSBudW1iZXIgb2YgcG9pbnRzIHRoYXQgaGF2ZSBjaGFuZ2VkLlxuICAgICAqIEBwYXJhbSB7RHluYW1vSXRlbX0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvYmplY3Qgb2YgX2dldCgpIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJucyB7UmF0ZUxpbWl0ZXJSZXN9IC0gVGhlIGdlbmVyYXRlZCBSYXRlTGltaXRlclJlcyBvYmplY3QuXG4gICAgICovXG4gICAgX2dldFJhdGVMaW1pdGVyUmVzKHJsS2V5LCBjaGFuZ2VkUG9pbnRzLCByZXN1bHQpIHtcblxuICAgICAgY29uc3QgcmVzID0gbmV3IFJhdGVMaW1pdGVyUmVzKCk7XG4gICAgICByZXMuaXNGaXJzdEluRHVyYXRpb24gPSBjaGFuZ2VkUG9pbnRzID09PSByZXN1bHQucG9pbnRzO1xuICAgICAgcmVzLmNvbnN1bWVkUG9pbnRzID0gcmVzLmlzRmlyc3RJbkR1cmF0aW9uID8gY2hhbmdlZFBvaW50cyA6IHJlc3VsdC5wb2ludHM7XG4gICAgICByZXMucmVtYWluaW5nUG9pbnRzID0gTWF0aC5tYXgodGhpcy5wb2ludHMgLSByZXMuY29uc3VtZWRQb2ludHMsIDApO1xuICAgICAgLy8gRXhwaXJlIHRpbWUgc2F2ZWQgaW4gdW5peCB0aW1lIHNlY29uZHMgbm90IG1zXG4gICAgICByZXMubXNCZWZvcmVOZXh0ID0gcmVzdWx0LmV4cGlyZSAhPSAtMSA/IE1hdGgubWF4KHJlc3VsdC5leHBpcmUgKiAxMDAwIC0gRGF0ZS5ub3coKSwgMCkgOiAtMTtcblxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSYXRlTGltaXRlckR5bmFtbzsiXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJSZXMiLCJyZXF1aXJlIiwiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwiRHluYW1vSXRlbSIsImNvbnN0cnVjdG9yIiwicmxLZXkiLCJwb2ludHMiLCJleHBpcmUiLCJrZXkiLCJERUZBVUxUX1JFQURfQ0FQQUNJVFlfVU5JVFMiLCJERUZBVUxUX1dSSVRFX0NBUEFDSVRZX1VOSVRTIiwiUmF0ZUxpbWl0ZXJEeW5hbW8iLCJvcHRzIiwiY2IiLCJjbGllbnQiLCJzdG9yZUNsaWVudCIsInRhYmxlTmFtZSIsInRhYmxlQ3JlYXRlZCIsInR0bE1hbnVhbGx5U2V0IiwidHRsU2V0IiwiX2NyZWF0ZVRhYmxlIiwiZHluYW1vVGFibGVPcHRzIiwidGhlbiIsImRhdGEiLCJfc2V0VFRMIiwiZmluYWxseSIsImNhdGNoIiwiZXJyIiwiX3RhYmxlTmFtZSIsInZhbHVlIiwiX3RhYmxlQ3JlYXRlZCIsInRhYmxlT3B0cyIsInBhcmFtcyIsIlRhYmxlTmFtZSIsIkF0dHJpYnV0ZURlZmluaXRpb25zIiwiQXR0cmlidXRlTmFtZSIsIkF0dHJpYnV0ZVR5cGUiLCJLZXlTY2hlbWEiLCJLZXlUeXBlIiwiUHJvdmlzaW9uZWRUaHJvdWdocHV0IiwiUmVhZENhcGFjaXR5VW5pdHMiLCJyZWFkQ2FwYWNpdHlVbml0cyIsIldyaXRlQ2FwYWNpdHlVbml0cyIsIndyaXRlQ2FwYWNpdHlVbml0cyIsImNyZWF0ZVRhYmxlIiwiX190eXBlIiwiaW5jbHVkZXMiLCJfZ2V0IiwiRXJyb3IiLCJLZXkiLCJTIiwiZ2V0SXRlbSIsIkl0ZW0iLCJOdW1iZXIiLCJOIiwiX2RlbGV0ZSIsIkNvbmRpdGlvbkV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlTmFtZXMiLCJfY2xpZW50IiwiZGVsZXRlSXRlbSIsIiRtZXRhZGF0YSIsImh0dHBTdGF0dXNDb2RlIiwiX3Vwc2VydCIsIm1zRHVyYXRpb24iLCJmb3JjZUV4cGlyZSIsIm9wdGlvbnMiLCJkYXRlTm93IiwiRGF0ZSIsIm5vdyIsImRhdGVOb3dTZWMiLCJuZXdFeHBpcmVTZWMiLCJfYmFzZVVwc2VydCIsIlVwZGF0ZUV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzIiwidG9TdHJpbmciLCJSZXR1cm5WYWx1ZXMiLCJ1cGRhdGVJdGVtIiwiQXR0cmlidXRlcyIsImlzVFRMU2V0IiwiX2lzVFRMU2V0IiwiVGltZVRvTGl2ZVNwZWNpZmljYXRpb24iLCJFbmFibGVkIiwicmVzIiwidXBkYXRlVGltZVRvTGl2ZSIsImRlc2NyaWJlVGltZVRvTGl2ZSIsIlRpbWVUb0xpdmVEZXNjcmlwdGlvbiIsIlRpbWVUb0xpdmVTdGF0dXMiLCJfZ2V0UmF0ZUxpbWl0ZXJSZXMiLCJjaGFuZ2VkUG9pbnRzIiwicmVzdWx0IiwiaXNGaXJzdEluRHVyYXRpb24iLCJjb25zdW1lZFBvaW50cyIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJtc0JlZm9yZU5leHQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterDynamo.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemcache.js":
/*!***********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterMemcache.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nclass RateLimiterMemcache extends RateLimiterStoreAbstract {\n    /**\n   *\n   * @param {Object} opts\n   * Defaults {\n   *   ... see other in RateLimiterStoreAbstract\n   *\n   *   storeClient: memcacheClient\n   * }\n   */ constructor(opts){\n        super(opts);\n        this.client = opts.storeClient;\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        res.consumedPoints = parseInt(result.consumedPoints);\n        res.isFirstInDuration = result.consumedPoints === changedPoints;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = result.msBeforeNext;\n        return res;\n    }\n    _upsert(rlKey, points, msDuration, forceExpire = false, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const nowMs = Date.now();\n            const secDuration = Math.floor(msDuration / 1000);\n            if (forceExpire) {\n                this.client.set(rlKey, points, secDuration, (err)=>{\n                    if (!err) {\n                        this.client.set(`${rlKey}_expire`, secDuration > 0 ? nowMs + secDuration * 1000 : -1, secDuration, ()=>{\n                            const res = {\n                                consumedPoints: points,\n                                msBeforeNext: secDuration > 0 ? secDuration * 1000 : -1\n                            };\n                            resolve(res);\n                        });\n                    } else {\n                        reject(err);\n                    }\n                });\n            } else {\n                this.client.incr(rlKey, points, (err, consumedPoints)=>{\n                    if (err || consumedPoints === false) {\n                        this.client.add(rlKey, points, secDuration, (errAddKey, createdNew)=>{\n                            if (errAddKey || !createdNew) {\n                                // Try to upsert again in case of race condition\n                                if (typeof options.attemptNumber === \"undefined\" || options.attemptNumber < 3) {\n                                    const nextOptions = Object.assign({}, options);\n                                    nextOptions.attemptNumber = nextOptions.attemptNumber ? nextOptions.attemptNumber + 1 : 1;\n                                    this._upsert(rlKey, points, msDuration, forceExpire, nextOptions).then((resUpsert)=>resolve(resUpsert)).catch((errUpsert)=>reject(errUpsert));\n                                } else {\n                                    reject(new Error(\"Can not add key\"));\n                                }\n                            } else {\n                                this.client.add(`${rlKey}_expire`, secDuration > 0 ? nowMs + secDuration * 1000 : -1, secDuration, ()=>{\n                                    const res = {\n                                        consumedPoints: points,\n                                        msBeforeNext: secDuration > 0 ? secDuration * 1000 : -1\n                                    };\n                                    resolve(res);\n                                });\n                            }\n                        });\n                    } else {\n                        this.client.get(`${rlKey}_expire`, (errGetExpire, resGetExpireMs)=>{\n                            if (errGetExpire) {\n                                reject(errGetExpire);\n                            } else {\n                                const expireMs = resGetExpireMs === false ? 0 : resGetExpireMs;\n                                const res = {\n                                    consumedPoints,\n                                    msBeforeNext: expireMs >= 0 ? Math.max(expireMs - nowMs, 0) : -1\n                                };\n                                resolve(res);\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    }\n    _get(rlKey) {\n        return new Promise((resolve, reject)=>{\n            const nowMs = Date.now();\n            this.client.get(rlKey, (err, consumedPoints)=>{\n                if (!consumedPoints) {\n                    resolve(null);\n                } else {\n                    this.client.get(`${rlKey}_expire`, (errGetExpire, resGetExpireMs)=>{\n                        if (errGetExpire) {\n                            reject(errGetExpire);\n                        } else {\n                            const expireMs = resGetExpireMs === false ? 0 : resGetExpireMs;\n                            const res = {\n                                consumedPoints,\n                                msBeforeNext: expireMs >= 0 ? Math.max(expireMs - nowMs, 0) : -1\n                            };\n                            resolve(res);\n                        }\n                    });\n                }\n            });\n        });\n    }\n    _delete(rlKey) {\n        return new Promise((resolve, reject)=>{\n            this.client.del(rlKey, (err, res)=>{\n                if (err) {\n                    reject(err);\n                } else if (res === false) {\n                    resolve(res);\n                } else {\n                    this.client.del(`${rlKey}_expire`, (errDelExpire)=>{\n                        if (errDelExpire) {\n                            reject(errDelExpire);\n                        } else {\n                            resolve(res);\n                        }\n                    });\n                }\n            });\n        });\n    }\n}\nmodule.exports = RateLimiterMemcache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck1lbWNhY2hlLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLDJCQUEyQkMsbUJBQU9BLENBQUM7QUFDekMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQztBQUUvQixNQUFNRSw0QkFBNEJIO0lBQ2hDOzs7Ozs7OztHQVFDLEdBQ0RJLFlBQVlDLElBQUksQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBRU4sSUFBSSxDQUFDQyxNQUFNLEdBQUdELEtBQUtFLFdBQVc7SUFDaEM7SUFFQUMsbUJBQW1CQyxLQUFLLEVBQUVDLGFBQWEsRUFBRUMsTUFBTSxFQUFFO1FBQy9DLE1BQU1DLE1BQU0sSUFBSVY7UUFDaEJVLElBQUlDLGNBQWMsR0FBR0MsU0FBU0gsT0FBT0UsY0FBYztRQUNuREQsSUFBSUcsaUJBQWlCLEdBQUdKLE9BQU9FLGNBQWMsS0FBS0g7UUFDbERFLElBQUlJLGVBQWUsR0FBR0MsS0FBS0MsR0FBRyxDQUFDLElBQUksQ0FBQ0MsTUFBTSxHQUFHUCxJQUFJQyxjQUFjLEVBQUU7UUFDakVELElBQUlRLFlBQVksR0FBR1QsT0FBT1MsWUFBWTtRQUV0QyxPQUFPUjtJQUNUO0lBRUFTLFFBQVFaLEtBQUssRUFBRVUsTUFBTSxFQUFFRyxVQUFVLEVBQUVDLGNBQWMsS0FBSyxFQUFFQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ3BFLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztZQUMzQixNQUFNQyxRQUFRQyxLQUFLQyxHQUFHO1lBQ3RCLE1BQU1DLGNBQWNkLEtBQUtlLEtBQUssQ0FBQ1YsYUFBYTtZQUU1QyxJQUFJQyxhQUFhO2dCQUNmLElBQUksQ0FBQ2pCLE1BQU0sQ0FBQzJCLEdBQUcsQ0FBQ3hCLE9BQU9VLFFBQVFZLGFBQWEsQ0FBQ0c7b0JBQzNDLElBQUksQ0FBQ0EsS0FBSzt3QkFDUixJQUFJLENBQUM1QixNQUFNLENBQUMyQixHQUFHLENBQ2Is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SyxDQUFDOzRCQUNqRTs0QkFDQUYsUUFBUWQ7d0JBQ1Y7b0JBQ0Y7Z0JBQ0Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQXlDLFFBQVE1QyxLQUFLLEVBQUU7UUFDYixPQUFPLElBQUlnQixRQUFRLENBQUNDLFNBQVNDO1lBQzNCLElBQUksQ0FBQ3JCLE1BQU0sQ0FBQ2dELEdBQUcsQ0FBQzdDLE9BQU8sQ0FBQ3lCLEtBQUt0QjtnQkFDM0IsSUFBSXNCLEtBQUs7b0JBQ1BQLE9BQU9PO2dCQUNULE9BQU8sSUFBSXRCLFFBQVEsT0FBTztvQkFDeEJjLFFBQVFkO2dCQUNWLE9BQU87b0JBQ0wsSUFBSSxDQUFDTixNQUFNLENBQUNnRCxHQUFHLENBQUMsQ0FBQyxFQUFFN0MsTUFBTSxPQUFPLENBQUMsRUFBRSxDQUFDOEM7d0JBQ2xDLElBQUlBLGNBQWM7NEJBQ2hCNUIsT0FBTzRCO3dCQUNULE9BQU87NEJBQ0w3QixRQUFRZDt3QkFDVjtvQkFDRjtnQkFDRjtZQUNGO1FBQ0Y7SUFDRjtBQUNGO0FBRUE0QyxPQUFPQyxPQUFPLEdBQUd0RCIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck1lbWNhY2hlLmpzPzk5NDYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0ID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclN0b3JlQWJzdHJhY3QnKTtcbmNvbnN0IFJhdGVMaW1pdGVyUmVzID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclJlcycpO1xuXG5jbGFzcyBSYXRlTGltaXRlck1lbWNhY2hlIGV4dGVuZHMgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAqIERlZmF1bHRzIHtcbiAgICogICAuLi4gc2VlIG90aGVyIGluIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdFxuICAgKlxuICAgKiAgIHN0b3JlQ2xpZW50OiBtZW1jYWNoZUNsaWVudFxuICAgKiB9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLmNsaWVudCA9IG9wdHMuc3RvcmVDbGllbnQ7XG4gIH1cblxuICBfZ2V0UmF0ZUxpbWl0ZXJSZXMocmxLZXksIGNoYW5nZWRQb2ludHMsIHJlc3VsdCkge1xuICAgIGNvbnN0IHJlcyA9IG5ldyBSYXRlTGltaXRlclJlcygpO1xuICAgIHJlcy5jb25zdW1lZFBvaW50cyA9IHBhcnNlSW50KHJlc3VsdC5jb25zdW1lZFBvaW50cyk7XG4gICAgcmVzLmlzRmlyc3RJbkR1cmF0aW9uID0gcmVzdWx0LmNvbnN1bWVkUG9pbnRzID09PSBjaGFuZ2VkUG9pbnRzO1xuICAgIHJlcy5yZW1haW5pbmdQb2ludHMgPSBNYXRoLm1heCh0aGlzLnBvaW50cyAtIHJlcy5jb25zdW1lZFBvaW50cywgMCk7XG4gICAgcmVzLm1zQmVmb3JlTmV4dCA9IHJlc3VsdC5tc0JlZm9yZU5leHQ7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgX3Vwc2VydChybEtleSwgcG9pbnRzLCBtc0R1cmF0aW9uLCBmb3JjZUV4cGlyZSA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgbm93TXMgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3Qgc2VjRHVyYXRpb24gPSBNYXRoLmZsb29yKG1zRHVyYXRpb24gLyAxMDAwKTtcblxuICAgICAgaWYgKGZvcmNlRXhwaXJlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50LnNldChybEtleSwgcG9pbnRzLCBzZWNEdXJhdGlvbiwgKGVycikgPT4ge1xuICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudC5zZXQoXG4gICAgICAgICAgICAgIGAke3JsS2V5fV9leHBpcmVgLFxuICAgICAgICAgICAgICBzZWNEdXJhdGlvbiA+IDAgPyBub3dNcyArIChzZWNEdXJhdGlvbiAqIDEwMDApIDogLTEsXG4gICAgICAgICAgICAgIHNlY0R1cmF0aW9uLFxuICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgICAgICAgY29uc3VtZWRQb2ludHM6IHBvaW50cyxcbiAgICAgICAgICAgICAgICAgIG1zQmVmb3JlTmV4dDogc2VjRHVyYXRpb24gPiAwID8gc2VjRHVyYXRpb24gKiAxMDAwIDogLTEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNsaWVudC5pbmNyKHJsS2V5LCBwb2ludHMsIChlcnIsIGNvbnN1bWVkUG9pbnRzKSA9PiB7XG4gICAgICAgICAgaWYgKGVyciB8fCBjb25zdW1lZFBvaW50cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LmFkZChybEtleSwgcG9pbnRzLCBzZWNEdXJhdGlvbiwgKGVyckFkZEtleSwgY3JlYXRlZE5ldykgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyQWRkS2V5IHx8ICFjcmVhdGVkTmV3KSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHVwc2VydCBhZ2FpbiBpbiBjYXNlIG9mIHJhY2UgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmF0dGVtcHROdW1iZXIgPT09ICd1bmRlZmluZWQnIHx8IG9wdGlvbnMuYXR0ZW1wdE51bWJlciA8IDMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICBuZXh0T3B0aW9ucy5hdHRlbXB0TnVtYmVyID0gbmV4dE9wdGlvbnMuYXR0ZW1wdE51bWJlciA/IChuZXh0T3B0aW9ucy5hdHRlbXB0TnVtYmVyICsgMSkgOiAxO1xuXG4gICAgICAgICAgICAgICAgICB0aGlzLl91cHNlcnQocmxLZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUsIG5leHRPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNVcHNlcnQgPT4gcmVzb2x2ZShyZXNVcHNlcnQpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyVXBzZXJ0ID0+IHJlamVjdChlcnJVcHNlcnQpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ2FuIG5vdCBhZGQga2V5JykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5hZGQoXG4gICAgICAgICAgICAgICAgICBgJHtybEtleX1fZXhwaXJlYCxcbiAgICAgICAgICAgICAgICAgIHNlY0R1cmF0aW9uID4gMCA/IG5vd01zICsgKHNlY0R1cmF0aW9uICogMTAwMCkgOiAtMSxcbiAgICAgICAgICAgICAgICAgIHNlY0R1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3VtZWRQb2ludHM6IHBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgICBtc0JlZm9yZU5leHQ6IHNlY0R1cmF0aW9uID4gMCA/IHNlY0R1cmF0aW9uICogMTAwMCA6IC0xLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LmdldChgJHtybEtleX1fZXhwaXJlYCwgKGVyckdldEV4cGlyZSwgcmVzR2V0RXhwaXJlTXMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVyckdldEV4cGlyZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJHZXRFeHBpcmUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZU1zID0gcmVzR2V0RXhwaXJlTXMgPT09IGZhbHNlID8gMCA6IHJlc0dldEV4cGlyZU1zO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN1bWVkUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgbXNCZWZvcmVOZXh0OiBleHBpcmVNcyA+PSAwID8gTWF0aC5tYXgoZXhwaXJlTXMgLSBub3dNcywgMCkgOiAtMSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIF9nZXQocmxLZXkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgbm93TXMgPSBEYXRlLm5vdygpO1xuXG4gICAgICB0aGlzLmNsaWVudC5nZXQocmxLZXksIChlcnIsIGNvbnN1bWVkUG9pbnRzKSA9PiB7XG4gICAgICAgIGlmICghY29uc3VtZWRQb2ludHMpIHtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2xpZW50LmdldChgJHtybEtleX1fZXhwaXJlYCwgKGVyckdldEV4cGlyZSwgcmVzR2V0RXhwaXJlTXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJHZXRFeHBpcmUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVyckdldEV4cGlyZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBleHBpcmVNcyA9IHJlc0dldEV4cGlyZU1zID09PSBmYWxzZSA/IDAgOiByZXNHZXRFeHBpcmVNcztcbiAgICAgICAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgICAgIGNvbnN1bWVkUG9pbnRzLFxuICAgICAgICAgICAgICAgIG1zQmVmb3JlTmV4dDogZXhwaXJlTXMgPj0gMCA/IE1hdGgubWF4KGV4cGlyZU1zIC0gbm93TXMsIDApIDogLTEsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfZGVsZXRlKHJsS2V5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50LmRlbChybEtleSwgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2xpZW50LmRlbChgJHtybEtleX1fZXhwaXJlYCwgKGVyckRlbEV4cGlyZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVyckRlbEV4cGlyZSkge1xuICAgICAgICAgICAgICByZWplY3QoZXJyRGVsRXhwaXJlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSYXRlTGltaXRlck1lbWNhY2hlO1xuIl0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCIsInJlcXVpcmUiLCJSYXRlTGltaXRlclJlcyIsIlJhdGVMaW1pdGVyTWVtY2FjaGUiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJjbGllbnQiLCJzdG9yZUNsaWVudCIsIl9nZXRSYXRlTGltaXRlclJlcyIsInJsS2V5IiwiY2hhbmdlZFBvaW50cyIsInJlc3VsdCIsInJlcyIsImNvbnN1bWVkUG9pbnRzIiwicGFyc2VJbnQiLCJpc0ZpcnN0SW5EdXJhdGlvbiIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJwb2ludHMiLCJtc0JlZm9yZU5leHQiLCJfdXBzZXJ0IiwibXNEdXJhdGlvbiIsImZvcmNlRXhwaXJlIiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwibm93TXMiLCJEYXRlIiwibm93Iiwic2VjRHVyYXRpb24iLCJmbG9vciIsInNldCIsImVyciIsImluY3IiLCJhZGQiLCJlcnJBZGRLZXkiLCJjcmVhdGVkTmV3IiwiYXR0ZW1wdE51bWJlciIsIm5leHRPcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwidGhlbiIsInJlc1Vwc2VydCIsImNhdGNoIiwiZXJyVXBzZXJ0IiwiRXJyb3IiLCJnZXQiLCJlcnJHZXRFeHBpcmUiLCJyZXNHZXRFeHBpcmVNcyIsImV4cGlyZU1zIiwiX2dldCIsIl9kZWxldGUiLCJkZWwiLCJlcnJEZWxFeHBpcmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemcache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemory.js":
/*!*********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterMemory.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterAbstract = __webpack_require__(/*! ./RateLimiterAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js\");\nconst MemoryStorage = __webpack_require__(/*! ./component/MemoryStorage/MemoryStorage */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/MemoryStorage.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nclass RateLimiterMemory extends RateLimiterAbstract {\n    constructor(opts = {}){\n        super(opts);\n        this._memoryStorage = new MemoryStorage();\n    }\n    /**\n   *\n   * @param key\n   * @param pointsToConsume\n   * @param {Object} options\n   * @returns {Promise<RateLimiterRes>}\n   */ consume(key, pointsToConsume = 1, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const rlKey = this.getKey(key);\n            const secDuration = this._getKeySecDuration(options);\n            let res = this._memoryStorage.incrby(rlKey, pointsToConsume, secDuration);\n            res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n            if (res.consumedPoints > this.points) {\n                // Block only first time when consumed more than points\n                if (this.blockDuration > 0 && res.consumedPoints <= this.points + pointsToConsume) {\n                    // Block key\n                    res = this._memoryStorage.set(rlKey, res.consumedPoints, this.blockDuration);\n                }\n                reject(res);\n            } else if (this.execEvenly && res.msBeforeNext > 0 && !res.isFirstInDuration) {\n                // Execute evenly\n                let delay = Math.ceil(res.msBeforeNext / (res.remainingPoints + 2));\n                if (delay < this.execEvenlyMinDelayMs) {\n                    delay = res.consumedPoints * this.execEvenlyMinDelayMs;\n                }\n                setTimeout(resolve, delay, res);\n            } else {\n                resolve(res);\n            }\n        });\n    }\n    penalty(key, points = 1, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve)=>{\n            const secDuration = this._getKeySecDuration(options);\n            const res = this._memoryStorage.incrby(rlKey, points, secDuration);\n            res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n            resolve(res);\n        });\n    }\n    reward(key, points = 1, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve)=>{\n            const secDuration = this._getKeySecDuration(options);\n            const res = this._memoryStorage.incrby(rlKey, -points, secDuration);\n            res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n            resolve(res);\n        });\n    }\n    /**\n   * Block any key for secDuration seconds\n   *\n   * @param key\n   * @param secDuration\n   */ block(key, secDuration) {\n        const msDuration = secDuration * 1000;\n        const initPoints = this.points + 1;\n        this._memoryStorage.set(this.getKey(key), initPoints, secDuration);\n        return Promise.resolve(new RateLimiterRes(0, msDuration === 0 ? -1 : msDuration, initPoints));\n    }\n    set(key, points, secDuration) {\n        const msDuration = (secDuration >= 0 ? secDuration : this.duration) * 1000;\n        this._memoryStorage.set(this.getKey(key), points, secDuration);\n        return Promise.resolve(new RateLimiterRes(0, msDuration === 0 ? -1 : msDuration, points));\n    }\n    get(key) {\n        const res = this._memoryStorage.get(this.getKey(key));\n        if (res !== null) {\n            res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        }\n        return Promise.resolve(res);\n    }\n    delete(key) {\n        return Promise.resolve(this._memoryStorage.delete(this.getKey(key)));\n    }\n}\nmodule.exports = RateLimiterMemory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck1lbW9yeS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxzQkFBc0JDLG1CQUFPQSxDQUFDO0FBQ3BDLE1BQU1DLGdCQUFnQkQsbUJBQU9BLENBQUM7QUFDOUIsTUFBTUUsaUJBQWlCRixtQkFBT0EsQ0FBQztBQUUvQixNQUFNRywwQkFBMEJKO0lBQzlCSyxZQUFZQyxPQUFPLENBQUMsQ0FBQyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFFTixJQUFJLENBQUNDLGNBQWMsR0FBRyxJQUFJTDtJQUM1QjtJQUNBOzs7Ozs7R0FNQyxHQUNETSxRQUFRQyxHQUFHLEVBQUVDLGtCQUFrQixDQUFDLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDOUMsT0FBTyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQzNCLE1BQU1DLFFBQVEsSUFBSSxDQUFDQyxNQUFNLENBQUNQO1lBQzFCLE1BQU1RLGNBQWMsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ1A7WUFDNUMsSUFBSVEsTUFBTSxJQUFJLENBQUNaLGNBQWMsQ0FBQ2EsTUFBTSxDQUFDTCxPQUFPTCxpQkFBaUJPO1lBQzdERSxJQUFJRSxlQUFlLEdBQUdDLEtBQUtDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLE1BQU0sR0FBR0wsSUFBSU0sY0FBYyxFQUFFO1lBRWpFLElBQUlOLElBQUlNLGNBQWMsR0FBRyxJQUFJLENBQUNELE1BQU0sRUFBRTtnQkFDcEMsdURBQXVEO2dCQUN2RCxJQUFJLElBQUksQ0FBQ0UsYUFBYSxHQUFHLEtBQUtQLElBQUlNLGNBQWMsSUFBSyxJQUFJLENBQUNELE1BQU0sR0FBR2QsaUJBQWtCO29CQUNuRixZQUFZO29CQUNaUyxNQUFNLElBQUksQ0FBQ1osY0FBYyxDQUFDb0IsR0FBRyxDQUFDWixPQUFPSSxJQUFJTSxjQUFjLEVBQUUsSUFBSSxDQUFDQyxhQUFhO2dCQUM3RTtnQkFDQVosT0FBT0s7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QU9HLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNOLGNBQWMsQ0FBQ21DLE1BQU0sQ0FBQyxJQUFJLENBQUMxQixNQUFNLENBQUNQO0lBQ2hFO0FBQ0Y7QUFFQWtDLE9BQU9DLE9BQU8sR0FBR3hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvbGliL1JhdGVMaW1pdGVyTWVtb3J5LmpzPzc0M2MiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJBYnN0cmFjdCA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJBYnN0cmFjdCcpO1xuY29uc3QgTWVtb3J5U3RvcmFnZSA9IHJlcXVpcmUoJy4vY29tcG9uZW50L01lbW9yeVN0b3JhZ2UvTWVtb3J5U3RvcmFnZScpO1xuY29uc3QgUmF0ZUxpbWl0ZXJSZXMgPSByZXF1aXJlKCcuL1JhdGVMaW1pdGVyUmVzJyk7XG5cbmNsYXNzIFJhdGVMaW1pdGVyTWVtb3J5IGV4dGVuZHMgUmF0ZUxpbWl0ZXJBYnN0cmFjdCB7XG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy5fbWVtb3J5U3RvcmFnZSA9IG5ldyBNZW1vcnlTdG9yYWdlKCk7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHBvaW50c1RvQ29uc3VtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSYXRlTGltaXRlclJlcz59XG4gICAqL1xuICBjb25zdW1lKGtleSwgcG9pbnRzVG9Db25zdW1lID0gMSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJsS2V5ID0gdGhpcy5nZXRLZXkoa2V5KTtcbiAgICAgIGNvbnN0IHNlY0R1cmF0aW9uID0gdGhpcy5fZ2V0S2V5U2VjRHVyYXRpb24ob3B0aW9ucyk7XG4gICAgICBsZXQgcmVzID0gdGhpcy5fbWVtb3J5U3RvcmFnZS5pbmNyYnkocmxLZXksIHBvaW50c1RvQ29uc3VtZSwgc2VjRHVyYXRpb24pO1xuICAgICAgcmVzLnJlbWFpbmluZ1BvaW50cyA9IE1hdGgubWF4KHRoaXMucG9pbnRzIC0gcmVzLmNvbnN1bWVkUG9pbnRzLCAwKTtcblxuICAgICAgaWYgKHJlcy5jb25zdW1lZFBvaW50cyA+IHRoaXMucG9pbnRzKSB7XG4gICAgICAgIC8vIEJsb2NrIG9ubHkgZmlyc3QgdGltZSB3aGVuIGNvbnN1bWVkIG1vcmUgdGhhbiBwb2ludHNcbiAgICAgICAgaWYgKHRoaXMuYmxvY2tEdXJhdGlvbiA+IDAgJiYgcmVzLmNvbnN1bWVkUG9pbnRzIDw9ICh0aGlzLnBvaW50cyArIHBvaW50c1RvQ29uc3VtZSkpIHtcbiAgICAgICAgICAvLyBCbG9jayBrZXlcbiAgICAgICAgICByZXMgPSB0aGlzLl9tZW1vcnlTdG9yYWdlLnNldChybEtleSwgcmVzLmNvbnN1bWVkUG9pbnRzLCB0aGlzLmJsb2NrRHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdChyZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmV4ZWNFdmVubHkgJiYgcmVzLm1zQmVmb3JlTmV4dCA+IDAgJiYgIXJlcy5pc0ZpcnN0SW5EdXJhdGlvbikge1xuICAgICAgICAvLyBFeGVjdXRlIGV2ZW5seVxuICAgICAgICBsZXQgZGVsYXkgPSBNYXRoLmNlaWwocmVzLm1zQmVmb3JlTmV4dCAvIChyZXMucmVtYWluaW5nUG9pbnRzICsgMikpO1xuICAgICAgICBpZiAoZGVsYXkgPCB0aGlzLmV4ZWNFdmVubHlNaW5EZWxheU1zKSB7XG4gICAgICAgICAgZGVsYXkgPSByZXMuY29uc3VtZWRQb2ludHMgKiB0aGlzLmV4ZWNFdmVubHlNaW5EZWxheU1zO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSwgcmVzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHBlbmFsdHkoa2V5LCBwb2ludHMgPSAxLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBybEtleSA9IHRoaXMuZ2V0S2V5KGtleSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBzZWNEdXJhdGlvbiA9IHRoaXMuX2dldEtleVNlY0R1cmF0aW9uKG9wdGlvbnMpO1xuICAgICAgY29uc3QgcmVzID0gdGhpcy5fbWVtb3J5U3RvcmFnZS5pbmNyYnkocmxLZXksIHBvaW50cywgc2VjRHVyYXRpb24pO1xuICAgICAgcmVzLnJlbWFpbmluZ1BvaW50cyA9IE1hdGgubWF4KHRoaXMucG9pbnRzIC0gcmVzLmNvbnN1bWVkUG9pbnRzLCAwKTtcbiAgICAgIHJlc29sdmUocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJld2FyZChrZXksIHBvaW50cyA9IDEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHJsS2V5ID0gdGhpcy5nZXRLZXkoa2V5KTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IHNlY0R1cmF0aW9uID0gdGhpcy5fZ2V0S2V5U2VjRHVyYXRpb24ob3B0aW9ucyk7XG4gICAgICBjb25zdCByZXMgPSB0aGlzLl9tZW1vcnlTdG9yYWdlLmluY3JieShybEtleSwgLXBvaW50cywgc2VjRHVyYXRpb24pO1xuICAgICAgcmVzLnJlbWFpbmluZ1BvaW50cyA9IE1hdGgubWF4KHRoaXMucG9pbnRzIC0gcmVzLmNvbnN1bWVkUG9pbnRzLCAwKTtcbiAgICAgIHJlc29sdmUocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCbG9jayBhbnkga2V5IGZvciBzZWNEdXJhdGlvbiBzZWNvbmRzXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHNlY0R1cmF0aW9uXG4gICAqL1xuICBibG9jayhrZXksIHNlY0R1cmF0aW9uKSB7XG4gICAgY29uc3QgbXNEdXJhdGlvbiA9IHNlY0R1cmF0aW9uICogMTAwMDtcbiAgICBjb25zdCBpbml0UG9pbnRzID0gdGhpcy5wb2ludHMgKyAxO1xuXG4gICAgdGhpcy5fbWVtb3J5U3RvcmFnZS5zZXQodGhpcy5nZXRLZXkoa2V5KSwgaW5pdFBvaW50cywgc2VjRHVyYXRpb24pO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgICBuZXcgUmF0ZUxpbWl0ZXJSZXMoMCwgbXNEdXJhdGlvbiA9PT0gMCA/IC0xIDogbXNEdXJhdGlvbiwgaW5pdFBvaW50cylcbiAgICApO1xuICB9XG5cbiAgc2V0KGtleSwgcG9pbnRzLCBzZWNEdXJhdGlvbikge1xuICAgIGNvbnN0IG1zRHVyYXRpb24gPSAoc2VjRHVyYXRpb24gPj0gMCA/IHNlY0R1cmF0aW9uIDogdGhpcy5kdXJhdGlvbikgKiAxMDAwO1xuXG4gICAgdGhpcy5fbWVtb3J5U3RvcmFnZS5zZXQodGhpcy5nZXRLZXkoa2V5KSwgcG9pbnRzLCBzZWNEdXJhdGlvbik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcbiAgICAgIG5ldyBSYXRlTGltaXRlclJlcygwLCBtc0R1cmF0aW9uID09PSAwID8gLTEgOiBtc0R1cmF0aW9uLCBwb2ludHMpXG4gICAgKTtcbiAgfVxuXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCByZXMgPSB0aGlzLl9tZW1vcnlTdG9yYWdlLmdldCh0aGlzLmdldEtleShrZXkpKTtcbiAgICBpZiAocmVzICE9PSBudWxsKSB7XG4gICAgICByZXMucmVtYWluaW5nUG9pbnRzID0gTWF0aC5tYXgodGhpcy5wb2ludHMgLSByZXMuY29uc3VtZWRQb2ludHMsIDApO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzKTtcbiAgfVxuXG4gIGRlbGV0ZShrZXkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX21lbW9yeVN0b3JhZ2UuZGVsZXRlKHRoaXMuZ2V0S2V5KGtleSkpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyTWVtb3J5O1xuXG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJBYnN0cmFjdCIsInJlcXVpcmUiLCJNZW1vcnlTdG9yYWdlIiwiUmF0ZUxpbWl0ZXJSZXMiLCJSYXRlTGltaXRlck1lbW9yeSIsImNvbnN0cnVjdG9yIiwib3B0cyIsIl9tZW1vcnlTdG9yYWdlIiwiY29uc3VtZSIsImtleSIsInBvaW50c1RvQ29uc3VtZSIsIm9wdGlvbnMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJsS2V5IiwiZ2V0S2V5Iiwic2VjRHVyYXRpb24iLCJfZ2V0S2V5U2VjRHVyYXRpb24iLCJyZXMiLCJpbmNyYnkiLCJyZW1haW5pbmdQb2ludHMiLCJNYXRoIiwibWF4IiwicG9pbnRzIiwiY29uc3VtZWRQb2ludHMiLCJibG9ja0R1cmF0aW9uIiwic2V0IiwiZXhlY0V2ZW5seSIsIm1zQmVmb3JlTmV4dCIsImlzRmlyc3RJbkR1cmF0aW9uIiwiZGVsYXkiLCJjZWlsIiwiZXhlY0V2ZW5seU1pbkRlbGF5TXMiLCJzZXRUaW1lb3V0IiwicGVuYWx0eSIsInJld2FyZCIsImJsb2NrIiwibXNEdXJhdGlvbiIsImluaXRQb2ludHMiLCJkdXJhdGlvbiIsImdldCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMemory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMongo.js":
/*!********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterMongo.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\n/**\n * Get MongoDB driver version as upsert options differ\n * @params {Object} Client instance\n * @returns {Object} Version Object containing major, feature & minor versions.\n */ function getDriverVersion(client) {\n    try {\n        const _client = client.client ? client.client : client;\n        let _v = [\n            0,\n            0,\n            0\n        ];\n        if (typeof _client.topology === \"undefined\") {\n            const { version } = _client.options.metadata.driver;\n            _v = version.split(\"|\", 1)[0].split(\".\").map((v)=>parseInt(v));\n        } else {\n            const { version } = _client.topology.s.options.metadata.driver;\n            _v = version.split(\".\").map((v)=>parseInt(v));\n        }\n        return {\n            major: _v[0],\n            feature: _v[1],\n            patch: _v[2]\n        };\n    } catch (err) {\n        return {\n            major: 0,\n            feature: 0,\n            patch: 0\n        };\n    }\n}\nclass RateLimiterMongo extends RateLimiterStoreAbstract {\n    /**\n   *\n   * @param {Object} opts\n   * Defaults {\n   *   indexKeyPrefix: {attr1: 1, attr2: 1}\n   *   ... see other in RateLimiterStoreAbstract\n   *\n   *   mongo: MongoClient\n   * }\n   */ constructor(opts){\n        super(opts);\n        this.dbName = opts.dbName;\n        this.tableName = opts.tableName;\n        this.indexKeyPrefix = opts.indexKeyPrefix;\n        if (opts.mongo) {\n            this.client = opts.mongo;\n        } else {\n            this.client = opts.storeClient;\n        }\n        if (typeof this.client.then === \"function\") {\n            // If Promise\n            this.client.then((conn)=>{\n                this.client = conn;\n                this._initCollection();\n                this._driverVersion = getDriverVersion(this.client);\n            });\n        } else {\n            this._initCollection();\n            this._driverVersion = getDriverVersion(this.client);\n        }\n    }\n    get dbName() {\n        return this._dbName;\n    }\n    set dbName(value) {\n        this._dbName = typeof value === \"undefined\" ? RateLimiterMongo.getDbName() : value;\n    }\n    static getDbName() {\n        return \"node-rate-limiter-flexible\";\n    }\n    get tableName() {\n        return this._tableName;\n    }\n    set tableName(value) {\n        this._tableName = typeof value === \"undefined\" ? this.keyPrefix : value;\n    }\n    get client() {\n        return this._client;\n    }\n    set client(value) {\n        if (typeof value === \"undefined\") {\n            throw new Error(\"mongo is not set\");\n        }\n        this._client = value;\n    }\n    get indexKeyPrefix() {\n        return this._indexKeyPrefix;\n    }\n    set indexKeyPrefix(obj) {\n        this._indexKeyPrefix = obj || {};\n    }\n    _initCollection() {\n        const db = typeof this.client.db === \"function\" ? this.client.db(this.dbName) : this.client;\n        const collection = db.collection(this.tableName);\n        collection.createIndex({\n            expire: -1\n        }, {\n            expireAfterSeconds: 0\n        });\n        collection.createIndex(Object.assign({}, this.indexKeyPrefix, {\n            key: 1\n        }), {\n            unique: true\n        });\n        this._collection = collection;\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        let doc;\n        if (typeof result.value === \"undefined\") {\n            doc = result;\n        } else {\n            doc = result.value;\n        }\n        res.isFirstInDuration = doc.points === changedPoints;\n        res.consumedPoints = doc.points;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = doc.expire !== null ? Math.max(new Date(doc.expire).getTime() - Date.now(), 0) : -1;\n        return res;\n    }\n    _upsert(key, points, msDuration, forceExpire = false, options = {}) {\n        if (!this._collection) {\n            return Promise.reject(Error(\"Mongo connection is not established\"));\n        }\n        const docAttrs = options.attrs || {};\n        let where;\n        let upsertData;\n        if (forceExpire) {\n            where = {\n                key\n            };\n            where = Object.assign(where, docAttrs);\n            upsertData = {\n                $set: {\n                    key,\n                    points,\n                    expire: msDuration > 0 ? new Date(Date.now() + msDuration) : null\n                }\n            };\n            upsertData.$set = Object.assign(upsertData.$set, docAttrs);\n        } else {\n            where = {\n                $or: [\n                    {\n                        expire: {\n                            $gt: new Date()\n                        }\n                    },\n                    {\n                        expire: {\n                            $eq: null\n                        }\n                    }\n                ],\n                key\n            };\n            where = Object.assign(where, docAttrs);\n            upsertData = {\n                $setOnInsert: {\n                    key,\n                    expire: msDuration > 0 ? new Date(Date.now() + msDuration) : null\n                },\n                $inc: {\n                    points\n                }\n            };\n            upsertData.$setOnInsert = Object.assign(upsertData.$setOnInsert, docAttrs);\n        }\n        // Options for collection updates differ between driver versions\n        const upsertOptions = {\n            upsert: true\n        };\n        if (this._driverVersion.major >= 4 || this._driverVersion.major === 3 && this._driverVersion.feature >= 7 || this._driverVersion.feature >= 6 && this._driverVersion.patch >= 7) {\n            upsertOptions.returnDocument = \"after\";\n        } else {\n            upsertOptions.returnOriginal = false;\n        }\n        /*\n     * 1. Find actual limit and increment points\n     * 2. If limit expired, but Mongo doesn't clean doc by TTL yet, try to replace limit doc completely\n     * 3. If 2 or more Mongo threads try to insert the new limit doc, only the first succeed\n     * 4. Try to upsert from step 1. Actual limit is created now, points are incremented without problems\n     */ return new Promise((resolve, reject)=>{\n            this._collection.findOneAndUpdate(where, upsertData, upsertOptions).then((res)=>{\n                resolve(res);\n            }).catch((errUpsert)=>{\n                if (errUpsert && errUpsert.code === 11000) {\n                    const replaceWhere = Object.assign({\n                        $or: [\n                            {\n                                expire: {\n                                    $lte: new Date()\n                                }\n                            },\n                            {\n                                expire: {\n                                    $eq: null\n                                }\n                            }\n                        ],\n                        key\n                    }, docAttrs);\n                    const replaceTo = {\n                        $set: Object.assign({\n                            key,\n                            points,\n                            expire: msDuration > 0 ? new Date(Date.now() + msDuration) : null\n                        }, docAttrs)\n                    };\n                    this._collection.findOneAndUpdate(replaceWhere, replaceTo, upsertOptions).then((res)=>{\n                        resolve(res);\n                    }).catch((errReplace)=>{\n                        if (errReplace && errReplace.code === 11000) {\n                            this._upsert(key, points, msDuration, forceExpire).then((res)=>resolve(res)).catch((err)=>reject(err));\n                        } else {\n                            reject(errReplace);\n                        }\n                    });\n                } else {\n                    reject(errUpsert);\n                }\n            });\n        });\n    }\n    _get(rlKey, options = {}) {\n        if (!this._collection) {\n            return Promise.reject(Error(\"Mongo connection is not established\"));\n        }\n        const docAttrs = options.attrs || {};\n        const where = Object.assign({\n            key: rlKey,\n            $or: [\n                {\n                    expire: {\n                        $gt: new Date()\n                    }\n                },\n                {\n                    expire: {\n                        $eq: null\n                    }\n                }\n            ]\n        }, docAttrs);\n        return this._collection.findOne(where);\n    }\n    _delete(rlKey, options = {}) {\n        if (!this._collection) {\n            return Promise.reject(Error(\"Mongo connection is not established\"));\n        }\n        const docAttrs = options.attrs || {};\n        const where = Object.assign({\n            key: rlKey\n        }, docAttrs);\n        return this._collection.deleteOne(where).then((res)=>res.deletedCount > 0);\n    }\n}\nmodule.exports = RateLimiterMongo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck1vbmdvLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLDJCQUEyQkMsbUJBQU9BLENBQUM7QUFDekMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQztBQUUvQjs7OztDQUlDLEdBQ0QsU0FBU0UsaUJBQWlCQyxNQUFNO0lBQzlCLElBQUk7UUFDRixNQUFNQyxVQUFVRCxPQUFPQSxNQUFNLEdBQUdBLE9BQU9BLE1BQU0sR0FBR0E7UUFFaEQsSUFBSUUsS0FBSztZQUFDO1lBQUc7WUFBRztTQUFFO1FBQ2xCLElBQUksT0FBT0QsUUFBUUUsUUFBUSxLQUFLLGFBQWE7WUFDM0MsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0gsUUFBUUksT0FBTyxDQUFDQyxRQUFRLENBQUNDLE1BQU07WUFDbkRMLEtBQUtFLFFBQVFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUNBLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUtDLFNBQVNEO1FBQzdELE9BQU87WUFDTCxNQUFNLEVBQUVOLE9BQU8sRUFBRSxHQUFHSCxRQUFRRSxRQUFRLENBQUNTLENBQUMsQ0FBQ1AsT0FBTyxDQUFDQyxRQUFRLENBQUNDLE1BQU07WUFDOURMLEtBQUtFLFFBQVFJLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUtDLFNBQVNEO1FBQzVDO1FBRUEsT0FBTztZQUNMRyxPQUFPWCxFQUFFLENBQUMsRUFBRTtZQUNaWSxTQUFTWixFQUFFLENBQUMsRUFBRTtZQUNkYSxPQUFPYixFQUFFLENBQUMsRUFBRTtRQUNkO0lBQ0YsRUFBRSxPQUFPYyxLQUFLO1FBQ1osT0FBTztZQUFFSCxPQUFPO1lBQUdDLFNBQVM7WUFBR0MsT0FBTztRQUFFO0lBQzFDO0FBQ0Y7QUFFQSxNQUFNRSx5QkFBeUJyQjtJQUM3Qjs7Ozs7Ozs7O0dBU0MsR0FDRHNCLFlBQVlDLElBQUksQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBRU4sSUFBSSxDQUFDQyxNQUFNLEdBQUdELEtBQUtDLE1BQU07UUFDekIsSUFBSSxDQUFDQyxTQUFTLEdBQUdGLEtBQUtFLFNBQVM7UUFDL0IsSUFBSSxDQUFDQyxjQUFjLEdBQUdILEtBQUtHLGNBQWM7UUFFekMsSUFBSUgsS0FBS0ksS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDdkIsTUFBTSxHQUFHbUIsS0FBS0ksS0FBSztRQUMxQixPQUFPO1lBQ0wsSUFBSSxDQUFDdkIsTUFBTSxHQUFHbUIsS0FBS0ssV0FBVztRQUNoQztRQUNBLElBQUksT0FBTyxJQUFJLENBQUN4QixNQUFNLENBQUN5QixJQUFJLEtBQUssWUFBWTtZQUMxQyxhQUFhO1lBQ2IsSUFBSSxDQUFDekIsTUFBTSxDQUNSeUIsSUFBSSxDQUFDLENBQUNDO2dCQUNMLElBQUksQ0FBQzFCLE1BQU0sR0FBRzBCO2dCQUNkLElBQUksQ0FBQ0MsZUFBZTtnQkFDcEIsSUFBSSxDQUFDQyxjQUFjLEdBQUc3QixpQkFBaUIsSUFBSSxDQUFDQyxNQUFNO1lBQ3BEO1FBQ0osT0FBTztZQUNMLElBQUksQ0FBQzJCLGVBQWU7WUFDcEIsSUFBSSxDQUFDQyxjQUFjLEdBQUc3QixpQkFBaUIsSUFBSSxDQUFDQyxNQUFNO1FBQ3BEO0lBQ0Y7SUFFQSxJQUFJb0IsU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDUyxPQUFPO0lBQ3JCO0lBRUEsSUFBSVQsT0FBT1UsS0FBSyxFQUFFO1FBQ2hCLElBQUksQ0FBQ0QsT0FBTyxHQUFHLE9BQU9DLFVBQVUsY0FBY2IsaUJBQWlCYyxTQUFTLEtBQUtEO0lBQy9FO0lBRUEsT0FBT0MsWUFBWTtRQUNqQixPQUFPO0lBQ1Q7SUFFQSxJQUFJVixZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUNXLFVBQVU7SUFDeEI7SUFFQSxJQUFJWCxVQUFVUyxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFDRSxVQUFVLEdBQUcsT0FBT0YsVUFBVSxjQUFjLElBQUksQ0FBQ0csU0FBUyxHQUFHSDtJQUNwRTtJQUVBLElBQUk5QixTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUNDLE9BQU87SUFDckI7SUFFQSxJQUFJRCxPQUFPOEIsS0FBSyxFQUFFO1FBQ2hCLElBQUksT0FBT0EsVUFBVSxhQUFhO1lBQ2hDLE1BQU0sSUFBSUksTUFBTTtRQUNsQjtRQUNBLElBQUksQ0FBQ2pDLE9BQU8sR0FBRzZCO0lBQ2pCO0lBRUEsSUFBSVIsaUJBQWlCO1FBQ25CLE9BQU8sSUFBSSxDQUFDYSxlQUFlO0lBQzdCO0lBRUEsSUFBSWIsZUFBZWMsR0FBRyxFQUFFO1FBQ3RCLElBQUksQ0FBQ0QsZUFBZSxHQUFHQyxPQUFPLENBQUM7SUFDakM7SUFFQVQsa0JBQWtCO1FBQ2hCLE1BQU1VLEtBQUssT0FBTyxJQUFJLENBQUNyQyxNQUFNLENBQUNxQyxFQUFFLEtBQUssYUFDakMsSUFBSSxDQUFDckMsTUFBTSxDQUFDcUMsRUFBRSxDQUFDLElBQUksQ0FBQ2pCLE1BQU0sSUFDMUIsSUFBSSxDQUFDcEIsTUFBTTtRQUVmLE1BQU1zQyxhQUFhRCxHQUFHQyxVQUFVLENBQUMsSUFBSSxDQUFDakIsU0FBUztRQUMvQ2lCLFdBQVdDLFdBQVcsQ0FBQztZQUFFQyxRQUFRLENBQUM7UUFBRSxHQUFHO1lBQUVDLG9CQUFvQjtRQUFFO1FBQy9ESCxXQUFXQyxXQUFXLENBQUNHLE9BQU9DLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDckIsY0FBYyxFQUFFO1lBQUVzQixLQUFLO1FBQUUsSUFBSTtZQUFFQyxRQUFRO1FBQUs7UUFFMUYsSUFBSSxDQUFDQyxXQUFXLEdBQUdSO0lBQ3JCO0lBRUFTLG1CQUFtQkMsS0FBSyxFQUFFQyxhQUFhLEVBQUVDLE1BQU0sRUFBRTtRQUMvQyxNQUFNQyxNQUFNLElBQUlyRDtRQUVoQixJQUFJc0Q7UUFDSixJQUFJLE9BQU9GLE9BQU9wQixLQUFLLEtBQUssYUFBYTtZQUN2Q3NCLE1BQU1GO1FBQ1IsT0FBTztZQUNMRSxNQUFNRixPQUFPcEIsS0FBSztRQUNwQjtRQUVBcUIsSUFBSUUsaUJBQWlCLEdBQUdELElBQUlFLE1BQU0sS0FBS0w7UUFDdkNFLElBQUlJLGNBQWMsR0FBR0gsSUFBSUUsTUFBTTtRQUUvQkgsSUFBSUssZUFBZSxHQUFHQyxLQUFLQyxHQUFHLENBQUMsSUFBSSxDQUFDSixNQUFNLEdBQUdILElBQUlJLGNBQWMsRUFBRTtRQUNqRUosSUFBSVEsWUFBWSxHQUFHUCxJQUFJWixNQUFNLEtBQUssT0FDOUJpQixLQUFLQyxHQUFHLENBQUMsSUFBSUUsS0FBS1IsSUFBSVosTUFBTSxFQUFFcUIsT0FBTyxLQUFLRCxLQUFLRSxHQUFHLElBQUksS0FDdEQsQ0FBQztRQUVMLE9BQU9YO0lBQ1Q7SUFFQVksUUFBUW5CLEdBQUcsRUFBRVUsTUFBTSxFQUFFVSxVQUFVLEVBQUVDLGNBQWMsS0FBSyxFQUFFNUQsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUNsRSxJQUFJLENBQUMsSUFBSSxDQUFDeUMsV0FBVyxFQUFFO1lBQ3JCLE9BQU9vQixRQUFRQyxNQUFNLENBQUNqQyxNQUFNO1FBQzlCO1FBRUEsTUFBTWtDLFdBQVcvRCxRQUFRZ0UsS0FBSyxJQUFJLENBQUM7UUFFbkMsSUFBSUM7UUFDSixJQUFJQztRQUNKLElBQUlOLGFBQWE7WUFDZkssUUFBUTtnQkFBRTFCO1lBQUk7WUFDZDBCLFFBQVE1QixPQUFPQyxNQUFNLENBQUMyQixPQUFPRjtZQUM3QkcsYUFBYTtnQkFDWEMsTUFBTTtvQkFDSjVCO29CQUNBVTtvQkFDQWQsUUFBUXdCLGFBQWEsSUFBSSxJQUFJSixLQUFLQSxLQUFLRSxHQUFHLEtBQUtFLGNBQWM7Z0JBQy9EO1lBQ0Y7WUFDQU8sV0FBV0MsSUFBSSxHQUFHOUIsT0FBT0MsTUFBTSxDQUFDNEIsV0FBV0MsSUFBSSxFQUFFSjtRQUNuRCxPQUFPO1lBQ0xFLFFBQVE7Z0JBQ05HLEtBQUs7b0JBQ0g7d0JBQUVqQyxRQUFROzRCQUFFa0MsS0FBSyxJQUFJZDt3QkFBTztvQkFBRTtvQkFDOUI7d0JBQUVwQixRQUFROzRCQUFFbUMsS0FBSzt3QkFBSztvQkFBRTtpQkFDekI7Z0JBQ0QvQjtZQUNGO1lBQ0EwQixRQUFRNUIsT0FBT0MsTUFBTSxDQUFDMkIsT0FBT0Y7WUFDN0JHLGFBQWE7Z0JBQ1hLLGNBQWM7b0JBQ1poQztvQkFDQUosUUFBUXdCLGFBQWEsSUFBSSxJQUFJSixLQUFLQSxLQUFLRSxHQUFHLEtBQUtFLGNBQWM7Z0JBQy9EO2dCQUNBYSxNQUFNO29CQUFFdkI7Z0JBQU87WUFDakI7WUFDQWlCLFdBQVdLLFlBQVksR0FBR2xDLE9BQU9DLE1BQU0sQ0FBQzRCLFdBQVdLLFlBQVksRUFBRVI7UUFDbkU7UUFFQSxnRUFBZ0U7UUFDaEUsTUFBTVUsZ0JBQWdCO1lBQ3BCQyxRQUFRO1FBQ1Y7UUFDQSxJQUFJLElBQUssQ0FBQ25ELGNBQWMsQ0FBQ2YsS0FBSyxJQUFJLEtBQzdCLElBQUksQ0FBQ2UsY0FBYyxDQUFDZixLQUFLLEtBQUssS0FDNUIsSUFBSSxDQUFDZSxjQUFjLENBQUNkLE9BQU8sSUFBRyxLQUM5QixJQUFJLENBQUNjLGNBQWMsQ0FBQ2QsT0FBTyxJQUFJLEtBQzVCLElBQUksQ0FBQ2MsY0FBYyxDQUFDYixLQUFLLElBQUksR0FDdkM7WUFDRStELGNBQWNFLGNBQWMsR0FBRztRQUNqQyxPQUFPO1lBQ0xGLGNBQWNHLGNBQWMsR0FBRztRQUNqQztRQUVBOzs7OztLQUtDLEdBQ0QsT0FBTyxJQUFJZixRQUFRLENBQUNnQixTQUFTZjtZQUMzQixJQUFJLENBQUNyQixXQUFXLENBQUNxQyxnQkFBZ0IsQ0FDL0JiLE9BQ0FDLFlBQ0FPLGVBQ0FyRCxJQUFJLENBQUMsQ0FBQzBCO2dCQUNOK0IsUUFBUS9CO1lBQ1YsR0FBR2lDLEtBQUssQ0FBQyxDQUFDQztnQkFDUixJQUFJQSxhQUFhQSxVQUFVQyxJQUFJLEtBQUssT0FBTztvQkFDekMsTUFBTUMsZUFBZTdDLE9BQU9DLE1BQU0sQ0FBQzt3QkFDakM4QixLQUFLOzRCQUNIO2dDQUFFakMsUUFBUTtvQ0FBRWdELE1BQU0sSUFBSTVCO2dDQUFPOzRCQUFFOzRCQUMvQjtnQ0FBRXBCLFFBQVE7b0NBQUVtQyxLQUFLO2dDQUFLOzRCQUFFO3lCQUN6Qjt3QkFDRC9CO29CQUNGLEdBQUd3QjtvQkFFSCxNQUFNcUIsWUFBWTt3QkFDaEJqQixNQUFNOUIsT0FBT0MsTUFBTSxDQUFDOzRCQUNsQkM7NEJBQ0FVOzRCQUNBZCxRQUFRd0IsYUFBYSxJQUFJLElBQUlKLEtBQUtBLEtBQUtFLEdBQUcsS0FBS0UsY0FBYzt3QkFDL0QsR0FBR0k7b0JBQ0w7b0JBRUEsSUFBSSxDQUFDdEIsV0FBVyxDQUFDcUMsZ0JBQWdCLENBQy9CSSxjQUNBRSxXQUNBWCxlQUNBckQsSUFBSSxDQUFDLENBQUMwQjt3QkFDTitCLFFBQVEvQjtvQkFDVixHQUFHaUMsS0FBSyxDQUFDLENBQUNNO3dCQUNSLElBQUlBLGNBQWNBLFdBQVdKLElBQUksS0FBSyxPQUFPOzRCQUMzQyxJQUFJLENBQUN2QixPQUFPLENBQUNuQixLQUFLVSxRQUFRVSxZQUFZQyxhQUNuQ3hDLElBQUksQ0FBQzBCLENBQUFBLE1BQU8rQixRQUFRL0IsTUFDcEJpQyxLQUFLLENBQUNwRSxDQUFBQSxNQUFPbUQsT0FBT25EO3dCQUN6QixPQUFPOzRCQUNMbUQsT0FBT3VCO3dCQUNUO29CQUNGO2dCQUNGLE9BQU87b0JBQ0x2QixPQUFPa0I7Z0JBQ1Q7WUFDRjtRQUNGO0lBQ0Y7SUFFQU0sS0FBSzNDLEtBQUssRUFBRTNDLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQ3lDLFdBQVcsRUFBRTtZQUNyQixPQUFPb0IsUUFBUUMsTUFBTSxDQUFDakMsTUFBTTtRQUM5QjtRQUVBLE1BQU1rQyxXQUFXL0QsUUFBUWdFLEtBQUssSUFBSSxDQUFDO1FBRW5DLE1BQU1DLFFBQVE1QixPQUFPQyxNQUFNLENBQUM7WUFDMUJDLEtBQUtJO1lBQ0x5QixLQUFLO2dCQUNIO29CQUFFakMsUUFBUTt3QkFBRWtDLEtBQUssSUFBSWQ7b0JBQU87Z0JBQUU7Z0JBQzlCO29CQUFFcEIsUUFBUTt3QkFBRW1DLEtBQUs7b0JBQUs7Z0JBQUU7YUFDekI7UUFDSCxHQUFHUDtRQUVILE9BQU8sSUFBSSxDQUFDdEIsV0FBVyxDQUFDOEMsT0FBTyxDQUFDdEI7SUFDbEM7SUFFQXVCLFFBQVE3QyxLQUFLLEVBQUUzQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQzNCLElBQUksQ0FBQyxJQUFJLENBQUN5QyxXQUFXLEVBQUU7WUFDckIsT0FBT29CLFFBQVFDLE1BQU0sQ0FBQ2pDLE1BQU07UUFDOUI7UUFFQSxNQUFNa0MsV0FBVy9ELFFBQVFnRSxLQUFLLElBQUksQ0FBQztRQUNuQyxNQUFNQyxRQUFRNUIsT0FBT0MsTUFBTSxDQUFDO1lBQUVDLEtBQUtJO1FBQU0sR0FBR29CO1FBRTVDLE9BQU8sSUFBSSxDQUFDdEIsV0FBVyxDQUFDZ0QsU0FBUyxDQUFDeEIsT0FDL0I3QyxJQUFJLENBQUMwQixDQUFBQSxNQUFPQSxJQUFJNEMsWUFBWSxHQUFHO0lBQ3BDO0FBQ0Y7QUFFQUMsT0FBT0MsT0FBTyxHQUFHaEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJNb25nby5qcz9mN2FlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0Jyk7XG5jb25zdCBSYXRlTGltaXRlclJlcyA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJSZXMnKTtcblxuLyoqXG4gKiBHZXQgTW9uZ29EQiBkcml2ZXIgdmVyc2lvbiBhcyB1cHNlcnQgb3B0aW9ucyBkaWZmZXJcbiAqIEBwYXJhbXMge09iamVjdH0gQ2xpZW50IGluc3RhbmNlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBWZXJzaW9uIE9iamVjdCBjb250YWluaW5nIG1ham9yLCBmZWF0dXJlICYgbWlub3IgdmVyc2lvbnMuXG4gKi9cbmZ1bmN0aW9uIGdldERyaXZlclZlcnNpb24oY2xpZW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgX2NsaWVudCA9IGNsaWVudC5jbGllbnQgPyBjbGllbnQuY2xpZW50IDogY2xpZW50O1xuXG4gICAgbGV0IF92ID0gWzAsIDAsIDBdO1xuICAgIGlmICh0eXBlb2YgX2NsaWVudC50b3BvbG9neSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHsgdmVyc2lvbiB9ID0gX2NsaWVudC5vcHRpb25zLm1ldGFkYXRhLmRyaXZlcjtcbiAgICAgIF92ID0gdmVyc2lvbi5zcGxpdCgnfCcsIDEpWzBdLnNwbGl0KCcuJykubWFwKHYgPT4gcGFyc2VJbnQodikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHZlcnNpb24gfSA9IF9jbGllbnQudG9wb2xvZ3kucy5vcHRpb25zLm1ldGFkYXRhLmRyaXZlcjtcbiAgICAgIF92ID0gdmVyc2lvbi5zcGxpdCgnLicpLm1hcCh2ID0+IHBhcnNlSW50KHYpKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWFqb3I6IF92WzBdLFxuICAgICAgZmVhdHVyZTogX3ZbMV0sXG4gICAgICBwYXRjaDogX3ZbMl0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHsgbWFqb3I6IDAsIGZlYXR1cmU6IDAsIHBhdGNoOiAwIH07XG4gIH1cbn1cblxuY2xhc3MgUmF0ZUxpbWl0ZXJNb25nbyBleHRlbmRzIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgKiBEZWZhdWx0cyB7XG4gICAqICAgaW5kZXhLZXlQcmVmaXg6IHthdHRyMTogMSwgYXR0cjI6IDF9XG4gICAqICAgLi4uIHNlZSBvdGhlciBpbiBSYXRlTGltaXRlclN0b3JlQWJzdHJhY3RcbiAgICpcbiAgICogICBtb25nbzogTW9uZ29DbGllbnRcbiAgICogfVxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy5kYk5hbWUgPSBvcHRzLmRiTmFtZTtcbiAgICB0aGlzLnRhYmxlTmFtZSA9IG9wdHMudGFibGVOYW1lO1xuICAgIHRoaXMuaW5kZXhLZXlQcmVmaXggPSBvcHRzLmluZGV4S2V5UHJlZml4O1xuXG4gICAgaWYgKG9wdHMubW9uZ28pIHtcbiAgICAgIHRoaXMuY2xpZW50ID0gb3B0cy5tb25nbztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGllbnQgPSBvcHRzLnN0b3JlQ2xpZW50O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMuY2xpZW50LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIElmIFByb21pc2VcbiAgICAgIHRoaXMuY2xpZW50XG4gICAgICAgIC50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbGllbnQgPSBjb25uO1xuICAgICAgICAgIHRoaXMuX2luaXRDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgdGhpcy5fZHJpdmVyVmVyc2lvbiA9IGdldERyaXZlclZlcnNpb24odGhpcy5jbGllbnQpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faW5pdENvbGxlY3Rpb24oKTtcbiAgICAgIHRoaXMuX2RyaXZlclZlcnNpb24gPSBnZXREcml2ZXJWZXJzaW9uKHRoaXMuY2xpZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXQgZGJOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9kYk5hbWU7XG4gIH1cblxuICBzZXQgZGJOYW1lKHZhbHVlKSB7XG4gICAgdGhpcy5fZGJOYW1lID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IFJhdGVMaW1pdGVyTW9uZ28uZ2V0RGJOYW1lKCkgOiB2YWx1ZTtcbiAgfVxuXG4gIHN0YXRpYyBnZXREYk5hbWUoKSB7XG4gICAgcmV0dXJuICdub2RlLXJhdGUtbGltaXRlci1mbGV4aWJsZSc7XG4gIH1cblxuICBnZXQgdGFibGVOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl90YWJsZU5hbWU7XG4gIH1cblxuICBzZXQgdGFibGVOYW1lKHZhbHVlKSB7XG4gICAgdGhpcy5fdGFibGVOYW1lID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IHRoaXMua2V5UHJlZml4IDogdmFsdWU7XG4gIH1cblxuICBnZXQgY2xpZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG4gIH1cblxuICBzZXQgY2xpZW50KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbW9uZ28gaXMgbm90IHNldCcpO1xuICAgIH1cbiAgICB0aGlzLl9jbGllbnQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBpbmRleEtleVByZWZpeCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5kZXhLZXlQcmVmaXg7XG4gIH1cblxuICBzZXQgaW5kZXhLZXlQcmVmaXgob2JqKSB7XG4gICAgdGhpcy5faW5kZXhLZXlQcmVmaXggPSBvYmogfHwge307XG4gIH1cblxuICBfaW5pdENvbGxlY3Rpb24oKSB7XG4gICAgY29uc3QgZGIgPSB0eXBlb2YgdGhpcy5jbGllbnQuZGIgPT09ICdmdW5jdGlvbidcbiAgICAgID8gdGhpcy5jbGllbnQuZGIodGhpcy5kYk5hbWUpXG4gICAgICA6IHRoaXMuY2xpZW50O1xuXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy50YWJsZU5hbWUpO1xuICAgIGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBleHBpcmU6IC0xIH0sIHsgZXhwaXJlQWZ0ZXJTZWNvbmRzOiAwIH0pO1xuICAgIGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmRleEtleVByZWZpeCwgeyBrZXk6IDEgfSksIHsgdW5pcXVlOiB0cnVlIH0pO1xuXG4gICAgdGhpcy5fY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gIH1cblxuICBfZ2V0UmF0ZUxpbWl0ZXJSZXMocmxLZXksIGNoYW5nZWRQb2ludHMsIHJlc3VsdCkge1xuICAgIGNvbnN0IHJlcyA9IG5ldyBSYXRlTGltaXRlclJlcygpO1xuXG4gICAgbGV0IGRvYztcbiAgICBpZiAodHlwZW9mIHJlc3VsdC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvYyA9IHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jID0gcmVzdWx0LnZhbHVlO1xuICAgIH1cblxuICAgIHJlcy5pc0ZpcnN0SW5EdXJhdGlvbiA9IGRvYy5wb2ludHMgPT09IGNoYW5nZWRQb2ludHM7XG4gICAgcmVzLmNvbnN1bWVkUG9pbnRzID0gZG9jLnBvaW50cztcblxuICAgIHJlcy5yZW1haW5pbmdQb2ludHMgPSBNYXRoLm1heCh0aGlzLnBvaW50cyAtIHJlcy5jb25zdW1lZFBvaW50cywgMCk7XG4gICAgcmVzLm1zQmVmb3JlTmV4dCA9IGRvYy5leHBpcmUgIT09IG51bGxcbiAgICAgID8gTWF0aC5tYXgobmV3IERhdGUoZG9jLmV4cGlyZSkuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSwgMClcbiAgICAgIDogLTE7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgX3Vwc2VydChrZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLl9jb2xsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoJ01vbmdvIGNvbm5lY3Rpb24gaXMgbm90IGVzdGFibGlzaGVkJykpO1xuICAgIH1cblxuICAgIGNvbnN0IGRvY0F0dHJzID0gb3B0aW9ucy5hdHRycyB8fCB7fTtcblxuICAgIGxldCB3aGVyZTtcbiAgICBsZXQgdXBzZXJ0RGF0YTtcbiAgICBpZiAoZm9yY2VFeHBpcmUpIHtcbiAgICAgIHdoZXJlID0geyBrZXkgfTtcbiAgICAgIHdoZXJlID0gT2JqZWN0LmFzc2lnbih3aGVyZSwgZG9jQXR0cnMpO1xuICAgICAgdXBzZXJ0RGF0YSA9IHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBwb2ludHMsXG4gICAgICAgICAgZXhwaXJlOiBtc0R1cmF0aW9uID4gMCA/IG5ldyBEYXRlKERhdGUubm93KCkgKyBtc0R1cmF0aW9uKSA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgdXBzZXJ0RGF0YS4kc2V0ID0gT2JqZWN0LmFzc2lnbih1cHNlcnREYXRhLiRzZXQsIGRvY0F0dHJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hlcmUgPSB7XG4gICAgICAgICRvcjogW1xuICAgICAgICAgIHsgZXhwaXJlOiB7ICRndDogbmV3IERhdGUoKSB9IH0sXG4gICAgICAgICAgeyBleHBpcmU6IHsgJGVxOiBudWxsIH0gfSxcbiAgICAgICAgXSxcbiAgICAgICAga2V5LFxuICAgICAgfTtcbiAgICAgIHdoZXJlID0gT2JqZWN0LmFzc2lnbih3aGVyZSwgZG9jQXR0cnMpO1xuICAgICAgdXBzZXJ0RGF0YSA9IHtcbiAgICAgICAgJHNldE9uSW5zZXJ0OiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIGV4cGlyZTogbXNEdXJhdGlvbiA+IDAgPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgbXNEdXJhdGlvbikgOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgICAkaW5jOiB7IHBvaW50cyB9LFxuICAgICAgfTtcbiAgICAgIHVwc2VydERhdGEuJHNldE9uSW5zZXJ0ID0gT2JqZWN0LmFzc2lnbih1cHNlcnREYXRhLiRzZXRPbkluc2VydCwgZG9jQXR0cnMpO1xuICAgIH1cblxuICAgIC8vIE9wdGlvbnMgZm9yIGNvbGxlY3Rpb24gdXBkYXRlcyBkaWZmZXIgYmV0d2VlbiBkcml2ZXIgdmVyc2lvbnNcbiAgICBjb25zdCB1cHNlcnRPcHRpb25zID0ge1xuICAgICAgdXBzZXJ0OiB0cnVlLFxuICAgIH07XG4gICAgaWYgKCh0aGlzLl9kcml2ZXJWZXJzaW9uLm1ham9yID49IDQpIHx8XG4gICAgICAgICh0aGlzLl9kcml2ZXJWZXJzaW9uLm1ham9yID09PSAzICYmXG4gICAgICAgICAgKHRoaXMuX2RyaXZlclZlcnNpb24uZmVhdHVyZSA+PTcpIHx8IFxuICAgICAgICAgICh0aGlzLl9kcml2ZXJWZXJzaW9uLmZlYXR1cmUgPj0gNiAmJiBcbiAgICAgICAgICAgICAgdGhpcy5fZHJpdmVyVmVyc2lvbi5wYXRjaCA+PSA3ICkpKSBcbiAgICB7XG4gICAgICB1cHNlcnRPcHRpb25zLnJldHVybkRvY3VtZW50ID0gJ2FmdGVyJztcbiAgICB9IGVsc2Uge1xuICAgICAgdXBzZXJ0T3B0aW9ucy5yZXR1cm5PcmlnaW5hbCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogMS4gRmluZCBhY3R1YWwgbGltaXQgYW5kIGluY3JlbWVudCBwb2ludHNcbiAgICAgKiAyLiBJZiBsaW1pdCBleHBpcmVkLCBidXQgTW9uZ28gZG9lc24ndCBjbGVhbiBkb2MgYnkgVFRMIHlldCwgdHJ5IHRvIHJlcGxhY2UgbGltaXQgZG9jIGNvbXBsZXRlbHlcbiAgICAgKiAzLiBJZiAyIG9yIG1vcmUgTW9uZ28gdGhyZWFkcyB0cnkgdG8gaW5zZXJ0IHRoZSBuZXcgbGltaXQgZG9jLCBvbmx5IHRoZSBmaXJzdCBzdWNjZWVkXG4gICAgICogNC4gVHJ5IHRvIHVwc2VydCBmcm9tIHN0ZXAgMS4gQWN0dWFsIGxpbWl0IGlzIGNyZWF0ZWQgbm93LCBwb2ludHMgYXJlIGluY3JlbWVudGVkIHdpdGhvdXQgcHJvYmxlbXNcbiAgICAgKi9cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fY29sbGVjdGlvbi5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB3aGVyZSxcbiAgICAgICAgdXBzZXJ0RGF0YSxcbiAgICAgICAgdXBzZXJ0T3B0aW9uc1xuICAgICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSkuY2F0Y2goKGVyclVwc2VydCkgPT4ge1xuICAgICAgICBpZiAoZXJyVXBzZXJ0ICYmIGVyclVwc2VydC5jb2RlID09PSAxMTAwMCkgeyAvLyBFMTEwMDAgZHVwbGljYXRlIGtleSBlcnJvciBjb2xsZWN0aW9uXG4gICAgICAgICAgY29uc3QgcmVwbGFjZVdoZXJlID0gT2JqZWN0LmFzc2lnbih7IC8vIHRyeSB0byByZXBsYWNlIE9MRCBsaW1pdCBkb2NcbiAgICAgICAgICAgICRvcjogW1xuICAgICAgICAgICAgICB7IGV4cGlyZTogeyAkbHRlOiBuZXcgRGF0ZSgpIH0gfSxcbiAgICAgICAgICAgICAgeyBleHBpcmU6IHsgJGVxOiBudWxsIH0gfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgfSwgZG9jQXR0cnMpO1xuXG4gICAgICAgICAgY29uc3QgcmVwbGFjZVRvID0ge1xuICAgICAgICAgICAgJHNldDogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgcG9pbnRzLFxuICAgICAgICAgICAgICBleHBpcmU6IG1zRHVyYXRpb24gPiAwID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIG1zRHVyYXRpb24pIDogbnVsbCxcbiAgICAgICAgICAgIH0sIGRvY0F0dHJzKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXBsYWNlV2hlcmUsXG4gICAgICAgICAgICByZXBsYWNlVG8sXG4gICAgICAgICAgICB1cHNlcnRPcHRpb25zXG4gICAgICAgICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICB9KS5jYXRjaCgoZXJyUmVwbGFjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVyclJlcGxhY2UgJiYgZXJyUmVwbGFjZS5jb2RlID09PSAxMTAwMCkgeyAvLyBFMTEwMDAgZHVwbGljYXRlIGtleSBlcnJvciBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgIHRoaXMuX3Vwc2VydChrZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlc29sdmUocmVzKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnJSZXBsYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3QoZXJyVXBzZXJ0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0KHJsS2V5LCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXRoaXMuX2NvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcignTW9uZ28gY29ubmVjdGlvbiBpcyBub3QgZXN0YWJsaXNoZWQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9jQXR0cnMgPSBvcHRpb25zLmF0dHJzIHx8IHt9O1xuXG4gICAgY29uc3Qgd2hlcmUgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIGtleTogcmxLZXksXG4gICAgICAkb3I6IFtcbiAgICAgICAgeyBleHBpcmU6IHsgJGd0OiBuZXcgRGF0ZSgpIH0gfSxcbiAgICAgICAgeyBleHBpcmU6IHsgJGVxOiBudWxsIH0gfSxcbiAgICAgIF0sXG4gICAgfSwgZG9jQXR0cnMpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NvbGxlY3Rpb24uZmluZE9uZSh3aGVyZSk7XG4gIH1cblxuICBfZGVsZXRlKHJsS2V5LCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXRoaXMuX2NvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcignTW9uZ28gY29ubmVjdGlvbiBpcyBub3QgZXN0YWJsaXNoZWQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9jQXR0cnMgPSBvcHRpb25zLmF0dHJzIHx8IHt9O1xuICAgIGNvbnN0IHdoZXJlID0gT2JqZWN0LmFzc2lnbih7IGtleTogcmxLZXkgfSwgZG9jQXR0cnMpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NvbGxlY3Rpb24uZGVsZXRlT25lKHdoZXJlKVxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5kZWxldGVkQ291bnQgPiAwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyTW9uZ287XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwicmVxdWlyZSIsIlJhdGVMaW1pdGVyUmVzIiwiZ2V0RHJpdmVyVmVyc2lvbiIsImNsaWVudCIsIl9jbGllbnQiLCJfdiIsInRvcG9sb2d5IiwidmVyc2lvbiIsIm9wdGlvbnMiLCJtZXRhZGF0YSIsImRyaXZlciIsInNwbGl0IiwibWFwIiwidiIsInBhcnNlSW50IiwicyIsIm1ham9yIiwiZmVhdHVyZSIsInBhdGNoIiwiZXJyIiwiUmF0ZUxpbWl0ZXJNb25nbyIsImNvbnN0cnVjdG9yIiwib3B0cyIsImRiTmFtZSIsInRhYmxlTmFtZSIsImluZGV4S2V5UHJlZml4IiwibW9uZ28iLCJzdG9yZUNsaWVudCIsInRoZW4iLCJjb25uIiwiX2luaXRDb2xsZWN0aW9uIiwiX2RyaXZlclZlcnNpb24iLCJfZGJOYW1lIiwidmFsdWUiLCJnZXREYk5hbWUiLCJfdGFibGVOYW1lIiwia2V5UHJlZml4IiwiRXJyb3IiLCJfaW5kZXhLZXlQcmVmaXgiLCJvYmoiLCJkYiIsImNvbGxlY3Rpb24iLCJjcmVhdGVJbmRleCIsImV4cGlyZSIsImV4cGlyZUFmdGVyU2Vjb25kcyIsIk9iamVjdCIsImFzc2lnbiIsImtleSIsInVuaXF1ZSIsIl9jb2xsZWN0aW9uIiwiX2dldFJhdGVMaW1pdGVyUmVzIiwicmxLZXkiLCJjaGFuZ2VkUG9pbnRzIiwicmVzdWx0IiwicmVzIiwiZG9jIiwiaXNGaXJzdEluRHVyYXRpb24iLCJwb2ludHMiLCJjb25zdW1lZFBvaW50cyIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJtc0JlZm9yZU5leHQiLCJEYXRlIiwiZ2V0VGltZSIsIm5vdyIsIl91cHNlcnQiLCJtc0R1cmF0aW9uIiwiZm9yY2VFeHBpcmUiLCJQcm9taXNlIiwicmVqZWN0IiwiZG9jQXR0cnMiLCJhdHRycyIsIndoZXJlIiwidXBzZXJ0RGF0YSIsIiRzZXQiLCIkb3IiLCIkZ3QiLCIkZXEiLCIkc2V0T25JbnNlcnQiLCIkaW5jIiwidXBzZXJ0T3B0aW9ucyIsInVwc2VydCIsInJldHVybkRvY3VtZW50IiwicmV0dXJuT3JpZ2luYWwiLCJyZXNvbHZlIiwiZmluZE9uZUFuZFVwZGF0ZSIsImNhdGNoIiwiZXJyVXBzZXJ0IiwiY29kZSIsInJlcGxhY2VXaGVyZSIsIiRsdGUiLCJyZXBsYWNlVG8iLCJlcnJSZXBsYWNlIiwiX2dldCIsImZpbmRPbmUiLCJfZGVsZXRlIiwiZGVsZXRlT25lIiwiZGVsZXRlZENvdW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMongo.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMySQL.js":
/*!********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterMySQL.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nclass RateLimiterMySQL extends RateLimiterStoreAbstract {\n    /**\n   * @callback callback\n   * @param {Object} err\n   *\n   * @param {Object} opts\n   * @param {callback} cb\n   * Defaults {\n   *   ... see other in RateLimiterStoreAbstract\n   *\n   *   storeClient: anySqlClient,\n   *   storeType: 'knex', // required only for Knex instance\n   *   dbName: 'string',\n   *   tableName: 'string',\n   * }\n   */ constructor(opts, cb = null){\n        super(opts);\n        this.client = opts.storeClient;\n        this.clientType = opts.storeType;\n        this.dbName = opts.dbName;\n        this.tableName = opts.tableName;\n        this.clearExpiredByTimeout = opts.clearExpiredByTimeout;\n        this.tableCreated = opts.tableCreated;\n        if (!this.tableCreated) {\n            this._createDbAndTable().then(()=>{\n                this.tableCreated = true;\n                if (this.clearExpiredByTimeout) {\n                    this._clearExpiredHourAgo();\n                }\n                if (typeof cb === \"function\") {\n                    cb();\n                }\n            }).catch((err)=>{\n                if (typeof cb === \"function\") {\n                    cb(err);\n                } else {\n                    throw err;\n                }\n            });\n        } else {\n            if (this.clearExpiredByTimeout) {\n                this._clearExpiredHourAgo();\n            }\n            if (typeof cb === \"function\") {\n                cb();\n            }\n        }\n    }\n    clearExpired(expire) {\n        return new Promise((resolve)=>{\n            this._getConnection().then((conn)=>{\n                conn.query(`DELETE FROM ??.?? WHERE expire < ?`, [\n                    this.dbName,\n                    this.tableName,\n                    expire\n                ], ()=>{\n                    this._releaseConnection(conn);\n                    resolve();\n                });\n            }).catch(()=>{\n                resolve();\n            });\n        });\n    }\n    _clearExpiredHourAgo() {\n        if (this._clearExpiredTimeoutId) {\n            clearTimeout(this._clearExpiredTimeoutId);\n        }\n        this._clearExpiredTimeoutId = setTimeout(()=>{\n            this.clearExpired(Date.now() - 3600000) // Never rejected\n            .then(()=>{\n                this._clearExpiredHourAgo();\n            });\n        }, 300000);\n        this._clearExpiredTimeoutId.unref();\n    }\n    /**\n   *\n   * @return Promise<any>\n   * @private\n   */ _getConnection() {\n        switch(this.clientType){\n            case \"pool\":\n                return new Promise((resolve, reject)=>{\n                    this.client.getConnection((errConn, conn)=>{\n                        if (errConn) {\n                            return reject(errConn);\n                        }\n                        resolve(conn);\n                    });\n                });\n            case \"sequelize\":\n                return this.client.connectionManager.getConnection();\n            case \"knex\":\n                return this.client.client.acquireConnection();\n            default:\n                return Promise.resolve(this.client);\n        }\n    }\n    _releaseConnection(conn) {\n        switch(this.clientType){\n            case \"pool\":\n                return conn.release();\n            case \"sequelize\":\n                return this.client.connectionManager.releaseConnection(conn);\n            case \"knex\":\n                return this.client.client.releaseConnection(conn);\n            default:\n                return true;\n        }\n    }\n    /**\n   *\n   * @returns {Promise<any>}\n   * @private\n   */ _createDbAndTable() {\n        return new Promise((resolve, reject)=>{\n            this._getConnection().then((conn)=>{\n                conn.query(`CREATE DATABASE IF NOT EXISTS \\`${this.dbName}\\`;`, (errDb)=>{\n                    if (errDb) {\n                        this._releaseConnection(conn);\n                        return reject(errDb);\n                    }\n                    conn.query(this._getCreateTableStmt(), (err)=>{\n                        if (err) {\n                            this._releaseConnection(conn);\n                            return reject(err);\n                        }\n                        this._releaseConnection(conn);\n                        resolve();\n                    });\n                });\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n    _getCreateTableStmt() {\n        return `CREATE TABLE IF NOT EXISTS \\`${this.dbName}\\`.\\`${this.tableName}\\` (` + \"`key` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\" + \"`points` INT(9) NOT NULL default 0,\" + \"`expire` BIGINT UNSIGNED,\" + \"PRIMARY KEY (`key`)\" + \") ENGINE = INNODB;\";\n    }\n    get clientType() {\n        return this._clientType;\n    }\n    set clientType(value) {\n        if (typeof value === \"undefined\") {\n            if (this.client.constructor.name === \"Connection\") {\n                value = \"connection\";\n            } else if (this.client.constructor.name === \"Pool\") {\n                value = \"pool\";\n            } else if (this.client.constructor.name === \"Sequelize\") {\n                value = \"sequelize\";\n            } else {\n                throw new Error(\"storeType is not defined\");\n            }\n        }\n        this._clientType = value.toLowerCase();\n    }\n    get dbName() {\n        return this._dbName;\n    }\n    set dbName(value) {\n        this._dbName = typeof value === \"undefined\" ? \"rtlmtrflx\" : value;\n    }\n    get tableName() {\n        return this._tableName;\n    }\n    set tableName(value) {\n        this._tableName = typeof value === \"undefined\" ? this.keyPrefix : value;\n    }\n    get tableCreated() {\n        return this._tableCreated;\n    }\n    set tableCreated(value) {\n        this._tableCreated = typeof value === \"undefined\" ? false : !!value;\n    }\n    get clearExpiredByTimeout() {\n        return this._clearExpiredByTimeout;\n    }\n    set clearExpiredByTimeout(value) {\n        this._clearExpiredByTimeout = typeof value === \"undefined\" ? true : Boolean(value);\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        const [row] = result;\n        res.isFirstInDuration = changedPoints === row.points;\n        res.consumedPoints = res.isFirstInDuration ? changedPoints : row.points;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = row.expire ? Math.max(row.expire - Date.now(), 0) : -1;\n        return res;\n    }\n    _upsertTransaction(conn, key, points, msDuration, forceExpire) {\n        return new Promise((resolve, reject)=>{\n            conn.query(\"BEGIN\", (errBegin)=>{\n                if (errBegin) {\n                    conn.rollback();\n                    return reject(errBegin);\n                }\n                const dateNow = Date.now();\n                const newExpire = msDuration > 0 ? dateNow + msDuration : null;\n                let q;\n                let values;\n                if (forceExpire) {\n                    q = `INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;`;\n                    values = [\n                        this.dbName,\n                        this.tableName,\n                        key,\n                        points,\n                        newExpire,\n                        points,\n                        newExpire\n                    ];\n                } else {\n                    q = `INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);`;\n                    values = [\n                        this.dbName,\n                        this.tableName,\n                        key,\n                        points,\n                        newExpire,\n                        dateNow,\n                        points,\n                        points,\n                        dateNow,\n                        newExpire\n                    ];\n                }\n                conn.query(q, values, (errUpsert)=>{\n                    if (errUpsert) {\n                        conn.rollback();\n                        return reject(errUpsert);\n                    }\n                    conn.query(\"SELECT points, expire FROM ??.?? WHERE `key` = ?;\", [\n                        this.dbName,\n                        this.tableName,\n                        key\n                    ], (errSelect, res)=>{\n                        if (errSelect) {\n                            conn.rollback();\n                            return reject(errSelect);\n                        }\n                        conn.query(\"COMMIT\", (err)=>{\n                            if (err) {\n                                conn.rollback();\n                                return reject(err);\n                            }\n                            resolve(res);\n                        });\n                    });\n                });\n            });\n        });\n    }\n    _upsert(key, points, msDuration, forceExpire = false) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        return new Promise((resolve, reject)=>{\n            this._getConnection().then((conn)=>{\n                this._upsertTransaction(conn, key, points, msDuration, forceExpire).then((res)=>{\n                    resolve(res);\n                    this._releaseConnection(conn);\n                }).catch((err)=>{\n                    reject(err);\n                    this._releaseConnection(conn);\n                });\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n    _get(rlKey) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        return new Promise((resolve, reject)=>{\n            this._getConnection().then((conn)=>{\n                conn.query(\"SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)\", [\n                    this.dbName,\n                    this.tableName,\n                    rlKey,\n                    Date.now()\n                ], (err, res)=>{\n                    if (err) {\n                        reject(err);\n                    } else if (res.length === 0) {\n                        resolve(null);\n                    } else {\n                        resolve(res);\n                    }\n                    this._releaseConnection(conn);\n                } // eslint-disable-line\n                );\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n    _delete(rlKey) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        return new Promise((resolve, reject)=>{\n            this._getConnection().then((conn)=>{\n                conn.query(\"DELETE FROM ??.?? WHERE `key` = ?\", [\n                    this.dbName,\n                    this.tableName,\n                    rlKey\n                ], (err, res)=>{\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(res.affectedRows > 0);\n                    }\n                    this._releaseConnection(conn);\n                } // eslint-disable-line\n                );\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n}\nmodule.exports = RateLimiterMySQL;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck15U1FMLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLDJCQUEyQkMsbUJBQU9BLENBQUM7QUFDekMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQztBQUUvQixNQUFNRSx5QkFBeUJIO0lBQzdCOzs7Ozs7Ozs7Ozs7OztHQWNDLEdBQ0RJLFlBQVlDLElBQUksRUFBRUMsS0FBSyxJQUFJLENBQUU7UUFDM0IsS0FBSyxDQUFDRDtRQUVOLElBQUksQ0FBQ0UsTUFBTSxHQUFHRixLQUFLRyxXQUFXO1FBQzlCLElBQUksQ0FBQ0MsVUFBVSxHQUFHSixLQUFLSyxTQUFTO1FBRWhDLElBQUksQ0FBQ0MsTUFBTSxHQUFHTixLQUFLTSxNQUFNO1FBQ3pCLElBQUksQ0FBQ0MsU0FBUyxHQUFHUCxLQUFLTyxTQUFTO1FBRS9CLElBQUksQ0FBQ0MscUJBQXFCLEdBQUdSLEtBQUtRLHFCQUFxQjtRQUV2RCxJQUFJLENBQUNDLFlBQVksR0FBR1QsS0FBS1MsWUFBWTtRQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDQSxZQUFZLEVBQUU7WUFDdEIsSUFBSSxDQUFDQyxpQkFBaUIsR0FDbkJDLElBQUksQ0FBQztnQkFDSixJQUFJLENBQUNGLFlBQVksR0FBRztnQkFDcEIsSUFBSSxJQUFJLENBQUNELHFCQUFxQixFQUFFO29CQUM5QixJQUFJLENBQUNJLG9CQUFvQjtnQkFDM0I7Z0JBQ0EsSUFBSSxPQUFPWCxPQUFPLFlBQVk7b0JBQzVCQTtnQkFDRjtZQUNGLEdBQ0NZLEtBQUssQ0FBQyxDQUFDQztnQkFDTixJQUFJLE9BQU9iLE9BQU8sWUFBWTtvQkFDNUJBLEdBQUdhO2dCQUNMLE9BQU87b0JBQ0wsTUFBTUE7Z0JBQ1I7WUFDRjtRQUNKLE9BQU87WUFDTCxJQUFJLElBQUksQ0FBQ04scUJBQXFCLEVBQUU7Z0JBQzlCLElBQUksQ0FBQ0ksb0JBQW9CO1lBQzNCO1lBQ0EsSUFBSSxP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QUFJLENBQUN6QyxZQUFZLEVBQUU7WUFDdEIsT0FBT1EsUUFBUVksTUFBTSxDQUFDWSxNQUFNO1FBQzlCO1FBRUEsT0FBTyxJQUFJeEIsUUFBUSxDQUFDQyxTQUFTVztZQUMzQixJQUFJLENBQUNWLGNBQWMsR0FDaEJSLElBQUksQ0FBQyxDQUFDUztnQkFDTEEsS0FBS0MsS0FBSyxDQUNSLHFDQUNBO29CQUFDLElBQUksQ0FBQ2YsTUFBTTtvQkFBRSxJQUFJLENBQUNDLFNBQVM7b0JBQUUyQztpQkFBTSxFQUNwQyxDQUFDcEMsS0FBS3VDO29CQUNKLElBQUl2QyxLQUFLO3dCQUNQZSxPQUFPZjtvQkFDVCxPQUFPO3dCQUNMSSxRQUFRbUMsSUFBSXlCLFlBQVksR0FBRztvQkFDN0I7b0JBRUEsSUFBSSxDQUFDeEQsa0JBQWtCLENBQUNGO2dCQUMxQixFQUFFLHNCQUFzQjs7WUFFNUIsR0FDQ1AsS0FBSyxDQUFDLENBQUNDO2dCQUNOZSxPQUFPZjtZQUNUO1FBQ0o7SUFDRjtBQUNGO0FBRUFpRSxPQUFPQyxPQUFPLEdBQUdsRiIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlck15U1FMLmpzP2Q5NzYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0ID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclN0b3JlQWJzdHJhY3QnKTtcbmNvbnN0IFJhdGVMaW1pdGVyUmVzID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclJlcycpO1xuXG5jbGFzcyBSYXRlTGltaXRlck15U1FMIGV4dGVuZHMgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IHtcbiAgLyoqXG4gICAqIEBjYWxsYmFjayBjYWxsYmFja1xuICAgKiBAcGFyYW0ge09iamVjdH0gZXJyXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNiXG4gICAqIERlZmF1bHRzIHtcbiAgICogICAuLi4gc2VlIG90aGVyIGluIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdFxuICAgKlxuICAgKiAgIHN0b3JlQ2xpZW50OiBhbnlTcWxDbGllbnQsXG4gICAqICAgc3RvcmVUeXBlOiAna25leCcsIC8vIHJlcXVpcmVkIG9ubHkgZm9yIEtuZXggaW5zdGFuY2VcbiAgICogICBkYk5hbWU6ICdzdHJpbmcnLFxuICAgKiAgIHRhYmxlTmFtZTogJ3N0cmluZycsXG4gICAqIH1cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdHMsIGNiID0gbnVsbCkge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy5jbGllbnQgPSBvcHRzLnN0b3JlQ2xpZW50O1xuICAgIHRoaXMuY2xpZW50VHlwZSA9IG9wdHMuc3RvcmVUeXBlO1xuXG4gICAgdGhpcy5kYk5hbWUgPSBvcHRzLmRiTmFtZTtcbiAgICB0aGlzLnRhYmxlTmFtZSA9IG9wdHMudGFibGVOYW1lO1xuXG4gICAgdGhpcy5jbGVhckV4cGlyZWRCeVRpbWVvdXQgPSBvcHRzLmNsZWFyRXhwaXJlZEJ5VGltZW91dDtcblxuICAgIHRoaXMudGFibGVDcmVhdGVkID0gb3B0cy50YWJsZUNyZWF0ZWQ7XG4gICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgdGhpcy5fY3JlYXRlRGJBbmRUYWJsZSgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnRhYmxlQ3JlYXRlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKHRoaXMuY2xlYXJFeHBpcmVkQnlUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLl9jbGVhckV4cGlyZWRIb3VyQWdvKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNiKGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jbGVhckV4cGlyZWRCeVRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJFeHBpcmVkSG91ckFnbygpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsZWFyRXhwaXJlZChleHBpcmUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuX2dldENvbm5lY3Rpb24oKVxuICAgICAgICAudGhlbigoY29ubikgPT4ge1xuICAgICAgICAgIGNvbm4ucXVlcnkoYERFTEVURSBGUk9NID8/Lj8/IFdIRVJFIGV4cGlyZSA8ID9gLCBbdGhpcy5kYk5hbWUsIHRoaXMudGFibGVOYW1lLCBleHBpcmVdLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2NsZWFyRXhwaXJlZEhvdXJBZ28oKSB7XG4gICAgaWYgKHRoaXMuX2NsZWFyRXhwaXJlZFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2NsZWFyRXhwaXJlZFRpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRoaXMuX2NsZWFyRXhwaXJlZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhckV4cGlyZWQoRGF0ZS5ub3coKSAtIDM2MDAwMDApIC8vIE5ldmVyIHJlamVjdGVkXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jbGVhckV4cGlyZWRIb3VyQWdvKCk7XG4gICAgICAgIH0pO1xuICAgIH0sIDMwMDAwMCk7XG4gICAgdGhpcy5fY2xlYXJFeHBpcmVkVGltZW91dElkLnVucmVmKCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybiBQcm9taXNlPGFueT5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRDb25uZWN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5jbGllbnRUeXBlKSB7XG4gICAgICBjYXNlICdwb29sJzpcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICB0aGlzLmNsaWVudC5nZXRDb25uZWN0aW9uKChlcnJDb25uLCBjb25uKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyQ29ubikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVyckNvbm4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKGNvbm4pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ3NlcXVlbGl6ZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5jb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjYXNlICdrbmV4JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50LmNsaWVudC5hY3F1aXJlQ29ubmVjdGlvbigpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNsaWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3JlbGVhc2VDb25uZWN0aW9uKGNvbm4pIHtcbiAgICBzd2l0Y2ggKHRoaXMuY2xpZW50VHlwZSkge1xuICAgICAgY2FzZSAncG9vbCc6XG4gICAgICAgIHJldHVybiBjb25uLnJlbGVhc2UoKTtcbiAgICAgIGNhc2UgJ3NlcXVlbGl6ZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5jb25uZWN0aW9uTWFuYWdlci5yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgIGNhc2UgJ2tuZXgnOlxuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuY2xpZW50LnJlbGVhc2VDb25uZWN0aW9uKGNvbm4pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY3JlYXRlRGJBbmRUYWJsZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fZ2V0Q29ubmVjdGlvbigpXG4gICAgICAgIC50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgY29ubi5xdWVyeShgQ1JFQVRFIERBVEFCQVNFIElGIE5PVCBFWElTVFMgXFxgJHt0aGlzLmRiTmFtZX1cXGA7YCwgKGVyckRiKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyRGIpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcmVsZWFzZUNvbm5lY3Rpb24oY29ubik7XG4gICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyRGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29ubi5xdWVyeSh0aGlzLl9nZXRDcmVhdGVUYWJsZVN0bXQoKSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsZWFzZUNvbm5lY3Rpb24oY29ubik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VDb25uZWN0aW9uKGNvbm4pO1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0Q3JlYXRlVGFibGVTdG10KCkge1xuICAgIHJldHVybiBgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXFxgJHt0aGlzLmRiTmFtZX1cXGAuXFxgJHt0aGlzLnRhYmxlTmFtZX1cXGAgKGAgK1xuICAgICAgJ2BrZXlgIFZBUkNIQVIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjggTk9UIE5VTEwsJyArXG4gICAgICAnYHBvaW50c2AgSU5UKDkpIE5PVCBOVUxMIGRlZmF1bHQgMCwnICtcbiAgICAgICdgZXhwaXJlYCBCSUdJTlQgVU5TSUdORUQsJyArXG4gICAgICAnUFJJTUFSWSBLRVkgKGBrZXlgKScgK1xuICAgICAgJykgRU5HSU5FID0gSU5OT0RCOyc7XG4gIH1cblxuICBnZXQgY2xpZW50VHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50VHlwZTtcbiAgfVxuXG4gIHNldCBjbGllbnRUeXBlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmNsaWVudC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQ29ubmVjdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSAnY29ubmVjdGlvbic7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY2xpZW50LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdQb29sJykge1xuICAgICAgICB2YWx1ZSA9ICdwb29sJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jbGllbnQuY29uc3RydWN0b3IubmFtZSA9PT0gJ1NlcXVlbGl6ZScpIHtcbiAgICAgICAgdmFsdWUgPSAnc2VxdWVsaXplJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RvcmVUeXBlIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2NsaWVudFR5cGUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZ2V0IGRiTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGJOYW1lO1xuICB9XG5cbiAgc2V0IGRiTmFtZSh2YWx1ZSkge1xuICAgIHRoaXMuX2RiTmFtZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAncnRsbXRyZmx4JyA6IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHRhYmxlTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFibGVOYW1lO1xuICB9XG5cbiAgc2V0IHRhYmxlTmFtZSh2YWx1ZSkge1xuICAgIHRoaXMuX3RhYmxlTmFtZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzLmtleVByZWZpeCA6IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHRhYmxlQ3JlYXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFibGVDcmVhdGVkXG4gIH1cblxuICBzZXQgdGFibGVDcmVhdGVkKHZhbHVlKSB7XG4gICAgdGhpcy5fdGFibGVDcmVhdGVkID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogISF2YWx1ZTtcbiAgfVxuXG4gIGdldCBjbGVhckV4cGlyZWRCeVRpbWVvdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NsZWFyRXhwaXJlZEJ5VGltZW91dDtcbiAgfVxuXG4gIHNldCBjbGVhckV4cGlyZWRCeVRpbWVvdXQodmFsdWUpIHtcbiAgICB0aGlzLl9jbGVhckV4cGlyZWRCeVRpbWVvdXQgPSB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IEJvb2xlYW4odmFsdWUpO1xuICB9XG5cbiAgX2dldFJhdGVMaW1pdGVyUmVzKHJsS2V5LCBjaGFuZ2VkUG9pbnRzLCByZXN1bHQpIHtcbiAgICBjb25zdCByZXMgPSBuZXcgUmF0ZUxpbWl0ZXJSZXMoKTtcbiAgICBjb25zdCBbcm93XSA9IHJlc3VsdDtcblxuICAgIHJlcy5pc0ZpcnN0SW5EdXJhdGlvbiA9IGNoYW5nZWRQb2ludHMgPT09IHJvdy5wb2ludHM7XG4gICAgcmVzLmNvbnN1bWVkUG9pbnRzID0gcmVzLmlzRmlyc3RJbkR1cmF0aW9uID8gY2hhbmdlZFBvaW50cyA6IHJvdy5wb2ludHM7XG5cbiAgICByZXMucmVtYWluaW5nUG9pbnRzID0gTWF0aC5tYXgodGhpcy5wb2ludHMgLSByZXMuY29uc3VtZWRQb2ludHMsIDApO1xuICAgIHJlcy5tc0JlZm9yZU5leHQgPSByb3cuZXhwaXJlXG4gICAgICA/IE1hdGgubWF4KHJvdy5leHBpcmUgLSBEYXRlLm5vdygpLCAwKVxuICAgICAgOiAtMTtcblxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBfdXBzZXJ0VHJhbnNhY3Rpb24oY29ubiwga2V5LCBwb2ludHMsIG1zRHVyYXRpb24sIGZvcmNlRXhwaXJlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbm4ucXVlcnkoJ0JFR0lOJywgKGVyckJlZ2luKSA9PiB7XG4gICAgICAgIGlmIChlcnJCZWdpbikge1xuICAgICAgICAgIGNvbm4ucm9sbGJhY2soKTtcblxuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyQmVnaW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0ZU5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IG5ld0V4cGlyZSA9IG1zRHVyYXRpb24gPiAwID8gZGF0ZU5vdyArIG1zRHVyYXRpb24gOiBudWxsO1xuXG4gICAgICAgIGxldCBxO1xuICAgICAgICBsZXQgdmFsdWVzO1xuICAgICAgICBpZiAoZm9yY2VFeHBpcmUpIHtcbiAgICAgICAgICBxID0gYElOU0VSVCBJTlRPID8/Lj8/IFZBTFVFUyAoPywgPywgPylcbiAgICAgICAgICBPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBcbiAgICAgICAgICAgIHBvaW50cyA9ID8sIFxuICAgICAgICAgICAgZXhwaXJlID0gPztgO1xuICAgICAgICAgIHZhbHVlcyA9IFtcbiAgICAgICAgICAgIHRoaXMuZGJOYW1lLCB0aGlzLnRhYmxlTmFtZSwga2V5LCBwb2ludHMsIG5ld0V4cGlyZSxcbiAgICAgICAgICAgIHBvaW50cyxcbiAgICAgICAgICAgIG5ld0V4cGlyZSxcbiAgICAgICAgICBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHEgPSBgSU5TRVJUIElOVE8gPz8uPz8gVkFMVUVTICg/LCA/LCA/KVxuICAgICAgICAgIE9OIERVUExJQ0FURSBLRVkgVVBEQVRFIFxuICAgICAgICAgICAgcG9pbnRzID0gSUYoZXhwaXJlIDw9ID8sID8sIHBvaW50cyArICg/KSksIFxuICAgICAgICAgICAgZXhwaXJlID0gSUYoZXhwaXJlIDw9ID8sID8sIGV4cGlyZSk7YDtcbiAgICAgICAgICB2YWx1ZXMgPSBbXG4gICAgICAgICAgICB0aGlzLmRiTmFtZSwgdGhpcy50YWJsZU5hbWUsIGtleSwgcG9pbnRzLCBuZXdFeHBpcmUsXG4gICAgICAgICAgICBkYXRlTm93LCBwb2ludHMsIHBvaW50cyxcbiAgICAgICAgICAgIGRhdGVOb3csIG5ld0V4cGlyZSxcbiAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29ubi5xdWVyeShxLCB2YWx1ZXMsIChlcnJVcHNlcnQpID0+IHtcbiAgICAgICAgICBpZiAoZXJyVXBzZXJ0KSB7XG4gICAgICAgICAgICBjb25uLnJvbGxiYWNrKCk7XG5cbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyVXBzZXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29ubi5xdWVyeSgnU0VMRUNUIHBvaW50cywgZXhwaXJlIEZST00gPz8uPz8gV0hFUkUgYGtleWAgPSA/OycsIFt0aGlzLmRiTmFtZSwgdGhpcy50YWJsZU5hbWUsIGtleV0sIChlcnJTZWxlY3QsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKGVyclNlbGVjdCkge1xuICAgICAgICAgICAgICBjb25uLnJvbGxiYWNrKCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJTZWxlY3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25uLnF1ZXJ5KCdDT01NSVQnLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25uLnJvbGxiYWNrKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF91cHNlcnQoa2V5LCBwb2ludHMsIG1zRHVyYXRpb24sIGZvcmNlRXhwaXJlID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMudGFibGVDcmVhdGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fZ2V0Q29ubmVjdGlvbigpXG4gICAgICAgIC50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgdGhpcy5fdXBzZXJ0VHJhbnNhY3Rpb24oY29ubiwga2V5LCBwb2ludHMsIG1zRHVyYXRpb24sIGZvcmNlRXhwaXJlKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VDb25uZWN0aW9uKGNvbm4pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB0aGlzLl9yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9nZXQocmxLZXkpIHtcbiAgICBpZiAoIXRoaXMudGFibGVDcmVhdGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fZ2V0Q29ubmVjdGlvbigpXG4gICAgICAgIC50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgY29ubi5xdWVyeShcbiAgICAgICAgICAgICdTRUxFQ1QgcG9pbnRzLCBleHBpcmUgRlJPTSA/Py4/PyBXSEVSRSBga2V5YCA9ID8gQU5EIChgZXhwaXJlYCA+ID8gT1IgYGV4cGlyZWAgSVMgTlVMTCknLFxuICAgICAgICAgICAgW3RoaXMuZGJOYW1lLCB0aGlzLnRhYmxlTmFtZSwgcmxLZXksIERhdGUubm93KCldLFxuICAgICAgICAgICAgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLl9yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgICAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2RlbGV0ZShybEtleSkge1xuICAgIGlmICghdGhpcy50YWJsZUNyZWF0ZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcignVGFibGUgaXMgbm90IGNyZWF0ZWQgeWV0JykpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9nZXRDb25uZWN0aW9uKClcbiAgICAgICAgLnRoZW4oKGNvbm4pID0+IHtcbiAgICAgICAgICBjb25uLnF1ZXJ5KFxuICAgICAgICAgICAgJ0RFTEVURSBGUk9NID8/Lj8/IFdIRVJFIGBrZXlgID0gPycsXG4gICAgICAgICAgICBbdGhpcy5kYk5hbWUsIHRoaXMudGFibGVOYW1lLCBybEtleV0sXG4gICAgICAgICAgICAoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmFmZmVjdGVkUm93cyA+IDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5fcmVsZWFzZUNvbm5lY3Rpb24oY29ubik7XG4gICAgICAgICAgICB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyTXlTUUw7XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwicmVxdWlyZSIsIlJhdGVMaW1pdGVyUmVzIiwiUmF0ZUxpbWl0ZXJNeVNRTCIsImNvbnN0cnVjdG9yIiwib3B0cyIsImNiIiwiY2xpZW50Iiwic3RvcmVDbGllbnQiLCJjbGllbnRUeXBlIiwic3RvcmVUeXBlIiwiZGJOYW1lIiwidGFibGVOYW1lIiwiY2xlYXJFeHBpcmVkQnlUaW1lb3V0IiwidGFibGVDcmVhdGVkIiwiX2NyZWF0ZURiQW5kVGFibGUiLCJ0aGVuIiwiX2NsZWFyRXhwaXJlZEhvdXJBZ28iLCJjYXRjaCIsImVyciIsImNsZWFyRXhwaXJlZCIsImV4cGlyZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiX2dldENvbm5lY3Rpb24iLCJjb25uIiwicXVlcnkiLCJfcmVsZWFzZUNvbm5lY3Rpb24iLCJfY2xlYXJFeHBpcmVkVGltZW91dElkIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIkRhdGUiLCJub3ciLCJ1bnJlZiIsInJlamVjdCIsImdldENvbm5lY3Rpb24iLCJlcnJDb25uIiwiY29ubmVjdGlvbk1hbmFnZXIiLCJhY3F1aXJlQ29ubmVjdGlvbiIsInJlbGVhc2UiLCJyZWxlYXNlQ29ubmVjdGlvbiIsImVyckRiIiwiX2dldENyZWF0ZVRhYmxlU3RtdCIsIl9jbGllbnRUeXBlIiwidmFsdWUiLCJuYW1lIiwiRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIl9kYk5hbWUiLCJfdGFibGVOYW1lIiwia2V5UHJlZml4IiwiX3RhYmxlQ3JlYXRlZCIsIl9jbGVhckV4cGlyZWRCeVRpbWVvdXQiLCJCb29sZWFuIiwiX2dldFJhdGVMaW1pdGVyUmVzIiwicmxLZXkiLCJjaGFuZ2VkUG9pbnRzIiwicmVzdWx0IiwicmVzIiwicm93IiwiaXNGaXJzdEluRHVyYXRpb24iLCJwb2ludHMiLCJjb25zdW1lZFBvaW50cyIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJtc0JlZm9yZU5leHQiLCJfdXBzZXJ0VHJhbnNhY3Rpb24iLCJrZXkiLCJtc0R1cmF0aW9uIiwiZm9yY2VFeHBpcmUiLCJlcnJCZWdpbiIsInJvbGxiYWNrIiwiZGF0ZU5vdyIsIm5ld0V4cGlyZSIsInEiLCJ2YWx1ZXMiLCJlcnJVcHNlcnQiLCJlcnJTZWxlY3QiLCJfdXBzZXJ0IiwiX2dldCIsImxlbmd0aCIsIl9kZWxldGUiLCJhZmZlY3RlZFJvd3MiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterMySQL.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPostgres.js":
/*!***********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterPostgres.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nclass RateLimiterPostgres extends RateLimiterStoreAbstract {\n    /**\n   * @callback callback\n   * @param {Object} err\n   *\n   * @param {Object} opts\n   * @param {callback} cb\n   * Defaults {\n   *   ... see other in RateLimiterStoreAbstract\n   *\n   *   storeClient: postgresClient,\n   *   storeType: 'knex', // required only for Knex instance\n   *   tableName: 'string',\n   *   schemaName: 'string', // optional\n   * }\n   */ constructor(opts, cb = null){\n        super(opts);\n        this.client = opts.storeClient;\n        this.clientType = opts.storeType;\n        this.tableName = opts.tableName;\n        this.schemaName = opts.schemaName;\n        this.clearExpiredByTimeout = opts.clearExpiredByTimeout;\n        this.tableCreated = opts.tableCreated;\n        if (!this.tableCreated) {\n            this._createTable().then(()=>{\n                this.tableCreated = true;\n                if (this.clearExpiredByTimeout) {\n                    this._clearExpiredHourAgo();\n                }\n                if (typeof cb === \"function\") {\n                    cb();\n                }\n            }).catch((err)=>{\n                if (typeof cb === \"function\") {\n                    cb(err);\n                } else {\n                    throw err;\n                }\n            });\n        } else {\n            if (this.clearExpiredByTimeout) {\n                this._clearExpiredHourAgo();\n            }\n            if (typeof cb === \"function\") {\n                cb();\n            }\n        }\n    }\n    _getTableIdentifier() {\n        return this.schemaName ? `\"${this.schemaName}\".\"${this.tableName}\"` : `\"${this.tableName}\"`;\n    }\n    clearExpired(expire) {\n        return new Promise((resolve)=>{\n            const q = {\n                name: \"rlflx-clear-expired\",\n                text: `DELETE FROM ${this._getTableIdentifier()} WHERE expire < $1`,\n                values: [\n                    expire\n                ]\n            };\n            this._query(q).then(()=>{\n                resolve();\n            }).catch(()=>{\n                // Deleting expired query is not critical\n                resolve();\n            });\n        });\n    }\n    /**\n   * Delete all rows expired 1 hour ago once per 5 minutes\n   *\n   * @private\n   */ _clearExpiredHourAgo() {\n        if (this._clearExpiredTimeoutId) {\n            clearTimeout(this._clearExpiredTimeoutId);\n        }\n        this._clearExpiredTimeoutId = setTimeout(()=>{\n            this.clearExpired(Date.now() - 3600000) // Never rejected\n            .then(()=>{\n                this._clearExpiredHourAgo();\n            });\n        }, 300000);\n        this._clearExpiredTimeoutId.unref();\n    }\n    /**\n   *\n   * @return Promise<any>\n   * @private\n   */ _getConnection() {\n        switch(this.clientType){\n            case \"pool\":\n                return Promise.resolve(this.client);\n            case \"sequelize\":\n                return this.client.connectionManager.getConnection();\n            case \"knex\":\n                return this.client.client.acquireConnection();\n            case \"typeorm\":\n                return Promise.resolve(this.client.driver.master);\n            default:\n                return Promise.resolve(this.client);\n        }\n    }\n    _releaseConnection(conn) {\n        switch(this.clientType){\n            case \"pool\":\n                return true;\n            case \"sequelize\":\n                return this.client.connectionManager.releaseConnection(conn);\n            case \"knex\":\n                return this.client.client.releaseConnection(conn);\n            case \"typeorm\":\n                return true;\n            default:\n                return true;\n        }\n    }\n    /**\n   *\n   * @returns {Promise<any>}\n   * @private\n   */ _createTable() {\n        return new Promise((resolve, reject)=>{\n            this._query({\n                text: this._getCreateTableStmt()\n            }).then(()=>{\n                resolve();\n            }).catch((err)=>{\n                if (err.code === \"23505\") {\n                    // Error: duplicate key value violates unique constraint \"pg_type_typname_nsp_index\"\n                    // Postgres doesn't handle concurrent table creation\n                    // It is supposed, that table is created by another worker\n                    resolve();\n                } else {\n                    reject(err);\n                }\n            });\n        });\n    }\n    _getCreateTableStmt() {\n        return `CREATE TABLE IF NOT EXISTS ${this._getTableIdentifier()} (\n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );`;\n    }\n    get clientType() {\n        return this._clientType;\n    }\n    set clientType(value) {\n        const constructorName = this.client.constructor.name;\n        if (typeof value === \"undefined\") {\n            if (constructorName === \"Client\") {\n                value = \"client\";\n            } else if (constructorName === \"Pool\" || constructorName === \"BoundPool\") {\n                value = \"pool\";\n            } else if (constructorName === \"Sequelize\") {\n                value = \"sequelize\";\n            } else {\n                throw new Error(\"storeType is not defined\");\n            }\n        }\n        this._clientType = value.toLowerCase();\n    }\n    get tableName() {\n        return this._tableName;\n    }\n    set tableName(value) {\n        this._tableName = typeof value === \"undefined\" ? this.keyPrefix : value;\n    }\n    get schemaName() {\n        return this._schemaName;\n    }\n    set schemaName(value) {\n        this._schemaName = value;\n    }\n    get tableCreated() {\n        return this._tableCreated;\n    }\n    set tableCreated(value) {\n        this._tableCreated = typeof value === \"undefined\" ? false : !!value;\n    }\n    get clearExpiredByTimeout() {\n        return this._clearExpiredByTimeout;\n    }\n    set clearExpiredByTimeout(value) {\n        this._clearExpiredByTimeout = typeof value === \"undefined\" ? true : Boolean(value);\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        const row = result.rows[0];\n        res.isFirstInDuration = changedPoints === row.points;\n        res.consumedPoints = res.isFirstInDuration ? changedPoints : row.points;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = row.expire ? Math.max(row.expire - Date.now(), 0) : -1;\n        return res;\n    }\n    _query(q) {\n        const prefix = this.tableName.toLowerCase();\n        const queryObj = {\n            name: `${prefix}:${q.name}`,\n            text: q.text,\n            values: q.values\n        };\n        return new Promise((resolve, reject)=>{\n            this._getConnection().then((conn)=>{\n                conn.query(queryObj).then((res)=>{\n                    resolve(res);\n                    this._releaseConnection(conn);\n                }).catch((err)=>{\n                    reject(err);\n                    this._releaseConnection(conn);\n                });\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n    _upsert(key, points, msDuration, forceExpire = false) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        const newExpire = msDuration > 0 ? Date.now() + msDuration : null;\n        const expireQ = forceExpire ? \" $3 \" : ` CASE\n             WHEN ${this._getTableIdentifier()}.expire <= $4 THEN $3\n             ELSE ${this._getTableIdentifier()}.expire\n            END `;\n        return this._query({\n            name: forceExpire ? \"rlflx-upsert-force\" : \"rlflx-upsert\",\n            text: `\n            INSERT INTO ${this._getTableIdentifier()} VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (${this._getTableIdentifier()}.expire <= $4 OR 1=${forceExpire ? 1 : 0}) THEN $2\n                          ELSE ${this._getTableIdentifier()}.points + ($2)\n                         END,\n                expire = ${expireQ}\n            RETURNING points, expire;`,\n            values: [\n                key,\n                points,\n                newExpire,\n                Date.now()\n            ]\n        });\n    }\n    _get(rlKey) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        return new Promise((resolve, reject)=>{\n            this._query({\n                name: \"rlflx-get\",\n                text: `\n            SELECT points, expire FROM ${this._getTableIdentifier()} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,\n                values: [\n                    rlKey,\n                    Date.now()\n                ]\n            }).then((res)=>{\n                if (res.rowCount === 0) {\n                    res = null;\n                }\n                resolve(res);\n            }).catch((err)=>{\n                reject(err);\n            });\n        });\n    }\n    _delete(rlKey) {\n        if (!this.tableCreated) {\n            return Promise.reject(Error(\"Table is not created yet\"));\n        }\n        return this._query({\n            name: \"rlflx-delete\",\n            text: `DELETE FROM ${this._getTableIdentifier()} WHERE key = $1`,\n            values: [\n                rlKey\n            ]\n        }).then((res)=>res.rowCount > 0);\n    }\n}\nmodule.exports = RateLimiterPostgres;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclBvc3RncmVzLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLDJCQUEyQkMsbUJBQU9BLENBQUM7QUFDekMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQztBQUUvQixNQUFNRSw0QkFBNEJIO0lBQ2hDOzs7Ozs7Ozs7Ozs7OztHQWNDLEdBQ0RJLFlBQVlDLElBQUksRUFBRUMsS0FBSyxJQUFJLENBQUU7UUFDM0IsS0FBSyxDQUFDRDtRQUVOLElBQUksQ0FBQ0UsTUFBTSxHQUFHRixLQUFLRyxXQUFXO1FBQzlCLElBQUksQ0FBQ0MsVUFBVSxHQUFHSixLQUFLSyxTQUFTO1FBRWhDLElBQUksQ0FBQ0MsU0FBUyxHQUFHTixLQUFLTSxTQUFTO1FBQy9CLElBQUksQ0FBQ0MsVUFBVSxHQUFHUCxLQUFLTyxVQUFVO1FBRWpDLElBQUksQ0FBQ0MscUJBQXFCLEdBQUdSLEtBQUtRLHFCQUFxQjtRQUV2RCxJQUFJLENBQUNDLFlBQVksR0FBR1QsS0FBS1MsWUFBWTtRQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDQSxZQUFZLEVBQUU7WUFDdEIsSUFBSSxDQUFDQyxZQUFZLEdBQ2RDLElBQUksQ0FBQztnQkFDSixJQUFJLENBQUNGLFlBQVksR0FBRztnQkFDcEIsSUFBSSxJQUFJLENBQUNELHFCQUFxQixFQUFFO29CQUM5QixJQUFJLENBQUNJLG9CQUFvQjtnQkFDM0I7Z0JBQ0EsSUFBSSxPQUFPWCxPQUFPLFlBQVk7b0JBQzVCQTtnQkFDRjtZQUNGLEdBQ0NZLEtBQUssQ0FBQyxDQUFDQztnQkFDTixJQUFJLE9BQU9iLE9BQU8sWUFBWTtvQkFDNUJBLEdBQUdhO2dCQUNMLE9BQU87b0JBQ0wsTUFBTUE7Z0JBQ1I7WUFDRjtRQUNKLE9BQU87WUFDTCxJQUFJLElBQUksQ0FBQ04scUJBQXFCLEVBQUU7Z0JBQzlCLElBQUksQ0FBQ0ksb0JBQW9CO1lBQzNCO1lBQ0EsSUFBSSxP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TSxDQUFDO3VDQUN3QixFQUFFLElBQUksQ0FBQ1AsbUJBQW1CLEdBQUcsb0RBQW9ELENBQUM7Z0JBQ2pIUSxRQUFRO29CQUFDZ0M7b0JBQU8zQixLQUFLQyxHQUFHO2lCQUFHO1lBQzdCLEdBQ0dsQixJQUFJLENBQUMsQ0FBQytDO2dCQUNMLElBQUlBLElBQUlvQixRQUFRLEtBQUssR0FBRztvQkFDdEJwQixNQUFNO2dCQUNSO2dCQUNBdkMsUUFBUXVDO1lBQ1YsR0FDQzdDLEtBQUssQ0FBQyxDQUFDQztnQkFDTjBCLE9BQU8xQjtZQUNUO1FBQ0o7SUFDRjtJQUVBaUUsUUFBUXhCLEtBQUssRUFBRTtRQUNiLElBQUksQ0FBQyxJQUFJLENBQUM5QyxZQUFZLEVBQUU7WUFDdEIsT0FBT1MsUUFBUXNCLE1BQU0sQ0FBQ00sTUFBTTtRQUM5QjtRQUVBLE9BQU8sSUFBSSxDQUFDdEIsTUFBTSxDQUFDO1lBQ2pCSCxNQUFNO1lBQ05DLE1BQU0sQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDUCxtQkFBbUIsR0FBRyxlQUFlLENBQUM7WUFDaEVRLFFBQVE7Z0JBQUNnQzthQUFNO1FBQ2pCLEdBQ0c1QyxJQUFJLENBQUMrQyxDQUFBQSxNQUFPQSxJQUFJb0IsUUFBUSxHQUFHO0lBQ2hDO0FBQ0Y7QUFFQUUsT0FBT0MsT0FBTyxHQUFHbkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJQb3N0Z3Jlcy5qcz82ZTA5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0Jyk7XG5jb25zdCBSYXRlTGltaXRlclJlcyA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJSZXMnKTtcblxuY2xhc3MgUmF0ZUxpbWl0ZXJQb3N0Z3JlcyBleHRlbmRzIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCB7XG4gIC8qKlxuICAgKiBAY2FsbGJhY2sgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtPYmplY3R9IGVyclxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjYlxuICAgKiBEZWZhdWx0cyB7XG4gICAqICAgLi4uIHNlZSBvdGhlciBpbiBSYXRlTGltaXRlclN0b3JlQWJzdHJhY3RcbiAgICpcbiAgICogICBzdG9yZUNsaWVudDogcG9zdGdyZXNDbGllbnQsXG4gICAqICAgc3RvcmVUeXBlOiAna25leCcsIC8vIHJlcXVpcmVkIG9ubHkgZm9yIEtuZXggaW5zdGFuY2VcbiAgICogICB0YWJsZU5hbWU6ICdzdHJpbmcnLFxuICAgKiAgIHNjaGVtYU5hbWU6ICdzdHJpbmcnLCAvLyBvcHRpb25hbFxuICAgKiB9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzLCBjYiA9IG51bGwpIHtcbiAgICBzdXBlcihvcHRzKTtcblxuICAgIHRoaXMuY2xpZW50ID0gb3B0cy5zdG9yZUNsaWVudDtcbiAgICB0aGlzLmNsaWVudFR5cGUgPSBvcHRzLnN0b3JlVHlwZTtcblxuICAgIHRoaXMudGFibGVOYW1lID0gb3B0cy50YWJsZU5hbWU7XG4gICAgdGhpcy5zY2hlbWFOYW1lID0gb3B0cy5zY2hlbWFOYW1lO1xuXG4gICAgdGhpcy5jbGVhckV4cGlyZWRCeVRpbWVvdXQgPSBvcHRzLmNsZWFyRXhwaXJlZEJ5VGltZW91dDtcblxuICAgIHRoaXMudGFibGVDcmVhdGVkID0gb3B0cy50YWJsZUNyZWF0ZWQ7XG4gICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgdGhpcy5fY3JlYXRlVGFibGUoKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy50YWJsZUNyZWF0ZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGlzLmNsZWFyRXhwaXJlZEJ5VGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5fY2xlYXJFeHBpcmVkSG91ckFnbygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYihlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2xlYXJFeHBpcmVkQnlUaW1lb3V0KSB7XG4gICAgICAgIHRoaXMuX2NsZWFyRXhwaXJlZEhvdXJBZ28oKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZ2V0VGFibGVJZGVudGlmaWVyKCkge1xuICAgIHJldHVybiB0aGlzLnNjaGVtYU5hbWUgPyBgXCIke3RoaXMuc2NoZW1hTmFtZX1cIi5cIiR7dGhpcy50YWJsZU5hbWV9XCJgIDogYFwiJHt0aGlzLnRhYmxlTmFtZX1cImA7XG4gIH1cblxuICBjbGVhckV4cGlyZWQoZXhwaXJlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBxID0ge1xuICAgICAgICBuYW1lOiAncmxmbHgtY2xlYXItZXhwaXJlZCcsXG4gICAgICAgIHRleHQ6IGBERUxFVEUgRlJPTSAke3RoaXMuX2dldFRhYmxlSWRlbnRpZmllcigpfSBXSEVSRSBleHBpcmUgPCAkMWAsXG4gICAgICAgIHZhbHVlczogW2V4cGlyZV0sXG4gICAgICB9O1xuICAgICAgdGhpcy5fcXVlcnkocSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAvLyBEZWxldGluZyBleHBpcmVkIHF1ZXJ5IGlzIG5vdCBjcml0aWNhbFxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGFsbCByb3dzIGV4cGlyZWQgMSBob3VyIGFnbyBvbmNlIHBlciA1IG1pbnV0ZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jbGVhckV4cGlyZWRIb3VyQWdvKCkge1xuICAgIGlmICh0aGlzLl9jbGVhckV4cGlyZWRUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jbGVhckV4cGlyZWRUaW1lb3V0SWQpO1xuICAgIH1cbiAgICB0aGlzLl9jbGVhckV4cGlyZWRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJFeHBpcmVkKERhdGUubm93KCkgLSAzNjAwMDAwKSAvLyBOZXZlciByZWplY3RlZFxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2xlYXJFeHBpcmVkSG91ckFnbygpO1xuICAgICAgICB9KTtcbiAgICB9LCAzMDAwMDApO1xuICAgIHRoaXMuX2NsZWFyRXhwaXJlZFRpbWVvdXRJZC51bnJlZigpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm4gUHJvbWlzZTxhbnk+XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0Q29ubmVjdGlvbigpIHtcbiAgICBzd2l0Y2ggKHRoaXMuY2xpZW50VHlwZSkge1xuICAgICAgY2FzZSAncG9vbCc6XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jbGllbnQpO1xuICAgICAgY2FzZSAnc2VxdWVsaXplJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50LmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNhc2UgJ2tuZXgnOlxuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuY2xpZW50LmFjcXVpcmVDb25uZWN0aW9uKCk7XG4gICAgICBjYXNlICd0eXBlb3JtJzpcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNsaWVudC5kcml2ZXIubWFzdGVyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jbGllbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9yZWxlYXNlQ29ubmVjdGlvbihjb25uKSB7XG4gICAgc3dpdGNoICh0aGlzLmNsaWVudFR5cGUpIHtcbiAgICAgIGNhc2UgJ3Bvb2wnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJ3NlcXVlbGl6ZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5jb25uZWN0aW9uTWFuYWdlci5yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgIGNhc2UgJ2tuZXgnOlxuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuY2xpZW50LnJlbGVhc2VDb25uZWN0aW9uKGNvbm4pO1xuICAgICAgY2FzZSAndHlwZW9ybSc6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY3JlYXRlVGFibGUoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3F1ZXJ5KHtcbiAgICAgICAgdGV4dDogdGhpcy5fZ2V0Q3JlYXRlVGFibGVTdG10KCksXG4gICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIuY29kZSA9PT0gJzIzNTA1Jykge1xuICAgICAgICAgICAgLy8gRXJyb3I6IGR1cGxpY2F0ZSBrZXkgdmFsdWUgdmlvbGF0ZXMgdW5pcXVlIGNvbnN0cmFpbnQgXCJwZ190eXBlX3R5cG5hbWVfbnNwX2luZGV4XCJcbiAgICAgICAgICAgIC8vIFBvc3RncmVzIGRvZXNuJ3QgaGFuZGxlIGNvbmN1cnJlbnQgdGFibGUgY3JlYXRpb25cbiAgICAgICAgICAgIC8vIEl0IGlzIHN1cHBvc2VkLCB0aGF0IHRhYmxlIGlzIGNyZWF0ZWQgYnkgYW5vdGhlciB3b3JrZXJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9nZXRDcmVhdGVUYWJsZVN0bXQoKSB7XG4gICAgcmV0dXJuIGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyAke3RoaXMuX2dldFRhYmxlSWRlbnRpZmllcigpfSAoXG4gICAgICBrZXkgdmFyY2hhcigyNTUpIFBSSU1BUlkgS0VZLFxuICAgICAgcG9pbnRzIGludGVnZXIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgICAgZXhwaXJlIGJpZ2ludFxuICAgICk7YDtcbiAgfVxuXG4gIGdldCBjbGllbnRUeXBlKCkge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnRUeXBlO1xuICB9XG5cbiAgc2V0IGNsaWVudFR5cGUodmFsdWUpIHtcbiAgICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSB0aGlzLmNsaWVudC5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjb25zdHJ1Y3Rvck5hbWUgPT09ICdDbGllbnQnKSB7XG4gICAgICAgIHZhbHVlID0gJ2NsaWVudCc7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjb25zdHJ1Y3Rvck5hbWUgPT09ICdQb29sJyB8fFxuICAgICAgICBjb25zdHJ1Y3Rvck5hbWUgPT09ICdCb3VuZFBvb2wnXG4gICAgICApIHtcbiAgICAgICAgdmFsdWUgPSAncG9vbCc7XG4gICAgICB9IGVsc2UgaWYgKGNvbnN0cnVjdG9yTmFtZSA9PT0gJ1NlcXVlbGl6ZScpIHtcbiAgICAgICAgdmFsdWUgPSAnc2VxdWVsaXplJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RvcmVUeXBlIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2xpZW50VHlwZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBnZXQgdGFibGVOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl90YWJsZU5hbWU7XG4gIH1cblxuICBzZXQgdGFibGVOYW1lKHZhbHVlKSB7XG4gICAgdGhpcy5fdGFibGVOYW1lID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IHRoaXMua2V5UHJlZml4IDogdmFsdWU7XG4gIH1cblxuICBnZXQgc2NoZW1hTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NoZW1hTmFtZTtcbiAgfVxuXG4gIHNldCBzY2hlbWFOYW1lKHZhbHVlKSB7XG4gICAgdGhpcy5fc2NoZW1hTmFtZSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHRhYmxlQ3JlYXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFibGVDcmVhdGVkO1xuICB9XG5cbiAgc2V0IHRhYmxlQ3JlYXRlZCh2YWx1ZSkge1xuICAgIHRoaXMuX3RhYmxlQ3JlYXRlZCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyBmYWxzZSA6ICEhdmFsdWU7XG4gIH1cblxuICBnZXQgY2xlYXJFeHBpcmVkQnlUaW1lb3V0KCkge1xuICAgIHJldHVybiB0aGlzLl9jbGVhckV4cGlyZWRCeVRpbWVvdXQ7XG4gIH1cblxuICBzZXQgY2xlYXJFeHBpcmVkQnlUaW1lb3V0KHZhbHVlKSB7XG4gICAgdGhpcy5fY2xlYXJFeHBpcmVkQnlUaW1lb3V0ID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBCb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIF9nZXRSYXRlTGltaXRlclJlcyhybEtleSwgY2hhbmdlZFBvaW50cywgcmVzdWx0KSB7XG4gICAgY29uc3QgcmVzID0gbmV3IFJhdGVMaW1pdGVyUmVzKCk7XG4gICAgY29uc3Qgcm93ID0gcmVzdWx0LnJvd3NbMF07XG5cbiAgICByZXMuaXNGaXJzdEluRHVyYXRpb24gPSBjaGFuZ2VkUG9pbnRzID09PSByb3cucG9pbnRzO1xuICAgIHJlcy5jb25zdW1lZFBvaW50cyA9IHJlcy5pc0ZpcnN0SW5EdXJhdGlvbiA/IGNoYW5nZWRQb2ludHMgOiByb3cucG9pbnRzO1xuXG4gICAgcmVzLnJlbWFpbmluZ1BvaW50cyA9IE1hdGgubWF4KHRoaXMucG9pbnRzIC0gcmVzLmNvbnN1bWVkUG9pbnRzLCAwKTtcbiAgICByZXMubXNCZWZvcmVOZXh0ID0gcm93LmV4cGlyZVxuICAgICAgPyBNYXRoLm1heChyb3cuZXhwaXJlIC0gRGF0ZS5ub3coKSwgMClcbiAgICAgIDogLTE7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgX3F1ZXJ5KHEpIHtcbiAgICBjb25zdCBwcmVmaXggPSB0aGlzLnRhYmxlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHF1ZXJ5T2JqID0geyBuYW1lOiBgJHtwcmVmaXh9OiR7cS5uYW1lfWAsIHRleHQ6IHEudGV4dCwgdmFsdWVzOiBxLnZhbHVlcyB9O1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9nZXRDb25uZWN0aW9uKClcbiAgICAgICAgLnRoZW4oKGNvbm4pID0+IHtcbiAgICAgICAgICBjb25uLnF1ZXJ5KHF1ZXJ5T2JqKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VDb25uZWN0aW9uKGNvbm4pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB0aGlzLl9yZWxlYXNlQ29ubmVjdGlvbihjb25uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF91cHNlcnQoa2V5LCBwb2ludHMsIG1zRHVyYXRpb24sIGZvcmNlRXhwaXJlID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMudGFibGVDcmVhdGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoJ1RhYmxlIGlzIG5vdCBjcmVhdGVkIHlldCcpKTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdFeHBpcmUgPSBtc0R1cmF0aW9uID4gMCA/IERhdGUubm93KCkgKyBtc0R1cmF0aW9uIDogbnVsbDtcbiAgICBjb25zdCBleHBpcmVRID0gZm9yY2VFeHBpcmVcbiAgICAgID8gJyAkMyAnXG4gICAgICA6IGAgQ0FTRVxuICAgICAgICAgICAgIFdIRU4gJHt0aGlzLl9nZXRUYWJsZUlkZW50aWZpZXIoKX0uZXhwaXJlIDw9ICQ0IFRIRU4gJDNcbiAgICAgICAgICAgICBFTFNFICR7dGhpcy5fZ2V0VGFibGVJZGVudGlmaWVyKCl9LmV4cGlyZVxuICAgICAgICAgICAgRU5EIGA7XG5cbiAgICByZXR1cm4gdGhpcy5fcXVlcnkoe1xuICAgICAgbmFtZTogZm9yY2VFeHBpcmUgPyAncmxmbHgtdXBzZXJ0LWZvcmNlJyA6ICdybGZseC11cHNlcnQnLFxuICAgICAgdGV4dDogYFxuICAgICAgICAgICAgSU5TRVJUIElOVE8gJHt0aGlzLl9nZXRUYWJsZUlkZW50aWZpZXIoKX0gVkFMVUVTICgkMSwgJDIsICQzKVxuICAgICAgICAgICAgICBPTiBDT05GTElDVChrZXkpIERPIFVQREFURSBTRVRcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBDQVNFXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFdIRU4gKCR7dGhpcy5fZ2V0VGFibGVJZGVudGlmaWVyKCl9LmV4cGlyZSA8PSAkNCBPUiAxPSR7Zm9yY2VFeHBpcmUgPyAxIDogMH0pIFRIRU4gJDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRUxTRSAke3RoaXMuX2dldFRhYmxlSWRlbnRpZmllcigpfS5wb2ludHMgKyAoJDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgRU5ELFxuICAgICAgICAgICAgICAgIGV4cGlyZSA9ICR7ZXhwaXJlUX1cbiAgICAgICAgICAgIFJFVFVSTklORyBwb2ludHMsIGV4cGlyZTtgLFxuICAgICAgdmFsdWVzOiBba2V5LCBwb2ludHMsIG5ld0V4cGlyZSwgRGF0ZS5ub3coKV0sXG4gICAgfSk7XG4gIH1cblxuICBfZ2V0KHJsS2V5KSB7XG4gICAgaWYgKCF0aGlzLnRhYmxlQ3JlYXRlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKCdUYWJsZSBpcyBub3QgY3JlYXRlZCB5ZXQnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3F1ZXJ5KHtcbiAgICAgICAgbmFtZTogJ3JsZmx4LWdldCcsXG4gICAgICAgIHRleHQ6IGBcbiAgICAgICAgICAgIFNFTEVDVCBwb2ludHMsIGV4cGlyZSBGUk9NICR7dGhpcy5fZ2V0VGFibGVJZGVudGlmaWVyKCl9IFdIRVJFIGtleSA9ICQxIEFORCAoZXhwaXJlID4gJDIgT1IgZXhwaXJlIElTIE5VTEwpO2AsXG4gICAgICAgIHZhbHVlczogW3JsS2V5LCBEYXRlLm5vdygpXSxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzLnJvd0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXMgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2RlbGV0ZShybEtleSkge1xuICAgIGlmICghdGhpcy50YWJsZUNyZWF0ZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcignVGFibGUgaXMgbm90IGNyZWF0ZWQgeWV0JykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9xdWVyeSh7XG4gICAgICBuYW1lOiAncmxmbHgtZGVsZXRlJyxcbiAgICAgIHRleHQ6IGBERUxFVEUgRlJPTSAke3RoaXMuX2dldFRhYmxlSWRlbnRpZmllcigpfSBXSEVSRSBrZXkgPSAkMWAsXG4gICAgICB2YWx1ZXM6IFtybEtleV0sXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMucm93Q291bnQgPiAwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyUG9zdGdyZXM7XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwicmVxdWlyZSIsIlJhdGVMaW1pdGVyUmVzIiwiUmF0ZUxpbWl0ZXJQb3N0Z3JlcyIsImNvbnN0cnVjdG9yIiwib3B0cyIsImNiIiwiY2xpZW50Iiwic3RvcmVDbGllbnQiLCJjbGllbnRUeXBlIiwic3RvcmVUeXBlIiwidGFibGVOYW1lIiwic2NoZW1hTmFtZSIsImNsZWFyRXhwaXJlZEJ5VGltZW91dCIsInRhYmxlQ3JlYXRlZCIsIl9jcmVhdGVUYWJsZSIsInRoZW4iLCJfY2xlYXJFeHBpcmVkSG91ckFnbyIsImNhdGNoIiwiZXJyIiwiX2dldFRhYmxlSWRlbnRpZmllciIsImNsZWFyRXhwaXJlZCIsImV4cGlyZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicSIsIm5hbWUiLCJ0ZXh0IiwidmFsdWVzIiwiX3F1ZXJ5IiwiX2NsZWFyRXhwaXJlZFRpbWVvdXRJZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJEYXRlIiwibm93IiwidW5yZWYiLCJfZ2V0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb25NYW5hZ2VyIiwiZ2V0Q29ubmVjdGlvbiIsImFjcXVpcmVDb25uZWN0aW9uIiwiZHJpdmVyIiwibWFzdGVyIiwiX3JlbGVhc2VDb25uZWN0aW9uIiwiY29ubiIsInJlbGVhc2VDb25uZWN0aW9uIiwicmVqZWN0IiwiX2dldENyZWF0ZVRhYmxlU3RtdCIsImNvZGUiLCJfY2xpZW50VHlwZSIsInZhbHVlIiwiY29uc3RydWN0b3JOYW1lIiwiRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIl90YWJsZU5hbWUiLCJrZXlQcmVmaXgiLCJfc2NoZW1hTmFtZSIsIl90YWJsZUNyZWF0ZWQiLCJfY2xlYXJFeHBpcmVkQnlUaW1lb3V0IiwiQm9vbGVhbiIsIl9nZXRSYXRlTGltaXRlclJlcyIsInJsS2V5IiwiY2hhbmdlZFBvaW50cyIsInJlc3VsdCIsInJlcyIsInJvdyIsInJvd3MiLCJpc0ZpcnN0SW5EdXJhdGlvbiIsInBvaW50cyIsImNvbnN1bWVkUG9pbnRzIiwicmVtYWluaW5nUG9pbnRzIiwiTWF0aCIsIm1heCIsIm1zQmVmb3JlTmV4dCIsInByZWZpeCIsInF1ZXJ5T2JqIiwicXVlcnkiLCJfdXBzZXJ0Iiwia2V5IiwibXNEdXJhdGlvbiIsImZvcmNlRXhwaXJlIiwibmV3RXhwaXJlIiwiZXhwaXJlUSIsIl9nZXQiLCJyb3dDb3VudCIsIl9kZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPostgres.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPrisma.js":
/*!*********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterPrisma.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nclass RateLimiterPrisma extends RateLimiterStoreAbstract {\n    /**\n   * Constructor for the rate limiter\n   * @param {Object} opts - Options for the rate limiter\n   */ constructor(opts){\n        super(opts);\n        this.modelName = opts.tableName || \"RateLimiterFlexible\";\n        this.prismaClient = opts.storeClient;\n        this.clearExpiredByTimeout = opts.clearExpiredByTimeout || true;\n        if (!this.prismaClient) {\n            throw new Error(\"Prisma client is not provided\");\n        }\n        if (this.clearExpiredByTimeout) {\n            this._clearExpiredHourAgo();\n        }\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        const res = new RateLimiterRes();\n        let doc = result;\n        res.isFirstInDuration = doc.points === changedPoints;\n        res.consumedPoints = doc.points;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = doc.expire !== null ? Math.max(new Date(doc.expire).getTime() - Date.now(), 0) : -1;\n        return res;\n    }\n    _upsert(key, points, msDuration, forceExpire = false) {\n        if (!this.prismaClient) {\n            return Promise.reject(new Error(\"Prisma client is not established\"));\n        }\n        const now = new Date();\n        const newExpire = msDuration > 0 ? new Date(now.getTime() + msDuration) : null;\n        return this.prismaClient.$transaction(async (prisma)=>{\n            const existingRecord = await prisma[this.modelName].findFirst({\n                where: {\n                    key: key\n                }\n            });\n            if (existingRecord) {\n                // Determine if we should update the expire field\n                const shouldUpdateExpire = forceExpire || !existingRecord.expire || existingRecord.expire <= now || newExpire === null;\n                return prisma[this.modelName].update({\n                    where: {\n                        key: key\n                    },\n                    data: {\n                        points: !shouldUpdateExpire ? existingRecord.points + points : points,\n                        ...shouldUpdateExpire && {\n                            expire: newExpire\n                        }\n                    }\n                });\n            } else {\n                return prisma[this.modelName].create({\n                    data: {\n                        key: key,\n                        points: points,\n                        expire: newExpire\n                    }\n                });\n            }\n        });\n    }\n    _get(rlKey) {\n        if (!this.prismaClient) {\n            return Promise.reject(new Error(\"Prisma client is not established\"));\n        }\n        return this.prismaClient[this.modelName].findFirst({\n            where: {\n                AND: [\n                    {\n                        key: rlKey\n                    },\n                    {\n                        OR: [\n                            {\n                                expire: {\n                                    gt: new Date()\n                                }\n                            },\n                            {\n                                expire: null\n                            }\n                        ]\n                    }\n                ]\n            }\n        });\n    }\n    _delete(rlKey) {\n        if (!this.prismaClient) {\n            return Promise.reject(new Error(\"Prisma client is not established\"));\n        }\n        return this.prismaClient[this.modelName].deleteMany({\n            where: {\n                key: rlKey\n            }\n        }).then((res)=>res.count > 0);\n    }\n    _clearExpiredHourAgo() {\n        if (this._clearExpiredTimeoutId) {\n            clearTimeout(this._clearExpiredTimeoutId);\n        }\n        this._clearExpiredTimeoutId = setTimeout(async ()=>{\n            await this.prismaClient[this.modelName].deleteMany({\n                where: {\n                    expire: {\n                        lt: new Date(Date.now() - 3600000)\n                    }\n                }\n            });\n            this._clearExpiredHourAgo();\n        }, 300000); // Clear every 5 minutes\n        this._clearExpiredTimeoutId.unref();\n    }\n}\nmodule.exports = RateLimiterPrisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclByaXNtYS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSwyQkFBMkJDLG1CQUFPQSxDQUFDO0FBQ3pDLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUM7QUFFL0IsTUFBTUUsMEJBQTBCSDtJQUM5Qjs7O0dBR0MsR0FDREksWUFBWUMsSUFBSSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFFTixJQUFJLENBQUNDLFNBQVMsR0FBR0QsS0FBS0UsU0FBUyxJQUFJO1FBQ25DLElBQUksQ0FBQ0MsWUFBWSxHQUFHSCxLQUFLSSxXQUFXO1FBQ3BDLElBQUksQ0FBQ0MscUJBQXFCLEdBQUdMLEtBQUtLLHFCQUFxQixJQUFJO1FBRTNELElBQUksQ0FBQyxJQUFJLENBQUNGLFlBQVksRUFBRTtZQUN0QixNQUFNLElBQUlHLE1BQU07UUFDbEI7UUFFQSxJQUFJLElBQUksQ0FBQ0QscUJBQXFCLEVBQUU7WUFDOUIsSUFBSSxDQUFDRSxvQkFBb0I7UUFDM0I7SUFDRjtJQUVBQyxtQkFBbUJDLEtBQUssRUFBRUMsYUFBYSxFQUFFQyxNQUFNLEVBQUU7UUFDL0MsTUFBTUMsTUFBTSxJQUFJZjtRQUVoQixJQUFJZ0IsTUFBTUY7UUFFVkMsSUFBSUUsaUJBQWlCLEdBQUdELElBQUlFLE1BQU0sS0FBS0w7UUFDdkNFLElBQUlJLGNBQWMsR0FBR0gsSUFBSUUsTUFBTTtRQUUvQkgsSUFBSUssZUFBZSxHQUFHQyxLQUFLQyxHQUFHLENBQUMsSUFBSSxDQUFDSixNQUFNLEdBQUdILElBQUlJLGNBQWMsRUFBRTtRQUNqRUosSUFBSVEsWUFBWSxHQUFHUCxJQUFJUSxNQUFNLEtBQUssT0FDOUJILEtBQUtDLEdBQUcsQ0FBQyxJQUFJRyxLQUFLVCxJQUFJUSxNQUFNLEVBQUVFLE9BQU8sS0FBS0QsS0FBS0UsR0FBRyxJQUFJLEtBQ3RELENBQUM7UUFFTCxPQUFPWjtJQUNUO0lBRUFhLFFBQVFD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QjtRQUNwQyxJQUFJLENBQUMwQyxzQkFBc0IsQ0FBQ0ksS0FBSztJQUNuQztBQUNGO0FBRUFDLE9BQU9DLE9BQU8sR0FBR3pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvbGliL1JhdGVMaW1pdGVyUHJpc21hLmpzP2RlMGQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0ID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclN0b3JlQWJzdHJhY3QnKTtcbmNvbnN0IFJhdGVMaW1pdGVyUmVzID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclJlcycpO1xuXG5jbGFzcyBSYXRlTGltaXRlclByaXNtYSBleHRlbmRzIFJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIHJhdGUgbGltaXRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMgZm9yIHRoZSByYXRlIGxpbWl0ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBzdXBlcihvcHRzKTtcblxuICAgIHRoaXMubW9kZWxOYW1lID0gb3B0cy50YWJsZU5hbWUgfHwgJ1JhdGVMaW1pdGVyRmxleGlibGUnO1xuICAgIHRoaXMucHJpc21hQ2xpZW50ID0gb3B0cy5zdG9yZUNsaWVudDtcbiAgICB0aGlzLmNsZWFyRXhwaXJlZEJ5VGltZW91dCA9IG9wdHMuY2xlYXJFeHBpcmVkQnlUaW1lb3V0IHx8IHRydWU7XG5cbiAgICBpZiAoIXRoaXMucHJpc21hQ2xpZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ByaXNtYSBjbGllbnQgaXMgbm90IHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2xlYXJFeHBpcmVkQnlUaW1lb3V0KSB7XG4gICAgICB0aGlzLl9jbGVhckV4cGlyZWRIb3VyQWdvKCk7XG4gICAgfVxuICB9XG5cbiAgX2dldFJhdGVMaW1pdGVyUmVzKHJsS2V5LCBjaGFuZ2VkUG9pbnRzLCByZXN1bHQpIHtcbiAgICBjb25zdCByZXMgPSBuZXcgUmF0ZUxpbWl0ZXJSZXMoKTtcblxuICAgIGxldCBkb2MgPSByZXN1bHQ7XG5cbiAgICByZXMuaXNGaXJzdEluRHVyYXRpb24gPSBkb2MucG9pbnRzID09PSBjaGFuZ2VkUG9pbnRzO1xuICAgIHJlcy5jb25zdW1lZFBvaW50cyA9IGRvYy5wb2ludHM7XG5cbiAgICByZXMucmVtYWluaW5nUG9pbnRzID0gTWF0aC5tYXgodGhpcy5wb2ludHMgLSByZXMuY29uc3VtZWRQb2ludHMsIDApO1xuICAgIHJlcy5tc0JlZm9yZU5leHQgPSBkb2MuZXhwaXJlICE9PSBudWxsXG4gICAgICA/IE1hdGgubWF4KG5ldyBEYXRlKGRvYy5leHBpcmUpLmdldFRpbWUoKSAtIERhdGUubm93KCksIDApXG4gICAgICA6IC0xO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIF91cHNlcnQoa2V5LCBwb2ludHMsIG1zRHVyYXRpb24sIGZvcmNlRXhwaXJlID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMucHJpc21hQ2xpZW50KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcmlzbWEgY2xpZW50IGlzIG5vdCBlc3RhYmxpc2hlZCcpKTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG5ld0V4cGlyZSA9IG1zRHVyYXRpb24gPiAwID8gbmV3IERhdGUobm93LmdldFRpbWUoKSArIG1zRHVyYXRpb24pIDogbnVsbDtcblxuICAgIHJldHVybiB0aGlzLnByaXNtYUNsaWVudC4kdHJhbnNhY3Rpb24oYXN5bmMgKHByaXNtYSkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdSZWNvcmQgPSBhd2FpdCBwcmlzbWFbdGhpcy5tb2RlbE5hbWVdLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGtleToga2V5IH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkKSB7XG4gICAgICAgIC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgdXBkYXRlIHRoZSBleHBpcmUgZmllbGRcbiAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlRXhwaXJlID0gZm9yY2VFeHBpcmUgfHwgIWV4aXN0aW5nUmVjb3JkLmV4cGlyZSB8fCBleGlzdGluZ1JlY29yZC5leHBpcmUgPD0gbm93IHx8IG5ld0V4cGlyZSA9PT0gbnVsbDtcblxuICAgICAgICByZXR1cm4gcHJpc21hW3RoaXMubW9kZWxOYW1lXS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGtleToga2V5IH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcG9pbnRzOiAhc2hvdWxkVXBkYXRlRXhwaXJlID8gZXhpc3RpbmdSZWNvcmQucG9pbnRzICsgcG9pbnRzIDogcG9pbnRzLFxuICAgICAgICAgICAgLi4uKHNob3VsZFVwZGF0ZUV4cGlyZSAmJiB7IGV4cGlyZTogbmV3RXhwaXJlIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHByaXNtYVt0aGlzLm1vZGVsTmFtZV0uY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHBvaW50czogcG9pbnRzLFxuICAgICAgICAgICAgZXhwaXJlOiBuZXdFeHBpcmUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0KHJsS2V5KSB7XG4gICAgaWYgKCF0aGlzLnByaXNtYUNsaWVudCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUHJpc21hIGNsaWVudCBpcyBub3QgZXN0YWJsaXNoZWQnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJpc21hQ2xpZW50W3RoaXMubW9kZWxOYW1lXS5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgQU5EOiBbXG4gICAgICAgICAgeyBrZXk6IHJsS2V5IH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBleHBpcmU6IHsgZ3Q6IG5ldyBEYXRlKCkgfSB9LFxuICAgICAgICAgICAgICB7IGV4cGlyZTogbnVsbCB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIF9kZWxldGUocmxLZXkpIHtcbiAgICBpZiAoIXRoaXMucHJpc21hQ2xpZW50KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQcmlzbWEgY2xpZW50IGlzIG5vdCBlc3RhYmxpc2hlZCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcmlzbWFDbGllbnRbdGhpcy5tb2RlbE5hbWVdLmRlbGV0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAga2V5OiBybEtleSxcbiAgICAgIH0sXG4gICAgfSkudGhlbihyZXMgPT4gcmVzLmNvdW50ID4gMCk7XG4gIH1cblxuICBfY2xlYXJFeHBpcmVkSG91ckFnbygpIHtcbiAgICBpZiAodGhpcy5fY2xlYXJFeHBpcmVkVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fY2xlYXJFeHBpcmVkVGltZW91dElkKTtcbiAgICB9XG4gICAgdGhpcy5fY2xlYXJFeHBpcmVkVGltZW91dElkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByaXNtYUNsaWVudFt0aGlzLm1vZGVsTmFtZV0uZGVsZXRlTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgZXhwaXJlOiB7XG4gICAgICAgICAgICBsdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDM2MDAwMDApLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2NsZWFyRXhwaXJlZEhvdXJBZ28oKTtcbiAgICB9LCAzMDAwMDApOyAvLyBDbGVhciBldmVyeSA1IG1pbnV0ZXNcbiAgICB0aGlzLl9jbGVhckV4cGlyZWRUaW1lb3V0SWQudW5yZWYoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyUHJpc21hO1xuIl0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyU3RvcmVBYnN0cmFjdCIsInJlcXVpcmUiLCJSYXRlTGltaXRlclJlcyIsIlJhdGVMaW1pdGVyUHJpc21hIiwiY29uc3RydWN0b3IiLCJvcHRzIiwibW9kZWxOYW1lIiwidGFibGVOYW1lIiwicHJpc21hQ2xpZW50Iiwic3RvcmVDbGllbnQiLCJjbGVhckV4cGlyZWRCeVRpbWVvdXQiLCJFcnJvciIsIl9jbGVhckV4cGlyZWRIb3VyQWdvIiwiX2dldFJhdGVMaW1pdGVyUmVzIiwicmxLZXkiLCJjaGFuZ2VkUG9pbnRzIiwicmVzdWx0IiwicmVzIiwiZG9jIiwiaXNGaXJzdEluRHVyYXRpb24iLCJwb2ludHMiLCJjb25zdW1lZFBvaW50cyIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJtc0JlZm9yZU5leHQiLCJleHBpcmUiLCJEYXRlIiwiZ2V0VGltZSIsIm5vdyIsIl91cHNlcnQiLCJrZXkiLCJtc0R1cmF0aW9uIiwiZm9yY2VFeHBpcmUiLCJQcm9taXNlIiwicmVqZWN0IiwibmV3RXhwaXJlIiwiJHRyYW5zYWN0aW9uIiwicHJpc21hIiwiZXhpc3RpbmdSZWNvcmQiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsInNob3VsZFVwZGF0ZUV4cGlyZSIsInVwZGF0ZSIsImRhdGEiLCJjcmVhdGUiLCJfZ2V0IiwiQU5EIiwiT1IiLCJndCIsIl9kZWxldGUiLCJkZWxldGVNYW55IiwidGhlbiIsImNvdW50IiwiX2NsZWFyRXhwaXJlZFRpbWVvdXRJZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJsdCIsInVucmVmIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterPrisma.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterQueue.js":
/*!********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterQueue.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterQueueError = __webpack_require__(/*! ./component/RateLimiterQueueError */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/component/RateLimiterQueueError.js\");\nconst MAX_QUEUE_SIZE = 4294967295;\nconst KEY_DEFAULT = \"limiter\";\nmodule.exports = class RateLimiterQueue {\n    constructor(limiterFlexible, opts = {\n        maxQueueSize: MAX_QUEUE_SIZE\n    }){\n        this._queueLimiters = {\n            KEY_DEFAULT: new RateLimiterQueueInternal(limiterFlexible, opts)\n        };\n        this._limiterFlexible = limiterFlexible;\n        this._maxQueueSize = opts.maxQueueSize;\n    }\n    getTokensRemaining(key = KEY_DEFAULT) {\n        if (this._queueLimiters[key]) {\n            return this._queueLimiters[key].getTokensRemaining();\n        } else {\n            return Promise.resolve(this._limiterFlexible.points);\n        }\n    }\n    removeTokens(tokens, key = KEY_DEFAULT) {\n        if (!this._queueLimiters[key]) {\n            this._queueLimiters[key] = new RateLimiterQueueInternal(this._limiterFlexible, {\n                key,\n                maxQueueSize: this._maxQueueSize\n            });\n        }\n        return this._queueLimiters[key].removeTokens(tokens);\n    }\n};\nclass RateLimiterQueueInternal {\n    constructor(limiterFlexible, opts = {\n        maxQueueSize: MAX_QUEUE_SIZE,\n        key: KEY_DEFAULT\n    }){\n        this._key = opts.key;\n        this._waitTimeout = null;\n        this._queue = [];\n        this._limiterFlexible = limiterFlexible;\n        this._maxQueueSize = opts.maxQueueSize;\n    }\n    getTokensRemaining() {\n        return this._limiterFlexible.get(this._key).then((rlRes)=>{\n            return rlRes !== null ? rlRes.remainingPoints : this._limiterFlexible.points;\n        });\n    }\n    removeTokens(tokens) {\n        const _this = this;\n        return new Promise((resolve, reject)=>{\n            if (tokens > _this._limiterFlexible.points) {\n                reject(new RateLimiterQueueError(`Requested tokens ${tokens} exceeds maximum ${_this._limiterFlexible.points} tokens per interval`));\n                return;\n            }\n            if (_this._queue.length > 0) {\n                _this._queueRequest.call(_this, resolve, reject, tokens);\n            } else {\n                _this._limiterFlexible.consume(_this._key, tokens).then((res)=>{\n                    resolve(res.remainingPoints);\n                }).catch((rej)=>{\n                    if (rej instanceof Error) {\n                        reject(rej);\n                    } else {\n                        _this._queueRequest.call(_this, resolve, reject, tokens);\n                        if (_this._waitTimeout === null) {\n                            _this._waitTimeout = setTimeout(_this._processFIFO.bind(_this), rej.msBeforeNext);\n                        }\n                    }\n                });\n            }\n        });\n    }\n    _queueRequest(resolve, reject, tokens) {\n        const _this = this;\n        if (_this._queue.length < _this._maxQueueSize) {\n            _this._queue.push({\n                resolve,\n                reject,\n                tokens\n            });\n        } else {\n            reject(new RateLimiterQueueError(`Number of requests reached it's maximum ${_this._maxQueueSize}`));\n        }\n    }\n    _processFIFO() {\n        const _this = this;\n        if (_this._waitTimeout !== null) {\n            clearTimeout(_this._waitTimeout);\n            _this._waitTimeout = null;\n        }\n        if (_this._queue.length === 0) {\n            return;\n        }\n        const item = _this._queue.shift();\n        _this._limiterFlexible.consume(_this._key, item.tokens).then((res)=>{\n            item.resolve(res.remainingPoints);\n            _this._processFIFO.call(_this);\n        }).catch((rej)=>{\n            if (rej instanceof Error) {\n                item.reject(rej);\n                _this._processFIFO.call(_this);\n            } else {\n                _this._queue.unshift(item);\n                if (_this._waitTimeout === null) {\n                    _this._waitTimeout = setTimeout(_this._processFIFO.bind(_this), rej.msBeforeNext);\n                }\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclF1ZXVlLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLHdCQUF3QkMsbUJBQU9BLENBQUM7QUFDdEMsTUFBTUMsaUJBQWlCO0FBQ3ZCLE1BQU1DLGNBQWM7QUFFcEJDLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQkMsWUFBWUMsZUFBZSxFQUFFQyxPQUFPO1FBQ2xDQyxjQUFjUjtJQUNoQixDQUFDLENBQUU7UUFDRCxJQUFJLENBQUNTLGNBQWMsR0FBRztZQUNwQlIsYUFBYSxJQUFJUyx5QkFBeUJKLGlCQUFpQkM7UUFDN0Q7UUFDQSxJQUFJLENBQUNJLGdCQUFnQixHQUFHTDtRQUN4QixJQUFJLENBQUNNLGFBQWEsR0FBR0wsS0FBS0MsWUFBWTtJQUN4QztJQUVBSyxtQkFBbUJDLE1BQU1iLFdBQVcsRUFBRTtRQUNwQyxJQUFJLElBQUksQ0FBQ1EsY0FBYyxDQUFDSyxJQUFJLEVBQUU7WUFDNUIsT0FBTyxJQUFJLENBQUNMLGNBQWMsQ0FBQ0ssSUFBSSxDQUFDRCxrQkFBa0I7UUFDcEQsT0FBTztZQUNMLE9BQU9FLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNMLGdCQUFnQixDQUFDTSxNQUFNO1FBQ3JEO0lBQ0Y7SUFFQUMsYUFBYUMsTUFBTSxFQUFFTCxNQUFNYixXQUFXLEVBQUU7UUFDdEMsSUFBSSxDQUFDLElBQUksQ0FBQ1EsY0FBYyxDQUFDSyxJQUFJLEVBQUU7WUFDN0IsSUFBSSxDQUFDTCxjQUFjLENBQUNLLElBQUksR0FBRyxJQUFJSix5QkFDN0IsSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRTtnQkFDckJHO2dCQUNBTixjQUFjLElBQUksQ0FBQ0ksYUFBYTtZQUNsQztRQUNKO1FBRUEsT0FBTyxJQUFJLENBQUNILGNBQWMsQ0FBQ0ssSUFBSSxDQUFDSSxZQUFZLENBQUNDO0lBQy9DO0FBQ0Y7QUFFQSxNQUFNVDtJQUVKTCxZQUFZQyxlQUFlLEVB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LENBQUNDO1lBQ04sSUFBSUEsZUFBZUMsT0FBTztnQkFDeEJPLEtBQUtmLE1BQU0sQ0FBQ087Z0JBQ1pSLE1BQU1XLFlBQVksQ0FBQ1AsSUFBSSxDQUFDSjtZQUMxQixPQUFPO2dCQUNMQSxNQUFNTCxNQUFNLENBQUN1QixPQUFPLENBQUNGO2dCQUNyQixJQUFJaEIsTUFBTU4sWUFBWSxLQUFLLE1BQU07b0JBQy9CTSxNQUFNTixZQUFZLEdBQUdnQixXQUFXVixNQUFNVyxZQUFZLENBQUNDLElBQUksQ0FBQ1osUUFBUVEsSUFBSUssWUFBWTtnQkFDbEY7WUFDRjtRQUNGO0lBQ0o7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclF1ZXVlLmpzP2EzZTQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yID0gcmVxdWlyZSgnLi9jb21wb25lbnQvUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yJylcbmNvbnN0IE1BWF9RVUVVRV9TSVpFID0gNDI5NDk2NzI5NTtcbmNvbnN0IEtFWV9ERUZBVUxUID0gJ2xpbWl0ZXInO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFJhdGVMaW1pdGVyUXVldWUge1xuICBjb25zdHJ1Y3RvcihsaW1pdGVyRmxleGlibGUsIG9wdHMgPSB7XG4gICAgbWF4UXVldWVTaXplOiBNQVhfUVVFVUVfU0laRSxcbiAgfSkge1xuICAgIHRoaXMuX3F1ZXVlTGltaXRlcnMgPSB7XG4gICAgICBLRVlfREVGQVVMVDogbmV3IFJhdGVMaW1pdGVyUXVldWVJbnRlcm5hbChsaW1pdGVyRmxleGlibGUsIG9wdHMpXG4gICAgfTtcbiAgICB0aGlzLl9saW1pdGVyRmxleGlibGUgPSBsaW1pdGVyRmxleGlibGU7XG4gICAgdGhpcy5fbWF4UXVldWVTaXplID0gb3B0cy5tYXhRdWV1ZVNpemVcbiAgfVxuXG4gIGdldFRva2Vuc1JlbWFpbmluZyhrZXkgPSBLRVlfREVGQVVMVCkge1xuICAgIGlmICh0aGlzLl9xdWV1ZUxpbWl0ZXJzW2tleV0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9xdWV1ZUxpbWl0ZXJzW2tleV0uZ2V0VG9rZW5zUmVtYWluaW5nKClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9saW1pdGVyRmxleGlibGUucG9pbnRzKVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVRva2Vucyh0b2tlbnMsIGtleSA9IEtFWV9ERUZBVUxUKSB7XG4gICAgaWYgKCF0aGlzLl9xdWV1ZUxpbWl0ZXJzW2tleV0pIHtcbiAgICAgIHRoaXMuX3F1ZXVlTGltaXRlcnNba2V5XSA9IG5ldyBSYXRlTGltaXRlclF1ZXVlSW50ZXJuYWwoXG4gICAgICAgIHRoaXMuX2xpbWl0ZXJGbGV4aWJsZSwge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBtYXhRdWV1ZVNpemU6IHRoaXMuX21heFF1ZXVlU2l6ZSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcXVldWVMaW1pdGVyc1trZXldLnJlbW92ZVRva2Vucyh0b2tlbnMpXG4gIH1cbn07XG5cbmNsYXNzIFJhdGVMaW1pdGVyUXVldWVJbnRlcm5hbCB7XG5cbiAgY29uc3RydWN0b3IobGltaXRlckZsZXhpYmxlLCBvcHRzID0ge1xuICAgIG1heFF1ZXVlU2l6ZTogTUFYX1FVRVVFX1NJWkUsXG4gICAga2V5OiBLRVlfREVGQVVMVCxcbiAgfSkge1xuICAgIHRoaXMuX2tleSA9IG9wdHMua2V5O1xuICAgIHRoaXMuX3dhaXRUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIHRoaXMuX2xpbWl0ZXJGbGV4aWJsZSA9IGxpbWl0ZXJGbGV4aWJsZTtcblxuICAgIHRoaXMuX21heFF1ZXVlU2l6ZSA9IG9wdHMubWF4UXVldWVTaXplXG4gIH1cblxuICBnZXRUb2tlbnNSZW1haW5pbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpbWl0ZXJGbGV4aWJsZS5nZXQodGhpcy5fa2V5KVxuICAgICAgLnRoZW4oKHJsUmVzKSA9PiB7XG4gICAgICAgIHJldHVybiBybFJlcyAhPT0gbnVsbCA/IHJsUmVzLnJlbWFpbmluZ1BvaW50cyA6IHRoaXMuX2xpbWl0ZXJGbGV4aWJsZS5wb2ludHM7XG4gICAgICB9KVxuICB9XG5cbiAgcmVtb3ZlVG9rZW5zKHRva2Vucykge1xuICAgIGNvbnN0IF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodG9rZW5zID4gX3RoaXMuX2xpbWl0ZXJGbGV4aWJsZS5wb2ludHMpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBSYXRlTGltaXRlclF1ZXVlRXJyb3IoYFJlcXVlc3RlZCB0b2tlbnMgJHt0b2tlbnN9IGV4Y2VlZHMgbWF4aW11bSAke190aGlzLl9saW1pdGVyRmxleGlibGUucG9pbnRzfSB0b2tlbnMgcGVyIGludGVydmFsYCkpO1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIF90aGlzLl9xdWV1ZVJlcXVlc3QuY2FsbChfdGhpcywgcmVzb2x2ZSwgcmVqZWN0LCB0b2tlbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuX2xpbWl0ZXJGbGV4aWJsZS5jb25zdW1lKF90aGlzLl9rZXksIHRva2VucylcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHJlcy5yZW1haW5pbmdQb2ludHMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChyZWopID0+IHtcbiAgICAgICAgICAgIGlmIChyZWogaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICByZWplY3QocmVqKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIF90aGlzLl9xdWV1ZVJlcXVlc3QuY2FsbChfdGhpcywgcmVzb2x2ZSwgcmVqZWN0LCB0b2tlbnMpO1xuICAgICAgICAgICAgICBpZiAoX3RoaXMuX3dhaXRUaW1lb3V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3dhaXRUaW1lb3V0ID0gc2V0VGltZW91dChfdGhpcy5fcHJvY2Vzc0ZJRk8uYmluZChfdGhpcyksIHJlai5tc0JlZm9yZU5leHQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIF9xdWV1ZVJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0LCB0b2tlbnMpIHtcbiAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgaWYgKF90aGlzLl9xdWV1ZS5sZW5ndGggPCBfdGhpcy5fbWF4UXVldWVTaXplKSB7XG4gICAgICBfdGhpcy5fcXVldWUucHVzaCh7cmVzb2x2ZSwgcmVqZWN0LCB0b2tlbnN9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KG5ldyBSYXRlTGltaXRlclF1ZXVlRXJyb3IoYE51bWJlciBvZiByZXF1ZXN0cyByZWFjaGVkIGl0J3MgbWF4aW11bSAke190aGlzLl9tYXhRdWV1ZVNpemV9YCkpXG4gICAgfVxuICB9XG5cbiAgX3Byb2Nlc3NGSUZPKCkge1xuICAgIGNvbnN0IF90aGlzID0gdGhpcztcblxuICAgIGlmIChfdGhpcy5fd2FpdFRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dChfdGhpcy5fd2FpdFRpbWVvdXQpO1xuICAgICAgX3RoaXMuX3dhaXRUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuX3F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW0gPSBfdGhpcy5fcXVldWUuc2hpZnQoKTtcbiAgICBfdGhpcy5fbGltaXRlckZsZXhpYmxlLmNvbnN1bWUoX3RoaXMuX2tleSwgaXRlbS50b2tlbnMpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGl0ZW0ucmVzb2x2ZShyZXMucmVtYWluaW5nUG9pbnRzKTtcbiAgICAgICAgX3RoaXMuX3Byb2Nlc3NGSUZPLmNhbGwoX3RoaXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVqKSA9PiB7XG4gICAgICAgIGlmIChyZWogaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGl0ZW0ucmVqZWN0KHJlaik7XG4gICAgICAgICAgX3RoaXMuX3Byb2Nlc3NGSUZPLmNhbGwoX3RoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLl9xdWV1ZS51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAgIGlmIChfdGhpcy5fd2FpdFRpbWVvdXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLl93YWl0VGltZW91dCA9IHNldFRpbWVvdXQoX3RoaXMuX3Byb2Nlc3NGSUZPLmJpbmQoX3RoaXMpLCByZWoubXNCZWZvcmVOZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yIiwicmVxdWlyZSIsIk1BWF9RVUVVRV9TSVpFIiwiS0VZX0RFRkFVTFQiLCJtb2R1bGUiLCJleHBvcnRzIiwiUmF0ZUxpbWl0ZXJRdWV1ZSIsImNvbnN0cnVjdG9yIiwibGltaXRlckZsZXhpYmxlIiwib3B0cyIsIm1heFF1ZXVlU2l6ZSIsIl9xdWV1ZUxpbWl0ZXJzIiwiUmF0ZUxpbWl0ZXJRdWV1ZUludGVybmFsIiwiX2xpbWl0ZXJGbGV4aWJsZSIsIl9tYXhRdWV1ZVNpemUiLCJnZXRUb2tlbnNSZW1haW5pbmciLCJrZXkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInBvaW50cyIsInJlbW92ZVRva2VucyIsInRva2VucyIsIl9rZXkiLCJfd2FpdFRpbWVvdXQiLCJfcXVldWUiLCJnZXQiLCJ0aGVuIiwicmxSZXMiLCJyZW1haW5pbmdQb2ludHMiLCJfdGhpcyIsInJlamVjdCIsImxlbmd0aCIsIl9xdWV1ZVJlcXVlc3QiLCJjYWxsIiwiY29uc3VtZSIsInJlcyIsImNhdGNoIiwicmVqIiwiRXJyb3IiLCJzZXRUaW1lb3V0IiwiX3Byb2Nlc3NGSUZPIiwiYmluZCIsIm1zQmVmb3JlTmV4dCIsInB1c2giLCJjbGVhclRpbWVvdXQiLCJpdGVtIiwic2hpZnQiLCJ1bnNoaWZ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterQueue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRedis.js":
/*!********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterRedis.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterStoreAbstract = __webpack_require__(/*! ./RateLimiterStoreAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nconst incrTtlLuaScript = `redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') \\\nlocal consumed = redis.call('incrby', KEYS[1], ARGV[1]) \\\nlocal ttl = redis.call('pttl', KEYS[1]) \\\nif ttl == -1 then \\\n  redis.call('expire', KEYS[1], ARGV[2]) \\\n  ttl = 1000 * ARGV[2] \\\nend \\\nreturn {consumed, ttl} \\\n`;\nclass RateLimiterRedis extends RateLimiterStoreAbstract {\n    /**\n   *\n   * @param {Object} opts\n   * Defaults {\n   *   ... see other in RateLimiterStoreAbstract\n   *\n   *   redis: RedisClient\n   *   rejectIfRedisNotReady: boolean = false - reject / invoke insuranceLimiter immediately when redis connection is not \"ready\"\n   * }\n   */ constructor(opts){\n        super(opts);\n        this.client = opts.storeClient;\n        this._rejectIfRedisNotReady = !!opts.rejectIfRedisNotReady;\n        this._incrTtlLuaScript = opts.customIncrTtlLuaScript || incrTtlLuaScript;\n        this.useRedisPackage = opts.useRedisPackage || this.client.constructor.name === \"Commander\" || false;\n        this.useRedis3AndLowerPackage = opts.useRedis3AndLowerPackage;\n        if (typeof this.client.defineCommand === \"function\") {\n            this.client.defineCommand(\"rlflxIncr\", {\n                numberOfKeys: 1,\n                lua: this._incrTtlLuaScript\n            });\n        }\n    }\n    /**\n   * Prevent actual redis call if redis connection is not ready\n   * Because of different connection state checks for ioredis and node-redis, only this clients would be actually checked.\n   * For any other clients all the requests would be passed directly to redis client\n   * @return {boolean}\n   * @private\n   */ _isRedisReady() {\n        if (!this._rejectIfRedisNotReady) {\n            return true;\n        }\n        // ioredis client\n        if (this.client.status && this.client.status !== \"ready\") {\n            return false;\n        }\n        // node-redis client\n        if (typeof this.client.isReady === \"function\" && !this.client.isReady()) {\n            return false;\n        }\n        return true;\n    }\n    _getRateLimiterRes(rlKey, changedPoints, result) {\n        let [consumed, resTtlMs] = result;\n        // Support ioredis results format\n        if (Array.isArray(consumed)) {\n            [, consumed] = consumed;\n            [, resTtlMs] = resTtlMs;\n        }\n        const res = new RateLimiterRes();\n        res.consumedPoints = parseInt(consumed);\n        res.isFirstInDuration = res.consumedPoints === changedPoints;\n        res.remainingPoints = Math.max(this.points - res.consumedPoints, 0);\n        res.msBeforeNext = resTtlMs;\n        return res;\n    }\n    async _upsert(rlKey, points, msDuration, forceExpire = false) {\n        if (!this._isRedisReady()) {\n            throw new Error(\"Redis connection is not ready\");\n        }\n        const secDuration = Math.floor(msDuration / 1000);\n        const multi = this.client.multi();\n        if (forceExpire) {\n            if (secDuration > 0) {\n                if (!this.useRedisPackage && !this.useRedis3AndLowerPackage) {\n                    multi.set(rlKey, points, \"EX\", secDuration);\n                } else {\n                    multi.set(rlKey, points, {\n                        EX: secDuration\n                    });\n                }\n            } else {\n                multi.set(rlKey, points);\n            }\n            if (!this.useRedisPackage && !this.useRedis3AndLowerPackage) {\n                return multi.pttl(rlKey).exec(true);\n            }\n            return multi.pTTL(rlKey).exec(true);\n        }\n        if (secDuration > 0) {\n            if (!this.useRedisPackage && !this.useRedis3AndLowerPackage) {\n                return this.client.rlflxIncr([\n                    rlKey\n                ].concat([\n                    String(points),\n                    String(secDuration),\n                    String(this.points),\n                    String(this.duration)\n                ]));\n            }\n            if (this.useRedis3AndLowerPackage) {\n                return new Promise((resolve, reject)=>{\n                    const incrCallback = function(err, result) {\n                        if (err) {\n                            return reject(err);\n                        }\n                        return resolve(result);\n                    };\n                    if (typeof this.client.rlflxIncr === \"function\") {\n                        this.client.rlflxIncr(rlKey, points, secDuration, this.points, this.duration, incrCallback);\n                    } else {\n                        this.client.eval(this._incrTtlLuaScript, 1, rlKey, points, secDuration, this.points, this.duration, incrCallback);\n                    }\n                });\n            } else {\n                return this.client.eval(this._incrTtlLuaScript, {\n                    keys: [\n                        rlKey\n                    ],\n                    arguments: [\n                        String(points),\n                        String(secDuration),\n                        String(this.points),\n                        String(this.duration)\n                    ]\n                });\n            }\n        } else {\n            if (!this.useRedisPackage && !this.useRedis3AndLowerPackage) {\n                return multi.incrby(rlKey, points).pttl(rlKey).exec(true);\n            }\n            return multi.incrBy(rlKey, points).pTTL(rlKey).exec(true);\n        }\n    }\n    async _get(rlKey) {\n        if (!this._isRedisReady()) {\n            throw new Error(\"Redis connection is not ready\");\n        }\n        if (!this.useRedisPackage && !this.useRedis3AndLowerPackage) {\n            return this.client.multi().get(rlKey).pttl(rlKey).exec().then((result)=>{\n                const [[, points]] = result;\n                if (points === null) return null;\n                return result;\n            });\n        }\n        return this.client.multi().get(rlKey).pTTL(rlKey).exec(true).then((result)=>{\n            const [points] = result;\n            if (points === null) return null;\n            return result;\n        });\n    }\n    _delete(rlKey) {\n        return this.client.del(rlKey).then((result)=>result > 0);\n    }\n}\nmodule.exports = RateLimiterRedis;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclJlZGlzLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLDJCQUEyQkMsbUJBQU9BLENBQUM7QUFDekMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQztBQUUvQixNQUFNRSxtQkFBbUIsQ0FBQzs7Ozs7Ozs7QUFRMUIsQ0FBQztBQUVELE1BQU1DLHlCQUF5Qko7SUFDN0I7Ozs7Ozs7OztHQVNDLEdBQ0RLLFlBQVlDLElBQUksQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQyxNQUFNLEdBQUdELEtBQUtFLFdBQVc7UUFFOUIsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxDQUFDLENBQUNILEtBQUtJLHFCQUFxQjtRQUMxRCxJQUFJLENBQUNDLGlCQUFpQixHQUFHTCxLQUFLTSxzQkFBc0IsSUFBSVQ7UUFFeEQsSUFBSSxDQUFDVSxlQUFlLEdBQUdQLEtBQUtPLGVBQWUsSUFBSSxJQUFJLENBQUNOLE1BQU0sQ0FBQ0YsV0FBVyxDQUFDUyxJQUFJLEtBQUssZUFBZTtRQUMvRixJQUFJLENBQUNDLHdCQUF3QixHQUFHVCxLQUFLUyx3QkFBd0I7UUFDN0QsSUFBSSxPQUFPLElBQUksQ0FBQ1IsTUFBTSxDQUFDUyxhQUFhLEtBQUssWUFBWTtZQUNuRCxJQUFJLENBQUNULE1BQU0sQ0FBQ1MsYUFBYSxDQUFDLGFBQWE7Z0JBQ3JDQyxjQUFjO2dCQUNkQyxLQUFLLElBQUksQ0FBQ1AsaUJBQWlCO1lBQzdCO1FBQ0Y7SUFDRjtJQUVBOzs7Ozs7R0FNQyxHQUNEUSxnQkFBZ0I7UUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDVixzQkFBc0IsRUFBRTtZQUNoQyxPQUFPO1FBQ1Q7UUFDQSxpQkFBaUI7UUFDakIsSUFBSSxJQUFJLENBQUNGLE1BQU0sQ0FBQ2EsTUFBTSxJQUFJLElBQUksQ0FBQ2IsTUFBTSxDQUFDYSxNQUFNLEtBQUssU0FBUztZQUN4RCxPQUFPO1FB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QUVZLE9BQU8sQ0FBQyxHQUFHWjtnQkFDcEIsSUFBSVksV0FBVyxNQUFNLE9BQU87Z0JBQzVCLE9BQU9aO1lBQ1Q7UUFDSjtRQUVBLE9BQU8sSUFBSSxDQUFDbEIsTUFBTSxDQUNmc0MsS0FBSyxHQUNMcUIsR0FBRyxDQUFDM0MsT0FDSjJCLElBQUksQ0FBQzNCLE9BQ0wwQixJQUFJLENBQUMsTUFDTGtCLElBQUksQ0FBQyxDQUFDMUM7WUFDTCxNQUFNLENBQUNZLE9BQU8sR0FBR1o7WUFDakIsSUFBSVksV0FBVyxNQUFNLE9BQU87WUFDNUIsT0FBT1o7UUFDVDtJQUNKO0lBRUEyQyxRQUFRN0MsS0FBSyxFQUFFO1FBQ2IsT0FBTyxJQUFJLENBQUNoQixNQUFNLENBQ2Y4RCxHQUFHLENBQUM5QyxPQUNKNEMsSUFBSSxDQUFDMUMsQ0FBQUEsU0FBVUEsU0FBUztJQUM3QjtBQUNGO0FBRUE2QyxPQUFPQyxPQUFPLEdBQUduRSIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclJlZGlzLmpzPzcyY2YiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0ID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclN0b3JlQWJzdHJhY3QnKTtcbmNvbnN0IFJhdGVMaW1pdGVyUmVzID0gcmVxdWlyZSgnLi9SYXRlTGltaXRlclJlcycpO1xuXG5jb25zdCBpbmNyVHRsTHVhU2NyaXB0ID0gYHJlZGlzLmNhbGwoJ3NldCcsIEtFWVNbMV0sIDAsICdFWCcsIEFSR1ZbMl0sICdOWCcpIFxcXG5sb2NhbCBjb25zdW1lZCA9IHJlZGlzLmNhbGwoJ2luY3JieScsIEtFWVNbMV0sIEFSR1ZbMV0pIFxcXG5sb2NhbCB0dGwgPSByZWRpcy5jYWxsKCdwdHRsJywgS0VZU1sxXSkgXFxcbmlmIHR0bCA9PSAtMSB0aGVuIFxcXG4gIHJlZGlzLmNhbGwoJ2V4cGlyZScsIEtFWVNbMV0sIEFSR1ZbMl0pIFxcXG4gIHR0bCA9IDEwMDAgKiBBUkdWWzJdIFxcXG5lbmQgXFxcbnJldHVybiB7Y29uc3VtZWQsIHR0bH0gXFxcbmA7XG5cbmNsYXNzIFJhdGVMaW1pdGVyUmVkaXMgZXh0ZW5kcyBSYXRlTGltaXRlclN0b3JlQWJzdHJhY3Qge1xuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICogRGVmYXVsdHMge1xuICAgKiAgIC4uLiBzZWUgb3RoZXIgaW4gUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0XG4gICAqXG4gICAqICAgcmVkaXM6IFJlZGlzQ2xpZW50XG4gICAqICAgcmVqZWN0SWZSZWRpc05vdFJlYWR5OiBib29sZWFuID0gZmFsc2UgLSByZWplY3QgLyBpbnZva2UgaW5zdXJhbmNlTGltaXRlciBpbW1lZGlhdGVseSB3aGVuIHJlZGlzIGNvbm5lY3Rpb24gaXMgbm90IFwicmVhZHlcIlxuICAgKiB9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgc3VwZXIob3B0cyk7XG4gICAgdGhpcy5jbGllbnQgPSBvcHRzLnN0b3JlQ2xpZW50O1xuXG4gICAgdGhpcy5fcmVqZWN0SWZSZWRpc05vdFJlYWR5ID0gISFvcHRzLnJlamVjdElmUmVkaXNOb3RSZWFkeTtcbiAgICB0aGlzLl9pbmNyVHRsTHVhU2NyaXB0ID0gb3B0cy5jdXN0b21JbmNyVHRsTHVhU2NyaXB0IHx8IGluY3JUdGxMdWFTY3JpcHQ7XG5cbiAgICB0aGlzLnVzZVJlZGlzUGFja2FnZSA9IG9wdHMudXNlUmVkaXNQYWNrYWdlIHx8IHRoaXMuY2xpZW50LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb21tYW5kZXInIHx8IGZhbHNlO1xuICAgIHRoaXMudXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlID0gb3B0cy51c2VSZWRpczNBbmRMb3dlclBhY2thZ2U7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNsaWVudC5kZWZpbmVDb21tYW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmNsaWVudC5kZWZpbmVDb21tYW5kKFwicmxmbHhJbmNyXCIsIHtcbiAgICAgICAgbnVtYmVyT2ZLZXlzOiAxLFxuICAgICAgICBsdWE6IHRoaXMuX2luY3JUdGxMdWFTY3JpcHQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJldmVudCBhY3R1YWwgcmVkaXMgY2FsbCBpZiByZWRpcyBjb25uZWN0aW9uIGlzIG5vdCByZWFkeVxuICAgKiBCZWNhdXNlIG9mIGRpZmZlcmVudCBjb25uZWN0aW9uIHN0YXRlIGNoZWNrcyBmb3IgaW9yZWRpcyBhbmQgbm9kZS1yZWRpcywgb25seSB0aGlzIGNsaWVudHMgd291bGQgYmUgYWN0dWFsbHkgY2hlY2tlZC5cbiAgICogRm9yIGFueSBvdGhlciBjbGllbnRzIGFsbCB0aGUgcmVxdWVzdHMgd291bGQgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHJlZGlzIGNsaWVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2lzUmVkaXNSZWFkeSgpIHtcbiAgICBpZiAoIXRoaXMuX3JlamVjdElmUmVkaXNOb3RSZWFkeSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGlvcmVkaXMgY2xpZW50XG4gICAgaWYgKHRoaXMuY2xpZW50LnN0YXR1cyAmJiB0aGlzLmNsaWVudC5zdGF0dXMgIT09ICdyZWFkeScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbm9kZS1yZWRpcyBjbGllbnRcbiAgICBpZiAodHlwZW9mIHRoaXMuY2xpZW50LmlzUmVhZHkgPT09ICdmdW5jdGlvbicgJiYgIXRoaXMuY2xpZW50LmlzUmVhZHkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIF9nZXRSYXRlTGltaXRlclJlcyhybEtleSwgY2hhbmdlZFBvaW50cywgcmVzdWx0KSB7XG4gICAgbGV0IFtjb25zdW1lZCwgcmVzVHRsTXNdID0gcmVzdWx0O1xuICAgIC8vIFN1cHBvcnQgaW9yZWRpcyByZXN1bHRzIGZvcm1hdFxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnN1bWVkKSkge1xuICAgICAgWywgY29uc3VtZWRdID0gY29uc3VtZWQ7XG4gICAgICBbLCByZXNUdGxNc10gPSByZXNUdGxNcztcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBuZXcgUmF0ZUxpbWl0ZXJSZXMoKTtcbiAgICByZXMuY29uc3VtZWRQb2ludHMgPSBwYXJzZUludChjb25zdW1lZCk7XG4gICAgcmVzLmlzRmlyc3RJbkR1cmF0aW9uID0gcmVzLmNvbnN1bWVkUG9pbnRzID09PSBjaGFuZ2VkUG9pbnRzO1xuICAgIHJlcy5yZW1haW5pbmdQb2ludHMgPSBNYXRoLm1heCh0aGlzLnBvaW50cyAtIHJlcy5jb25zdW1lZFBvaW50cywgMCk7XG4gICAgcmVzLm1zQmVmb3JlTmV4dCA9IHJlc1R0bE1zO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGFzeW5jIF91cHNlcnQocmxLZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUgPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy5faXNSZWRpc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkaXMgY29ubmVjdGlvbiBpcyBub3QgcmVhZHknKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWNEdXJhdGlvbiA9IE1hdGguZmxvb3IobXNEdXJhdGlvbiAvIDEwMDApO1xuICAgIGNvbnN0IG11bHRpID0gdGhpcy5jbGllbnQubXVsdGkoKTtcblxuICAgIGlmIChmb3JjZUV4cGlyZSkge1xuICAgICAgaWYgKHNlY0R1cmF0aW9uID4gMCkge1xuICAgICAgICBpZighdGhpcy51c2VSZWRpc1BhY2thZ2UgJiYgIXRoaXMudXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlKXtcbiAgICAgICAgICBtdWx0aS5zZXQocmxLZXksIHBvaW50cywgXCJFWFwiLCBzZWNEdXJhdGlvbik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIG11bHRpLnNldChybEtleSwgcG9pbnRzLCB7IEVYOiBzZWNEdXJhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXVsdGkuc2V0KHJsS2V5LCBwb2ludHMpO1xuICAgICAgfVxuXG4gICAgICBpZighdGhpcy51c2VSZWRpc1BhY2thZ2UgJiYgIXRoaXMudXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlKXtcbiAgICAgICAgcmV0dXJuIG11bHRpLnB0dGwocmxLZXkpLmV4ZWModHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbXVsdGkucFRUTChybEtleSkuZXhlYyh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoc2VjRHVyYXRpb24gPiAwKSB7XG4gICAgICBpZighdGhpcy51c2VSZWRpc1BhY2thZ2UgJiYgIXRoaXMudXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50LnJsZmx4SW5jcihcbiAgICAgICAgICBbcmxLZXldLmNvbmNhdChbU3RyaW5nKHBvaW50cyksIFN0cmluZyhzZWNEdXJhdGlvbiksIFN0cmluZyh0aGlzLnBvaW50cyksIFN0cmluZyh0aGlzLmR1cmF0aW9uKV0pKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnVzZVJlZGlzM0FuZExvd2VyUGFja2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGluY3JDYWxsYmFjayA9IGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jbGllbnQucmxmbHhJbmNyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudC5ybGZseEluY3IocmxLZXksIHBvaW50cywgc2VjRHVyYXRpb24sIHRoaXMucG9pbnRzLCB0aGlzLmR1cmF0aW9uLCBpbmNyQ2FsbGJhY2spO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudC5ldmFsKHRoaXMuX2luY3JUdGxMdWFTY3JpcHQsIDEsIHJsS2V5LCBwb2ludHMsIHNlY0R1cmF0aW9uLCB0aGlzLnBvaW50cywgdGhpcy5kdXJhdGlvbiwgaW5jckNhbGxiYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50LmV2YWwodGhpcy5faW5jclR0bEx1YVNjcmlwdCwge1xuICAgICAgICAgIGtleXM6IFtybEtleV0sXG4gICAgICAgICAgYXJndW1lbnRzOiBbU3RyaW5nKHBvaW50cyksIFN0cmluZyhzZWNEdXJhdGlvbiksIFN0cmluZyh0aGlzLnBvaW50cyksIFN0cmluZyh0aGlzLmR1cmF0aW9uKV0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZighdGhpcy51c2VSZWRpc1BhY2thZ2UgJiYgIXRoaXMudXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlKXtcbiAgICAgICAgcmV0dXJuIG11bHRpLmluY3JieShybEtleSwgcG9pbnRzKS5wdHRsKHJsS2V5KS5leGVjKHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbXVsdGkuaW5jckJ5KHJsS2V5LCBwb2ludHMpLnBUVEwocmxLZXkpLmV4ZWModHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2dldChybEtleSkge1xuICAgIGlmICghdGhpcy5faXNSZWRpc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkaXMgY29ubmVjdGlvbiBpcyBub3QgcmVhZHknKTtcbiAgICB9XG4gICAgaWYoIXRoaXMudXNlUmVkaXNQYWNrYWdlICYmICF0aGlzLnVzZVJlZGlzM0FuZExvd2VyUGFja2FnZSl7XG4gICAgICByZXR1cm4gdGhpcy5jbGllbnRcbiAgICAgICAgLm11bHRpKClcbiAgICAgICAgLmdldChybEtleSlcbiAgICAgICAgLnB0dGwocmxLZXkpXG4gICAgICAgIC5leGVjKClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IFtbLHBvaW50c11dID0gcmVzdWx0O1xuICAgICAgICAgIGlmIChwb2ludHMgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNsaWVudFxuICAgICAgLm11bHRpKClcbiAgICAgIC5nZXQocmxLZXkpXG4gICAgICAucFRUTChybEtleSlcbiAgICAgIC5leGVjKHRydWUpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IFtwb2ludHNdID0gcmVzdWx0O1xuICAgICAgICBpZiAocG9pbnRzID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2RlbGV0ZShybEtleSkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudFxuICAgICAgLmRlbChybEtleSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQgPiAwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhdGVMaW1pdGVyUmVkaXM7XG4iXSwibmFtZXMiOlsiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwicmVxdWlyZSIsIlJhdGVMaW1pdGVyUmVzIiwiaW5jclR0bEx1YVNjcmlwdCIsIlJhdGVMaW1pdGVyUmVkaXMiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJjbGllbnQiLCJzdG9yZUNsaWVudCIsIl9yZWplY3RJZlJlZGlzTm90UmVhZHkiLCJyZWplY3RJZlJlZGlzTm90UmVhZHkiLCJfaW5jclR0bEx1YVNjcmlwdCIsImN1c3RvbUluY3JUdGxMdWFTY3JpcHQiLCJ1c2VSZWRpc1BhY2thZ2UiLCJuYW1lIiwidXNlUmVkaXMzQW5kTG93ZXJQYWNrYWdlIiwiZGVmaW5lQ29tbWFuZCIsIm51bWJlck9mS2V5cyIsImx1YSIsIl9pc1JlZGlzUmVhZHkiLCJzdGF0dXMiLCJpc1JlYWR5IiwiX2dldFJhdGVMaW1pdGVyUmVzIiwicmxLZXkiLCJjaGFuZ2VkUG9pbnRzIiwicmVzdWx0IiwiY29uc3VtZWQiLCJyZXNUdGxNcyIsIkFycmF5IiwiaXNBcnJheSIsInJlcyIsImNvbnN1bWVkUG9pbnRzIiwicGFyc2VJbnQiLCJpc0ZpcnN0SW5EdXJhdGlvbiIsInJlbWFpbmluZ1BvaW50cyIsIk1hdGgiLCJtYXgiLCJwb2ludHMiLCJtc0JlZm9yZU5leHQiLCJfdXBzZXJ0IiwibXNEdXJhdGlvbiIsImZvcmNlRXhwaXJlIiwiRXJyb3IiLCJzZWNEdXJhdGlvbiIsImZsb29yIiwibXVsdGkiLCJzZXQiLCJFWCIsInB0dGwiLCJleGVjIiwicFRUTCIsInJsZmx4SW5jciIsImNvbmNhdCIsIlN0cmluZyIsImR1cmF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbmNyQ2FsbGJhY2siLCJlcnIiLCJldmFsIiwia2V5cyIsImFyZ3VtZW50cyIsImluY3JieSIsImluY3JCeSIsIl9nZXQiLCJnZXQiLCJ0aGVuIiwiX2RlbGV0ZSIsImRlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRedis.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js":
/*!******************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js ***!
  \******************************************************************/
/***/ ((module) => {

eval("module.exports = class RateLimiterRes {\n    constructor(remainingPoints, msBeforeNext, consumedPoints, isFirstInDuration){\n        this.remainingPoints = typeof remainingPoints === \"undefined\" ? 0 : remainingPoints; // Remaining points in current duration\n        this.msBeforeNext = typeof msBeforeNext === \"undefined\" ? 0 : msBeforeNext; // Milliseconds before next action\n        this.consumedPoints = typeof consumedPoints === \"undefined\" ? 0 : consumedPoints; // Consumed points in current duration\n        this.isFirstInDuration = typeof isFirstInDuration === \"undefined\" ? false : isFirstInDuration;\n    }\n    get msBeforeNext() {\n        return this._msBeforeNext;\n    }\n    set msBeforeNext(ms) {\n        this._msBeforeNext = ms;\n        return this;\n    }\n    get remainingPoints() {\n        return this._remainingPoints;\n    }\n    set remainingPoints(p) {\n        this._remainingPoints = p;\n        return this;\n    }\n    get consumedPoints() {\n        return this._consumedPoints;\n    }\n    set consumedPoints(p) {\n        this._consumedPoints = p;\n        return this;\n    }\n    get isFirstInDuration() {\n        return this._isFirstInDuration;\n    }\n    set isFirstInDuration(value) {\n        this._isFirstInDuration = Boolean(value);\n    }\n    _getDecoratedProperties() {\n        return {\n            remainingPoints: this.remainingPoints,\n            msBeforeNext: this.msBeforeNext,\n            consumedPoints: this.consumedPoints,\n            isFirstInDuration: this.isFirstInDuration\n        };\n    }\n    [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n        return this._getDecoratedProperties();\n    }\n    toString() {\n        return JSON.stringify(this._getDecoratedProperties());\n    }\n    toJSON() {\n        return this._getDecoratedProperties();\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJSZXMuanM/M2QwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFJhdGVMaW1pdGVyUmVzIHtcbiAgY29uc3RydWN0b3IocmVtYWluaW5nUG9pbnRzLCBtc0JlZm9yZU5leHQsIGNvbnN1bWVkUG9pbnRzLCBpc0ZpcnN0SW5EdXJhdGlvbikge1xuICAgIHRoaXMucmVtYWluaW5nUG9pbnRzID0gdHlwZW9mIHJlbWFpbmluZ1BvaW50cyA9PT0gJ3VuZGVmaW5lZCcgPyAwIDogcmVtYWluaW5nUG9pbnRzOyAvLyBSZW1haW5pbmcgcG9pbnRzIGluIGN1cnJlbnQgZHVyYXRpb25cbiAgICB0aGlzLm1zQmVmb3JlTmV4dCA9IHR5cGVvZiBtc0JlZm9yZU5leHQgPT09ICd1bmRlZmluZWQnID8gMCA6IG1zQmVmb3JlTmV4dDsgLy8gTWlsbGlzZWNvbmRzIGJlZm9yZSBuZXh0IGFjdGlvblxuICAgIHRoaXMuY29uc3VtZWRQb2ludHMgPSB0eXBlb2YgY29uc3VtZWRQb2ludHMgPT09ICd1bmRlZmluZWQnID8gMCA6IGNvbnN1bWVkUG9pbnRzOyAvLyBDb25zdW1lZCBwb2ludHMgaW4gY3VycmVudCBkdXJhdGlvblxuICAgIHRoaXMuaXNGaXJzdEluRHVyYXRpb24gPSB0eXBlb2YgaXNGaXJzdEluRHVyYXRpb24gPT09ICd1bmRlZmluZWQnID8gZmFsc2UgOiBpc0ZpcnN0SW5EdXJhdGlvbjtcbiAgfVxuXG4gIGdldCBtc0JlZm9yZU5leHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21zQmVmb3JlTmV4dDtcbiAgfVxuXG4gIHNldCBtc0JlZm9yZU5leHQobXMpIHtcbiAgICB0aGlzLl9tc0JlZm9yZU5leHQgPSBtcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldCByZW1haW5pbmdQb2ludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbWFpbmluZ1BvaW50cztcbiAgfVxuXG4gIHNldCByZW1haW5pbmdQb2ludHMocCkge1xuICAgIHRoaXMuX3JlbWFpbmluZ1BvaW50cyA9IHA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXQgY29uc3VtZWRQb2ludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnN1bWVkUG9pbnRzO1xuICB9XG5cbiAgc2V0IGNvbnN1bWVkUG9pbnRzKHApIHtcbiAgICB0aGlzLl9jb25zdW1lZFBvaW50cyA9IHA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXQgaXNGaXJzdEluRHVyYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRmlyc3RJbkR1cmF0aW9uO1xuICB9XG5cbiAgc2V0IGlzRmlyc3RJbkR1cmF0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5faXNGaXJzdEluRHVyYXRpb24gPSBCb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIF9nZXREZWNvcmF0ZWRQcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZW1haW5pbmdQb2ludHM6IHRoaXMucmVtYWluaW5nUG9pbnRzLFxuICAgICAgbXNCZWZvcmVOZXh0OiB0aGlzLm1zQmVmb3JlTmV4dCxcbiAgICAgIGNvbnN1bWVkUG9pbnRzOiB0aGlzLmNvbnN1bWVkUG9pbnRzLFxuICAgICAgaXNGaXJzdEluRHVyYXRpb246IHRoaXMuaXNGaXJzdEluRHVyYXRpb24sXG4gICAgfTtcbiAgfVxuXG4gIFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXREZWNvcmF0ZWRQcm9wZXJ0aWVzKCk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5fZ2V0RGVjb3JhdGVkUHJvcGVydGllcygpKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0RGVjb3JhdGVkUHJvcGVydGllcygpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJSYXRlTGltaXRlclJlcyIsImNvbnN0cnVjdG9yIiwicmVtYWluaW5nUG9pbnRzIiwibXNCZWZvcmVOZXh0IiwiY29uc3VtZWRQb2ludHMiLCJpc0ZpcnN0SW5EdXJhdGlvbiIsIl9tc0JlZm9yZU5leHQiLCJtcyIsIl9yZW1haW5pbmdQb2ludHMiLCJwIiwiX2NvbnN1bWVkUG9pbnRzIiwiX2lzRmlyc3RJbkR1cmF0aW9uIiwidmFsdWUiLCJCb29sZWFuIiwiX2dldERlY29yYXRlZFByb3BlcnRpZXMiLCJTeW1ib2wiLCJmb3IiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0pTT04iXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxPQUFPLEdBQUcsTUFBTUM7SUFDckJDLFlBQVlDLGVBQWUsRUFBRUMsWUFBWSxFQUFFQyxjQUFjLEVBQUVDLGlCQUFpQixDQUFFO1FBQzVFLElBQUksQ0FBQ0gsZUFBZSxHQUFHLE9BQU9BLG9CQUFvQixjQUFjLElBQUlBLGlCQUFpQix1Q0FBdUM7UUFDNUgsSUFBSSxDQUFDQyxZQUFZLEdBQUcsT0FBT0EsaUJBQWlCLGNBQWMsSUFBSUEsY0FBYyxrQ0FBa0M7UUFDOUcsSUFBSSxDQUFDQyxjQUFjLEdBQUcsT0FBT0EsbUJBQW1CLGNBQWMsSUFBSUEsZ0JBQWdCLHNDQUFzQztRQUN4SCxJQUFJLENBQUNDLGlCQUFpQixHQUFHLE9BQU9BLHNCQUFzQixjQUFjLFFBQVFBO0lBQzlFO0lBRUEsSUFBSUYsZUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQ0csYUFBYTtJQUMzQjtJQUVBLElBQUlILGFBQWFJLEVBQUUsRUFBRTtRQUNuQixJQUFJLENBQUNELGFBQWEsR0FBR0M7UUFDckIsT0FBTyxJQUFJO0lBQ2I7SUFFQSxJQUFJTCxrQkFBa0I7UUFDcEIsT0FBTyxJQUFJLENBQUNNLGdCQUFnQjtJQUM5QjtJQUVBLElBQUlOLGdCQUFnQk8sQ0FBQyxFQUFFO1FBQ3JCLElBQUksQ0FBQ0QsZ0JBQWdCLEdBQUdDO1FBQ3hCLE9BQU8sSUFBSTtJQUNiO0lBRUEsSUFBSUwsaUJBQWlCO1FBQ25CLE9BQU8sSUFBSSxDQUFDTSxlQUFlO0lBQzdCO0lBRUEsSUFBSU4sZUFBZUssQ0FBQyxFQUFFO1FBQ3BCLElBQUksQ0FBQ0MsZUFBZSxHQUFHRDtRQUN2QixPQUFPLElBQUk7SUFDYjtJQUVBLElBQUlKLG9CQUFvQjtRQUN0QixPQUFPLElBQUksQ0FBQ00sa0JBQWtCO0lBQ2hDO0lBRUEsSUFBSU4sa0JBQWtCTyxLQUFLLEVBQUU7UUFDM0IsSUFBSSxDQUFDRCxrQkFBa0IsR0FBR0UsUUFBUUQ7SUFDcEM7SUFFQUUsMEJBQTBCO1FBQ3hCLE9BQU87WUFDTFosaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtZQUNyQ0MsY0FBYyxJQUFJLENBQUNBLFlBQVk7WUFDL0JDLGdCQUFnQixJQUFJLENBQUNBLGNBQWM7WUFDbkNDLG1CQUFtQixJQUFJLENBQUNBLGlCQUFpQjtRQUMzQztJQUNGO0lBRUEsQ0FBQ1UsT0FBT0MsR0FBRyxDQUFDLDhCQUE4QixHQUFHO1FBQzNDLE9BQU8sSUFBSSxDQUFDRix1QkFBdUI7SUFDckM7SUFFQUcsV0FBVztRQUNULE9BQU9DLEtBQUtDLFNBQVMsQ0FBQyxJQUFJLENBQUNMLHVCQUF1QjtJQUNwRDtJQUVBTSxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUNOLHVCQUF1QjtJQUNyQztBQUNGIiwiZmlsZSI6Iihyc2MpLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJSZXMuanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js":
/*!****************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterAbstract = __webpack_require__(/*! ./RateLimiterAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js\");\nconst BlockedKeys = __webpack_require__(/*! ./component/BlockedKeys */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/index.js\");\nconst RateLimiterRes = __webpack_require__(/*! ./RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nmodule.exports = class RateLimiterStoreAbstract extends RateLimiterAbstract {\n    /**\n   *\n   * @param opts Object Defaults {\n   *   ... see other in RateLimiterAbstract\n   *\n   *   inMemoryBlockOnConsumed: 40, // Number of points when key is blocked\n   *   inMemoryBlockDuration: 10, // Block duration in seconds\n   *   insuranceLimiter: RateLimiterAbstract\n   * }\n   */ constructor(opts = {}){\n        super(opts);\n        this.inMemoryBlockOnConsumed = opts.inMemoryBlockOnConsumed;\n        this.inMemoryBlockDuration = opts.inMemoryBlockDuration;\n        this.insuranceLimiter = opts.insuranceLimiter;\n        this._inMemoryBlockedKeys = new BlockedKeys();\n    }\n    get client() {\n        return this._client;\n    }\n    set client(value) {\n        if (typeof value === \"undefined\") {\n            throw new Error(\"storeClient is not set\");\n        }\n        this._client = value;\n    }\n    /**\n   * Have to be launched after consume\n   * It blocks key and execute evenly depending on result from store\n   *\n   * It uses _getRateLimiterRes function to prepare RateLimiterRes from store result\n   *\n   * @param resolve\n   * @param reject\n   * @param rlKey\n   * @param changedPoints\n   * @param storeResult\n   * @param {Object} options\n   * @private\n   */ _afterConsume(resolve, reject, rlKey, changedPoints, storeResult, options = {}) {\n        const res = this._getRateLimiterRes(rlKey, changedPoints, storeResult);\n        if (this.inMemoryBlockOnConsumed > 0 && !(this.inMemoryBlockDuration > 0) && res.consumedPoints >= this.inMemoryBlockOnConsumed) {\n            this._inMemoryBlockedKeys.addMs(rlKey, res.msBeforeNext);\n            if (res.consumedPoints > this.points) {\n                return reject(res);\n            } else {\n                return resolve(res);\n            }\n        } else if (res.consumedPoints > this.points) {\n            let blockPromise = Promise.resolve();\n            // Block only first time when consumed more than points\n            if (this.blockDuration > 0 && res.consumedPoints <= this.points + changedPoints) {\n                res.msBeforeNext = this.msBlockDuration;\n                blockPromise = this._block(rlKey, res.consumedPoints, this.msBlockDuration, options);\n            }\n            if (this.inMemoryBlockOnConsumed > 0 && res.consumedPoints >= this.inMemoryBlockOnConsumed) {\n                // Block key for this.inMemoryBlockDuration seconds\n                this._inMemoryBlockedKeys.add(rlKey, this.inMemoryBlockDuration);\n                res.msBeforeNext = this.msInMemoryBlockDuration;\n            }\n            blockPromise.then(()=>{\n                reject(res);\n            }).catch((err)=>{\n                reject(err);\n            });\n        } else if (this.execEvenly && res.msBeforeNext > 0 && !res.isFirstInDuration) {\n            let delay = Math.ceil(res.msBeforeNext / (res.remainingPoints + 2));\n            if (delay < this.execEvenlyMinDelayMs) {\n                delay = res.consumedPoints * this.execEvenlyMinDelayMs;\n            }\n            setTimeout(resolve, delay, res);\n        } else {\n            resolve(res);\n        }\n    }\n    _handleError(err, funcName, resolve, reject, key, data = false, options = {}) {\n        if (!(this.insuranceLimiter instanceof RateLimiterAbstract)) {\n            reject(err);\n        } else {\n            this.insuranceLimiter[funcName](key, data, options).then((res)=>{\n                resolve(res);\n            }).catch((res)=>{\n                reject(res);\n            });\n        }\n    }\n    getInMemoryBlockMsBeforeExpire(rlKey) {\n        if (this.inMemoryBlockOnConsumed > 0) {\n            return this._inMemoryBlockedKeys.msBeforeExpire(rlKey);\n        }\n        return 0;\n    }\n    get inMemoryBlockOnConsumed() {\n        return this._inMemoryBlockOnConsumed;\n    }\n    set inMemoryBlockOnConsumed(value) {\n        this._inMemoryBlockOnConsumed = value ? parseInt(value) : 0;\n        if (this.inMemoryBlockOnConsumed > 0 && this.points > this.inMemoryBlockOnConsumed) {\n            throw new Error('inMemoryBlockOnConsumed option must be greater or equal \"points\" option');\n        }\n    }\n    get inMemoryBlockDuration() {\n        return this._inMemoryBlockDuration;\n    }\n    set inMemoryBlockDuration(value) {\n        this._inMemoryBlockDuration = value ? parseInt(value) : 0;\n        if (this.inMemoryBlockDuration > 0 && this.inMemoryBlockOnConsumed === 0) {\n            throw new Error(\"inMemoryBlockOnConsumed option must be set up\");\n        }\n    }\n    get msInMemoryBlockDuration() {\n        return this._inMemoryBlockDuration * 1000;\n    }\n    get insuranceLimiter() {\n        return this._insuranceLimiter;\n    }\n    set insuranceLimiter(value) {\n        if (typeof value !== \"undefined\" && !(value instanceof RateLimiterAbstract)) {\n            throw new Error(\"insuranceLimiter must be instance of RateLimiterAbstract\");\n        }\n        this._insuranceLimiter = value;\n        if (this._insuranceLimiter) {\n            this._insuranceLimiter.blockDuration = this.blockDuration;\n            this._insuranceLimiter.execEvenly = this.execEvenly;\n        }\n    }\n    /**\n   * Block any key for secDuration seconds\n   *\n   * @param key\n   * @param secDuration\n   * @param {Object} options\n   *\n   * @return Promise<RateLimiterRes>\n   */ block(key, secDuration, options = {}) {\n        const msDuration = secDuration * 1000;\n        return this._block(this.getKey(key), this.points + 1, msDuration, options);\n    }\n    /**\n   * Set points by key for any duration\n   *\n   * @param key\n   * @param points\n   * @param secDuration\n   * @param {Object} options\n   *\n   * @return Promise<RateLimiterRes>\n   */ set(key, points, secDuration, options = {}) {\n        const msDuration = (secDuration >= 0 ? secDuration : this.duration) * 1000;\n        return this._block(this.getKey(key), points, msDuration, options);\n    }\n    /**\n   *\n   * @param key\n   * @param pointsToConsume\n   * @param {Object} options\n   * @returns Promise<RateLimiterRes>\n   */ consume(key, pointsToConsume = 1, options = {}) {\n        return new Promise((resolve, reject)=>{\n            const rlKey = this.getKey(key);\n            const inMemoryBlockMsBeforeExpire = this.getInMemoryBlockMsBeforeExpire(rlKey);\n            if (inMemoryBlockMsBeforeExpire > 0) {\n                return reject(new RateLimiterRes(0, inMemoryBlockMsBeforeExpire));\n            }\n            this._upsert(rlKey, pointsToConsume, this._getKeySecDuration(options) * 1000, false, options).then((res)=>{\n                this._afterConsume(resolve, reject, rlKey, pointsToConsume, res);\n            }).catch((err)=>{\n                this._handleError(err, \"consume\", resolve, reject, key, pointsToConsume, options);\n            });\n        });\n    }\n    /**\n   *\n   * @param key\n   * @param points\n   * @param {Object} options\n   * @returns Promise<RateLimiterRes>\n   */ penalty(key, points = 1, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve, reject)=>{\n            this._upsert(rlKey, points, this._getKeySecDuration(options) * 1000, false, options).then((res)=>{\n                resolve(this._getRateLimiterRes(rlKey, points, res));\n            }).catch((err)=>{\n                this._handleError(err, \"penalty\", resolve, reject, key, points, options);\n            });\n        });\n    }\n    /**\n   *\n   * @param key\n   * @param points\n   * @param {Object} options\n   * @returns Promise<RateLimiterRes>\n   */ reward(key, points = 1, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve, reject)=>{\n            this._upsert(rlKey, -points, this._getKeySecDuration(options) * 1000, false, options).then((res)=>{\n                resolve(this._getRateLimiterRes(rlKey, -points, res));\n            }).catch((err)=>{\n                this._handleError(err, \"reward\", resolve, reject, key, points, options);\n            });\n        });\n    }\n    /**\n   *\n   * @param key\n   * @param {Object} options\n   * @returns Promise<RateLimiterRes>|null\n   */ get(key, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve, reject)=>{\n            this._get(rlKey, options).then((res)=>{\n                if (res === null || typeof res === \"undefined\") {\n                    resolve(null);\n                } else {\n                    resolve(this._getRateLimiterRes(rlKey, 0, res));\n                }\n            }).catch((err)=>{\n                this._handleError(err, \"get\", resolve, reject, key, options);\n            });\n        });\n    }\n    /**\n   *\n   * @param key\n   * @param {Object} options\n   * @returns Promise<boolean>\n   */ delete(key, options = {}) {\n        const rlKey = this.getKey(key);\n        return new Promise((resolve, reject)=>{\n            this._delete(rlKey, options).then((res)=>{\n                this._inMemoryBlockedKeys.delete(rlKey);\n                resolve(res);\n            }).catch((err)=>{\n                this._handleError(err, \"delete\", resolve, reject, key, options);\n            });\n        });\n    }\n    /**\n   * Cleanup keys no-matter expired or not.\n   */ deleteInMemoryBlockedAll() {\n        this._inMemoryBlockedKeys.delete();\n    }\n    /**\n   * Get RateLimiterRes object filled depending on storeResult, which specific for exact store\n   *\n   * @param rlKey\n   * @param changedPoints\n   * @param storeResult\n   * @private\n   */ _getRateLimiterRes(rlKey, changedPoints, storeResult) {\n        throw new Error(\"You have to implement the method '_getRateLimiterRes'!\");\n    }\n    /**\n   * Block key for this.msBlockDuration milliseconds\n   * Usually, it just prolongs lifetime of key\n   *\n   * @param rlKey\n   * @param initPoints\n   * @param msDuration\n   * @param {Object} options\n   *\n   * @return Promise<any>\n   */ _block(rlKey, initPoints, msDuration, options = {}) {\n        return new Promise((resolve, reject)=>{\n            this._upsert(rlKey, initPoints, msDuration, true, options).then(()=>{\n                resolve(new RateLimiterRes(0, msDuration > 0 ? msDuration : -1, initPoints));\n            }).catch((err)=>{\n                this._handleError(err, \"block\", resolve, reject, this.parseKey(rlKey), msDuration / 1000, options);\n            });\n        });\n    }\n    /**\n   * Have to be implemented in every limiter\n   * Resolve with raw result from Store OR null if rlKey is not set\n   * or Reject with error\n   *\n   * @param rlKey\n   * @param {Object} options\n   * @private\n   *\n   * @return Promise<any>\n   */ _get(rlKey, options = {}) {\n        throw new Error(\"You have to implement the method '_get'!\");\n    }\n    /**\n   * Have to be implemented\n   * Resolve with true OR false if rlKey doesn't exist\n   * or Reject with error\n   *\n   * @param rlKey\n   * @param {Object} options\n   * @private\n   *\n   * @return Promise<any>\n   */ _delete(rlKey, options = {}) {\n        throw new Error(\"You have to implement the method '_delete'!\");\n    }\n    /**\n   * Have to be implemented\n   * Resolve with object used for {@link _getRateLimiterRes} to generate {@link RateLimiterRes}\n   *\n   * @param {string} rlKey\n   * @param {number} points\n   * @param {number} msDuration\n   * @param {boolean} forceExpire\n   * @param {Object} options\n   * @abstract\n   *\n   * @return Promise<Object>\n   */ _upsert(rlKey, points, msDuration, forceExpire = false, options = {}) {\n        throw new Error(\"You have to implement the method '_upsert'!\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclN0b3JlQWJzdHJhY3QuanMiLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsc0JBQXNCQyxtQkFBT0EsQ0FBQztBQUNwQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQztBQUM1QixNQUFNRSxpQkFBaUJGLG1CQUFPQSxDQUFDO0FBRS9CRyxPQUFPQyxPQUFPLEdBQUcsTUFBTUMsaUNBQWlDTjtJQUN0RDs7Ozs7Ozs7O0dBU0MsR0FDRE8sWUFBWUMsT0FBTyxDQUFDLENBQUMsQ0FBRTtRQUNyQixLQUFLLENBQUNBO1FBRU4sSUFBSSxDQUFDQyx1QkFBdUIsR0FBR0QsS0FBS0MsdUJBQXVCO1FBQzNELElBQUksQ0FBQ0MscUJBQXFCLEdBQUdGLEtBQUtFLHFCQUFxQjtRQUN2RCxJQUFJLENBQUNDLGdCQUFnQixHQUFHSCxLQUFLRyxnQkFBZ0I7UUFDN0MsSUFBSSxDQUFDQyxvQkFBb0IsR0FBRyxJQUFJVjtJQUNsQztJQUVBLElBQUlXLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQ0MsT0FBTztJQUNyQjtJQUVBLElBQUlELE9BQU9FLEtBQUssRUFBRTtRQUNoQixJQUFJLE9BQU9BLFVBQVUsYUFBYTtZQUNoQyxNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFDQSxJQUFJLENBQUNGLE9BQU8sR0FBR0M7SUFDakI7SUFFQTs7Ozs7Ozs7Ozs7OztHQWFDLEdBQ0RFLGNBQWNDLE9BQU8sRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLGFBQWEsRUFBRUMsV0FBVyxFQUFFQyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQzlFLE1BQU1DLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0wsT0FBT0MsZUFBZUM7UUFFMUQsSUFBSSxJQUFJLENBQUNiLHVCQUF1QixHQUFHLEtBQUssQ0FBRSxLQUFJLENBQUNDLHFCQUFxQixHQUFHLE1BQ2xFYyxJQUFJRSxjQUFjLElBQUksSUFBSSxDQUFD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QixRQUFRLElBQUlmLGVBQWUsR0FBR3lELGFBQWEsSUFBSUEsYUFBYSxDQUFDLEdBQUdnQjtZQUNsRSxHQUNDdEMsS0FBSyxDQUFDLENBQUNDO2dCQUNOLElBQUksQ0FBQ1MsWUFBWSxDQUFDVCxLQUFLLFNBQVNyQixTQUFTQyxRQUFRLElBQUksQ0FBQzBELFFBQVEsQ0FBQ3pELFFBQVF3QyxhQUFhLE1BQU1yQztZQUM1RjtRQUNKO0lBQ0Y7SUFFQTs7Ozs7Ozs7OztHQVVDLEdBQ0RpRCxLQUFLcEQsS0FBSyxFQUFFRyxVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ3hCLE1BQU0sSUFBSVAsTUFBTTtJQUNsQjtJQUVBOzs7Ozs7Ozs7O0dBVUMsR0FDRDBELFFBQVF0RCxLQUFLLEVBQUVHLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDM0IsTUFBTSxJQUFJUCxNQUFNO0lBQ2xCO0lBRUE7Ozs7Ozs7Ozs7OztHQVlDLEdBQ0RtRCxRQUFRL0MsS0FBSyxFQUFFUyxNQUFNLEVBQUUrQixVQUFVLEVBQUVrQixjQUFjLEtBQUssRUFBRXZELFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDcEUsTUFBTSxJQUFJUCxNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0LmpzP2IzZmMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmF0ZUxpbWl0ZXJBYnN0cmFjdCA9IHJlcXVpcmUoJy4vUmF0ZUxpbWl0ZXJBYnN0cmFjdCcpO1xuY29uc3QgQmxvY2tlZEtleXMgPSByZXF1aXJlKCcuL2NvbXBvbmVudC9CbG9ja2VkS2V5cycpO1xuY29uc3QgUmF0ZUxpbWl0ZXJSZXMgPSByZXF1aXJlKCcuL1JhdGVMaW1pdGVyUmVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IGV4dGVuZHMgUmF0ZUxpbWl0ZXJBYnN0cmFjdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBPYmplY3QgRGVmYXVsdHMge1xuICAgKiAgIC4uLiBzZWUgb3RoZXIgaW4gUmF0ZUxpbWl0ZXJBYnN0cmFjdFxuICAgKlxuICAgKiAgIGluTWVtb3J5QmxvY2tPbkNvbnN1bWVkOiA0MCwgLy8gTnVtYmVyIG9mIHBvaW50cyB3aGVuIGtleSBpcyBibG9ja2VkXG4gICAqICAgaW5NZW1vcnlCbG9ja0R1cmF0aW9uOiAxMCwgLy8gQmxvY2sgZHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKiAgIGluc3VyYW5jZUxpbWl0ZXI6IFJhdGVMaW1pdGVyQWJzdHJhY3RcbiAgICogfVxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLmluTWVtb3J5QmxvY2tPbkNvbnN1bWVkID0gb3B0cy5pbk1lbW9yeUJsb2NrT25Db25zdW1lZDtcbiAgICB0aGlzLmluTWVtb3J5QmxvY2tEdXJhdGlvbiA9IG9wdHMuaW5NZW1vcnlCbG9ja0R1cmF0aW9uO1xuICAgIHRoaXMuaW5zdXJhbmNlTGltaXRlciA9IG9wdHMuaW5zdXJhbmNlTGltaXRlcjtcbiAgICB0aGlzLl9pbk1lbW9yeUJsb2NrZWRLZXlzID0gbmV3IEJsb2NrZWRLZXlzKCk7XG4gIH1cblxuICBnZXQgY2xpZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG4gIH1cblxuICBzZXQgY2xpZW50KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignc3RvcmVDbGllbnQgaXMgbm90IHNldCcpO1xuICAgIH1cbiAgICB0aGlzLl9jbGllbnQgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYXZlIHRvIGJlIGxhdW5jaGVkIGFmdGVyIGNvbnN1bWVcbiAgICogSXQgYmxvY2tzIGtleSBhbmQgZXhlY3V0ZSBldmVubHkgZGVwZW5kaW5nIG9uIHJlc3VsdCBmcm9tIHN0b3JlXG4gICAqXG4gICAqIEl0IHVzZXMgX2dldFJhdGVMaW1pdGVyUmVzIGZ1bmN0aW9uIHRvIHByZXBhcmUgUmF0ZUxpbWl0ZXJSZXMgZnJvbSBzdG9yZSByZXN1bHRcbiAgICpcbiAgICogQHBhcmFtIHJlc29sdmVcbiAgICogQHBhcmFtIHJlamVjdFxuICAgKiBAcGFyYW0gcmxLZXlcbiAgICogQHBhcmFtIGNoYW5nZWRQb2ludHNcbiAgICogQHBhcmFtIHN0b3JlUmVzdWx0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWZ0ZXJDb25zdW1lKHJlc29sdmUsIHJlamVjdCwgcmxLZXksIGNoYW5nZWRQb2ludHMsIHN0b3JlUmVzdWx0LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCByZXMgPSB0aGlzLl9nZXRSYXRlTGltaXRlclJlcyhybEtleSwgY2hhbmdlZFBvaW50cywgc3RvcmVSZXN1bHQpO1xuXG4gICAgaWYgKHRoaXMuaW5NZW1vcnlCbG9ja09uQ29uc3VtZWQgPiAwICYmICEodGhpcy5pbk1lbW9yeUJsb2NrRHVyYXRpb24gPiAwKVxuICAgICAgJiYgcmVzLmNvbnN1bWVkUG9pbnRzID49IHRoaXMuaW5NZW1vcnlCbG9ja09uQ29uc3VtZWRcbiAgICApIHtcbiAgICAgIHRoaXMuX2luTWVtb3J5QmxvY2tlZEtleXMuYWRkTXMocmxLZXksIHJlcy5tc0JlZm9yZU5leHQpO1xuICAgICAgaWYgKHJlcy5jb25zdW1lZFBvaW50cyA+IHRoaXMucG9pbnRzKSB7XG4gICAgICAgIHJldHVybiByZWplY3QocmVzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHJlcylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlcy5jb25zdW1lZFBvaW50cyA+IHRoaXMucG9pbnRzKSB7XG4gICAgICBsZXQgYmxvY2tQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAvLyBCbG9jayBvbmx5IGZpcnN0IHRpbWUgd2hlbiBjb25zdW1lZCBtb3JlIHRoYW4gcG9pbnRzXG4gICAgICBpZiAodGhpcy5ibG9ja0R1cmF0aW9uID4gMCAmJiByZXMuY29uc3VtZWRQb2ludHMgPD0gKHRoaXMucG9pbnRzICsgY2hhbmdlZFBvaW50cykpIHtcbiAgICAgICAgcmVzLm1zQmVmb3JlTmV4dCA9IHRoaXMubXNCbG9ja0R1cmF0aW9uO1xuICAgICAgICBibG9ja1Byb21pc2UgPSB0aGlzLl9ibG9jayhybEtleSwgcmVzLmNvbnN1bWVkUG9pbnRzLCB0aGlzLm1zQmxvY2tEdXJhdGlvbiwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmluTWVtb3J5QmxvY2tPbkNvbnN1bWVkID4gMCAmJiByZXMuY29uc3VtZWRQb2ludHMgPj0gdGhpcy5pbk1lbW9yeUJsb2NrT25Db25zdW1lZCkge1xuICAgICAgICAvLyBCbG9jayBrZXkgZm9yIHRoaXMuaW5NZW1vcnlCbG9ja0R1cmF0aW9uIHNlY29uZHNcbiAgICAgICAgdGhpcy5faW5NZW1vcnlCbG9ja2VkS2V5cy5hZGQocmxLZXksIHRoaXMuaW5NZW1vcnlCbG9ja0R1cmF0aW9uKTtcbiAgICAgICAgcmVzLm1zQmVmb3JlTmV4dCA9IHRoaXMubXNJbk1lbW9yeUJsb2NrRHVyYXRpb247XG4gICAgICB9XG5cbiAgICAgIGJsb2NrUHJvbWlzZVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KHJlcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5leGVjRXZlbmx5ICYmIHJlcy5tc0JlZm9yZU5leHQgPiAwICYmICFyZXMuaXNGaXJzdEluRHVyYXRpb24pIHtcbiAgICAgIGxldCBkZWxheSA9IE1hdGguY2VpbChyZXMubXNCZWZvcmVOZXh0IC8gKHJlcy5yZW1haW5pbmdQb2ludHMgKyAyKSk7XG4gICAgICBpZiAoZGVsYXkgPCB0aGlzLmV4ZWNFdmVubHlNaW5EZWxheU1zKSB7XG4gICAgICAgIGRlbGF5ID0gcmVzLmNvbnN1bWVkUG9pbnRzICogdGhpcy5leGVjRXZlbmx5TWluRGVsYXlNcztcbiAgICAgIH1cblxuICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSwgcmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZShyZXMpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVFcnJvcihlcnIsIGZ1bmNOYW1lLCByZXNvbHZlLCByZWplY3QsIGtleSwgZGF0YSA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoISh0aGlzLmluc3VyYW5jZUxpbWl0ZXIgaW5zdGFuY2VvZiBSYXRlTGltaXRlckFic3RyYWN0KSkge1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5zdXJhbmNlTGltaXRlcltmdW5jTmFtZV0oa2V5LCBkYXRhLCBvcHRpb25zKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgIHJlamVjdChyZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXRJbk1lbW9yeUJsb2NrTXNCZWZvcmVFeHBpcmUocmxLZXkpIHtcbiAgICBpZiAodGhpcy5pbk1lbW9yeUJsb2NrT25Db25zdW1lZCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbk1lbW9yeUJsb2NrZWRLZXlzLm1zQmVmb3JlRXhwaXJlKHJsS2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGdldCBpbk1lbW9yeUJsb2NrT25Db25zdW1lZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5NZW1vcnlCbG9ja09uQ29uc3VtZWQ7XG4gIH1cblxuICBzZXQgaW5NZW1vcnlCbG9ja09uQ29uc3VtZWQodmFsdWUpIHtcbiAgICB0aGlzLl9pbk1lbW9yeUJsb2NrT25Db25zdW1lZCA9IHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogMDtcbiAgICBpZiAodGhpcy5pbk1lbW9yeUJsb2NrT25Db25zdW1lZCA+IDAgJiYgdGhpcy5wb2ludHMgPiB0aGlzLmluTWVtb3J5QmxvY2tPbkNvbnN1bWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luTWVtb3J5QmxvY2tPbkNvbnN1bWVkIG9wdGlvbiBtdXN0IGJlIGdyZWF0ZXIgb3IgZXF1YWwgXCJwb2ludHNcIiBvcHRpb24nKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaW5NZW1vcnlCbG9ja0R1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9pbk1lbW9yeUJsb2NrRHVyYXRpb247XG4gIH1cblxuICBzZXQgaW5NZW1vcnlCbG9ja0R1cmF0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5faW5NZW1vcnlCbG9ja0R1cmF0aW9uID0gdmFsdWUgPyBwYXJzZUludCh2YWx1ZSkgOiAwO1xuICAgIGlmICh0aGlzLmluTWVtb3J5QmxvY2tEdXJhdGlvbiA+IDAgJiYgdGhpcy5pbk1lbW9yeUJsb2NrT25Db25zdW1lZCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbk1lbW9yeUJsb2NrT25Db25zdW1lZCBvcHRpb24gbXVzdCBiZSBzZXQgdXAnKTtcbiAgICB9XG4gIH1cblxuICBnZXQgbXNJbk1lbW9yeUJsb2NrRHVyYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luTWVtb3J5QmxvY2tEdXJhdGlvbiAqIDEwMDA7XG4gIH1cblxuICBnZXQgaW5zdXJhbmNlTGltaXRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5faW5zdXJhbmNlTGltaXRlcjtcbiAgfVxuXG4gIHNldCBpbnN1cmFuY2VMaW1pdGVyKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIFJhdGVMaW1pdGVyQWJzdHJhY3QpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luc3VyYW5jZUxpbWl0ZXIgbXVzdCBiZSBpbnN0YW5jZSBvZiBSYXRlTGltaXRlckFic3RyYWN0Jyk7XG4gICAgfVxuICAgIHRoaXMuX2luc3VyYW5jZUxpbWl0ZXIgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5faW5zdXJhbmNlTGltaXRlcikge1xuICAgICAgdGhpcy5faW5zdXJhbmNlTGltaXRlci5ibG9ja0R1cmF0aW9uID0gdGhpcy5ibG9ja0R1cmF0aW9uO1xuICAgICAgdGhpcy5faW5zdXJhbmNlTGltaXRlci5leGVjRXZlbmx5ID0gdGhpcy5leGVjRXZlbmx5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCbG9jayBhbnkga2V5IGZvciBzZWNEdXJhdGlvbiBzZWNvbmRzXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHNlY0R1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm4gUHJvbWlzZTxSYXRlTGltaXRlclJlcz5cbiAgICovXG4gIGJsb2NrKGtleSwgc2VjRHVyYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1zRHVyYXRpb24gPSBzZWNEdXJhdGlvbiAqIDEwMDA7XG4gICAgcmV0dXJuIHRoaXMuX2Jsb2NrKHRoaXMuZ2V0S2V5KGtleSksIHRoaXMucG9pbnRzICsgMSwgbXNEdXJhdGlvbiwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHBvaW50cyBieSBrZXkgZm9yIGFueSBkdXJhdGlvblxuICAgKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEBwYXJhbSBwb2ludHNcbiAgICogQHBhcmFtIHNlY0R1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm4gUHJvbWlzZTxSYXRlTGltaXRlclJlcz5cbiAgICovXG4gIHNldChrZXksIHBvaW50cywgc2VjRHVyYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1zRHVyYXRpb24gPSAoc2VjRHVyYXRpb24gPj0gMCA/IHNlY0R1cmF0aW9uIDogdGhpcy5kdXJhdGlvbikgKiAxMDAwO1xuICAgIHJldHVybiB0aGlzLl9ibG9jayh0aGlzLmdldEtleShrZXkpLCBwb2ludHMsIG1zRHVyYXRpb24sIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHBvaW50c1RvQ29uc3VtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyBQcm9taXNlPFJhdGVMaW1pdGVyUmVzPlxuICAgKi9cbiAgY29uc3VtZShrZXksIHBvaW50c1RvQ29uc3VtZSA9IDEsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBybEtleSA9IHRoaXMuZ2V0S2V5KGtleSk7XG5cbiAgICAgIGNvbnN0IGluTWVtb3J5QmxvY2tNc0JlZm9yZUV4cGlyZSA9IHRoaXMuZ2V0SW5NZW1vcnlCbG9ja01zQmVmb3JlRXhwaXJlKHJsS2V5KTtcbiAgICAgIGlmIChpbk1lbW9yeUJsb2NrTXNCZWZvcmVFeHBpcmUgPiAwKSB7XG4gICAgICAgIHJldHVybiByZWplY3QobmV3IFJhdGVMaW1pdGVyUmVzKDAsIGluTWVtb3J5QmxvY2tNc0JlZm9yZUV4cGlyZSkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl91cHNlcnQocmxLZXksIHBvaW50c1RvQ29uc3VtZSwgdGhpcy5fZ2V0S2V5U2VjRHVyYXRpb24ob3B0aW9ucykgKiAxMDAwLCBmYWxzZSwgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHRoaXMuX2FmdGVyQ29uc3VtZShyZXNvbHZlLCByZWplY3QsIHJsS2V5LCBwb2ludHNUb0NvbnN1bWUsIHJlcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyLCAnY29uc3VtZScsIHJlc29sdmUsIHJlamVjdCwga2V5LCBwb2ludHNUb0NvbnN1bWUsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEBwYXJhbSBwb2ludHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybnMgUHJvbWlzZTxSYXRlTGltaXRlclJlcz5cbiAgICovXG4gIHBlbmFsdHkoa2V5LCBwb2ludHMgPSAxLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBybEtleSA9IHRoaXMuZ2V0S2V5KGtleSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3Vwc2VydChybEtleSwgcG9pbnRzLCB0aGlzLl9nZXRLZXlTZWNEdXJhdGlvbihvcHRpb25zKSAqIDEwMDAsIGZhbHNlLCBvcHRpb25zKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLl9nZXRSYXRlTGltaXRlclJlcyhybEtleSwgcG9pbnRzLCByZXMpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnIsICdwZW5hbHR5JywgcmVzb2x2ZSwgcmVqZWN0LCBrZXksIHBvaW50cywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHBvaW50c1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyBQcm9taXNlPFJhdGVMaW1pdGVyUmVzPlxuICAgKi9cbiAgcmV3YXJkKGtleSwgcG9pbnRzID0gMSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcmxLZXkgPSB0aGlzLmdldEtleShrZXkpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl91cHNlcnQocmxLZXksIC1wb2ludHMsIHRoaXMuX2dldEtleVNlY0R1cmF0aW9uKG9wdGlvbnMpICogMTAwMCwgZmFsc2UsIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHRoaXMuX2dldFJhdGVMaW1pdGVyUmVzKHJsS2V5LCAtcG9pbnRzLCByZXMpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnIsICdyZXdhcmQnLCByZXNvbHZlLCByZWplY3QsIGtleSwgcG9pbnRzLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyBQcm9taXNlPFJhdGVMaW1pdGVyUmVzPnxudWxsXG4gICAqL1xuICBnZXQoa2V5LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBybEtleSA9IHRoaXMuZ2V0S2V5KGtleSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2dldChybEtleSwgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwgfHwgdHlwZW9mIHJlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fZ2V0UmF0ZUxpbWl0ZXJSZXMocmxLZXksIDAsIHJlcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnIsICdnZXQnLCByZXNvbHZlLCByZWplY3QsIGtleSwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybnMgUHJvbWlzZTxib29sZWFuPlxuICAgKi9cbiAgZGVsZXRlKGtleSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcmxLZXkgPSB0aGlzLmdldEtleShrZXkpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGUocmxLZXksIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICB0aGlzLl9pbk1lbW9yeUJsb2NrZWRLZXlzLmRlbGV0ZShybEtleSk7XG4gICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKGVyciwgJ2RlbGV0ZScsIHJlc29sdmUsIHJlamVjdCwga2V5LCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBrZXlzIG5vLW1hdHRlciBleHBpcmVkIG9yIG5vdC5cbiAgICovXG4gIGRlbGV0ZUluTWVtb3J5QmxvY2tlZEFsbCgpIHtcbiAgICB0aGlzLl9pbk1lbW9yeUJsb2NrZWRLZXlzLmRlbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBSYXRlTGltaXRlclJlcyBvYmplY3QgZmlsbGVkIGRlcGVuZGluZyBvbiBzdG9yZVJlc3VsdCwgd2hpY2ggc3BlY2lmaWMgZm9yIGV4YWN0IHN0b3JlXG4gICAqXG4gICAqIEBwYXJhbSBybEtleVxuICAgKiBAcGFyYW0gY2hhbmdlZFBvaW50c1xuICAgKiBAcGFyYW0gc3RvcmVSZXN1bHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRSYXRlTGltaXRlclJlcyhybEtleSwgY2hhbmdlZFBvaW50cywgc3RvcmVSZXN1bHQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIHRvIGltcGxlbWVudCB0aGUgbWV0aG9kICdfZ2V0UmF0ZUxpbWl0ZXJSZXMnIVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCbG9jayBrZXkgZm9yIHRoaXMubXNCbG9ja0R1cmF0aW9uIG1pbGxpc2Vjb25kc1xuICAgKiBVc3VhbGx5LCBpdCBqdXN0IHByb2xvbmdzIGxpZmV0aW1lIG9mIGtleVxuICAgKlxuICAgKiBAcGFyYW0gcmxLZXlcbiAgICogQHBhcmFtIGluaXRQb2ludHNcbiAgICogQHBhcmFtIG1zRHVyYXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICpcbiAgICogQHJldHVybiBQcm9taXNlPGFueT5cbiAgICovXG4gIF9ibG9jayhybEtleSwgaW5pdFBvaW50cywgbXNEdXJhdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3Vwc2VydChybEtleSwgaW5pdFBvaW50cywgbXNEdXJhdGlvbiwgdHJ1ZSwgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUobmV3IFJhdGVMaW1pdGVyUmVzKDAsIG1zRHVyYXRpb24gPiAwID8gbXNEdXJhdGlvbiA6IC0xLCBpbml0UG9pbnRzKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyLCAnYmxvY2snLCByZXNvbHZlLCByZWplY3QsIHRoaXMucGFyc2VLZXkocmxLZXkpLCBtc0R1cmF0aW9uIC8gMTAwMCwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhdmUgdG8gYmUgaW1wbGVtZW50ZWQgaW4gZXZlcnkgbGltaXRlclxuICAgKiBSZXNvbHZlIHdpdGggcmF3IHJlc3VsdCBmcm9tIFN0b3JlIE9SIG51bGwgaWYgcmxLZXkgaXMgbm90IHNldFxuICAgKiBvciBSZWplY3Qgd2l0aCBlcnJvclxuICAgKlxuICAgKiBAcGFyYW0gcmxLZXlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHJldHVybiBQcm9taXNlPGFueT5cbiAgICovXG4gIF9nZXQocmxLZXksIG9wdGlvbnMgPSB7fSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgdG8gaW1wbGVtZW50IHRoZSBtZXRob2QgJ19nZXQnIVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYXZlIHRvIGJlIGltcGxlbWVudGVkXG4gICAqIFJlc29sdmUgd2l0aCB0cnVlIE9SIGZhbHNlIGlmIHJsS2V5IGRvZXNuJ3QgZXhpc3RcbiAgICogb3IgUmVqZWN0IHdpdGggZXJyb3JcbiAgICpcbiAgICogQHBhcmFtIHJsS2V5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEByZXR1cm4gUHJvbWlzZTxhbnk+XG4gICAqL1xuICBfZGVsZXRlKHJsS2V5LCBvcHRpb25zID0ge30pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIHRvIGltcGxlbWVudCB0aGUgbWV0aG9kICdfZGVsZXRlJyFcIik7XG4gIH1cblxuICAvKipcbiAgICogSGF2ZSB0byBiZSBpbXBsZW1lbnRlZFxuICAgKiBSZXNvbHZlIHdpdGggb2JqZWN0IHVzZWQgZm9yIHtAbGluayBfZ2V0UmF0ZUxpbWl0ZXJSZXN9IHRvIGdlbmVyYXRlIHtAbGluayBSYXRlTGltaXRlclJlc31cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJsS2V5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1zRHVyYXRpb25cbiAgICogQHBhcmFtIHtib29sZWFufSBmb3JjZUV4cGlyZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAYWJzdHJhY3RcbiAgICpcbiAgICogQHJldHVybiBQcm9taXNlPE9iamVjdD5cbiAgICovXG4gIF91cHNlcnQocmxLZXksIHBvaW50cywgbXNEdXJhdGlvbiwgZm9yY2VFeHBpcmUgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgdG8gaW1wbGVtZW50IHRoZSBtZXRob2QgJ191cHNlcnQnIVwiKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlckFic3RyYWN0IiwicmVxdWlyZSIsIkJsb2NrZWRLZXlzIiwiUmF0ZUxpbWl0ZXJSZXMiLCJtb2R1bGUiLCJleHBvcnRzIiwiUmF0ZUxpbWl0ZXJTdG9yZUFic3RyYWN0IiwiY29uc3RydWN0b3IiLCJvcHRzIiwiaW5NZW1vcnlCbG9ja09uQ29uc3VtZWQiLCJpbk1lbW9yeUJsb2NrRHVyYXRpb24iLCJpbnN1cmFuY2VMaW1pdGVyIiwiX2luTWVtb3J5QmxvY2tlZEtleXMiLCJjbGllbnQiLCJfY2xpZW50IiwidmFsdWUiLCJFcnJvciIsIl9hZnRlckNvbnN1bWUiLCJyZXNvbHZlIiwicmVqZWN0IiwicmxLZXkiLCJjaGFuZ2VkUG9pbnRzIiwic3RvcmVSZXN1bHQiLCJvcHRpb25zIiwicmVzIiwiX2dldFJhdGVMaW1pdGVyUmVzIiwiY29uc3VtZWRQb2ludHMiLCJhZGRNcyIsIm1zQmVmb3JlTmV4dCIsInBvaW50cyIsImJsb2NrUHJvbWlzZSIsIlByb21pc2UiLCJibG9ja0R1cmF0aW9uIiwibXNCbG9ja0R1cmF0aW9uIiwiX2Jsb2NrIiwiYWRkIiwibXNJbk1lbW9yeUJsb2NrRHVyYXRpb24iLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJleGVjRXZlbmx5IiwiaXNGaXJzdEluRHVyYXRpb24iLCJkZWxheSIsIk1hdGgiLCJjZWlsIiwicmVtYWluaW5nUG9pbnRzIiwiZXhlY0V2ZW5seU1pbkRlbGF5TXMiLCJzZXRUaW1lb3V0IiwiX2hhbmRsZUVycm9yIiwiZnVuY05hbWUiLCJrZXkiLCJkYXRhIiwiZ2V0SW5NZW1vcnlCbG9ja01zQmVmb3JlRXhwaXJlIiwibXNCZWZvcmVFeHBpcmUiLCJfaW5NZW1vcnlCbG9ja09uQ29uc3VtZWQiLCJwYXJzZUludCIsIl9pbk1lbW9yeUJsb2NrRHVyYXRpb24iLCJfaW5zdXJhbmNlTGltaXRlciIsImJsb2NrIiwic2VjRHVyYXRpb24iLCJtc0R1cmF0aW9uIiwiZ2V0S2V5Iiwic2V0IiwiZHVyYXRpb24iLCJjb25zdW1lIiwicG9pbnRzVG9Db25zdW1lIiwiaW5NZW1vcnlCbG9ja01zQmVmb3JlRXhwaXJlIiwiX3Vwc2VydCIsIl9nZXRLZXlTZWNEdXJhdGlvbiIsInBlbmFsdHkiLCJyZXdhcmQiLCJnZXQiLCJfZ2V0IiwiZGVsZXRlIiwiX2RlbGV0ZSIsImRlbGV0ZUluTWVtb3J5QmxvY2tlZEFsbCIsImluaXRQb2ludHMiLCJwYXJzZUtleSIsImZvcmNlRXhwaXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterStoreAbstract.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterUnion.js":
/*!********************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/RateLimiterUnion.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const RateLimiterAbstract = __webpack_require__(/*! ./RateLimiterAbstract */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js\");\nmodule.exports = class RateLimiterUnion {\n    constructor(...limiters){\n        if (limiters.length < 1) {\n            throw new Error(\"RateLimiterUnion: at least one limiter have to be passed\");\n        }\n        limiters.forEach((limiter)=>{\n            if (!(limiter instanceof RateLimiterAbstract)) {\n                throw new Error(\"RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract\");\n            }\n        });\n        this._limiters = limiters;\n    }\n    consume(key, points = 1) {\n        return new Promise((resolve, reject)=>{\n            const promises = [];\n            this._limiters.forEach((limiter)=>{\n                promises.push(limiter.consume(key, points).catch((rej)=>({\n                        rejected: true,\n                        rej\n                    })));\n            });\n            Promise.all(promises).then((res)=>{\n                const resObj = {};\n                let rejected = false;\n                res.forEach((item)=>{\n                    if (item.rejected === true) {\n                        rejected = true;\n                    }\n                });\n                for(let i = 0; i < res.length; i++){\n                    if (rejected && res[i].rejected === true) {\n                        resObj[this._limiters[i].keyPrefix] = res[i].rej;\n                    } else if (!rejected) {\n                        resObj[this._limiters[i].keyPrefix] = res[i];\n                    }\n                }\n                if (rejected) {\n                    reject(resObj);\n                } else {\n                    resolve(resObj);\n                }\n            });\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9SYXRlTGltaXRlclVuaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLHNCQUFzQkMsbUJBQU9BLENBQUM7QUFFcENDLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQkMsWUFBWSxHQUFHQyxRQUFRLENBQUU7UUFDdkIsSUFBSUEsU0FBU0MsTUFBTSxHQUFHLEdBQUc7WUFDdkIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0FGLFNBQVNHLE9BQU8sQ0FBQyxDQUFDQztZQUNoQixJQUFJLENBQUVBLENBQUFBLG1CQUFtQlYsbUJBQWtCLEdBQUk7Z0JBQzdDLE1BQU0sSUFBSVEsTUFBTTtZQUNsQjtRQUNGO1FBRUEsSUFBSSxDQUFDRyxTQUFTLEdBQUdMO0lBQ25CO0lBRUFNLFFBQVFDLEdBQUcsRUFBRUMsU0FBUyxDQUFDLEVBQUU7UUFDdkIsT0FBTyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQzNCLE1BQU1DLFdBQVcsRUFBRTtZQUNuQixJQUFJLENBQUNQLFNBQVMsQ0FBQ0YsT0FBTyxDQUFDLENBQUNDO2dCQUN0QlEsU0FBU0MsSUFBSSxDQUFDVCxRQUFRRSxPQUFPLENBQUNDLEtBQUtDLFFBQVFNLEtBQUssQ0FBQ0MsQ0FBQUEsTUFBUTt3QkFBRUMsVUFBVTt3QkFBTUQ7b0JBQUk7WUFDakY7WUFFQU4sUUFBUVEsR0FBRyxDQUFDTCxVQUNUTSxJQUFJLENBQUMsQ0FBQ0M7Z0JBQ0wsTUFBTUMsU0FBUyxDQUFDO2dCQUNoQixJQUFJSixXQUFXO2dCQUVmRyxJQUFJaEIsT0FBTyxDQUFDLENBQUNrQjtvQkFDWCxJQUFJQSxLQUFLTCxRQUFRLEtBQUssTUFBTTt3QkFDMUJBLFdBQVc7b0JBQ2I7Z0JBQ0Y7Z0JBRUEsSUFBSyxJQUFJTSxJQUFJLEdBQUdBLElBQUlILElBQUlsQixNQUFNLEVBQUVxQixJQUFLO29CQUNuQyxJQUFJTixZQUFZRyxHQUFHLENBQUNHLEVBQUUsQ0FBQ04sUUFBUSxLQUFLLE1BQU07d0JBQ3hDSSxNQUFNLENBQUMsSUFBSSxDQUFDZixTQUFTLENBQUNpQixFQUFFLENBQUNDLFNBQVMsQ0FBQyxHQUFHSixHQUFHLENBQUNHLEVBQUUsQ0FBQ1AsR0FBRztvQkFDbEQsT0FBTyxJQUFJLENBQUNDLFVBQVU7d0JBQ3BCSSxNQUFNLENBQUMsSUFBSSxDQUFDZixTQUFTLENBQUNpQixFQUFFLENBQUNDLFNBQVMsQ0FBQyxHQUFHSixHQUFHLENBQUNHLEVBQUU7b0JBQzlDO2dCQUNGO2dCQUVBLElBQUlOLFVBQVU7b0JBQ1pMLE9BQU9TO2dCQUNULE9BQU87b0JBQ0xWLFFBQVFVO2dCQUNWO1lBQ0Y7UUFDSjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvUmF0ZUxpbWl0ZXJVbmlvbi5qcz80MDYyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJhdGVMaW1pdGVyQWJzdHJhY3QgPSByZXF1aXJlKCcuL1JhdGVMaW1pdGVyQWJzdHJhY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBSYXRlTGltaXRlclVuaW9uIHtcbiAgY29uc3RydWN0b3IoLi4ubGltaXRlcnMpIHtcbiAgICBpZiAobGltaXRlcnMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXRlTGltaXRlclVuaW9uOiBhdCBsZWFzdCBvbmUgbGltaXRlciBoYXZlIHRvIGJlIHBhc3NlZCcpO1xuICAgIH1cbiAgICBsaW1pdGVycy5mb3JFYWNoKChsaW1pdGVyKSA9PiB7XG4gICAgICBpZiAoIShsaW1pdGVyIGluc3RhbmNlb2YgUmF0ZUxpbWl0ZXJBYnN0cmFjdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXRlTGltaXRlclVuaW9uOiBhbGwgbGltaXRlcnMgaGF2ZSB0byBiZSBpbnN0YW5jZSBvZiBSYXRlTGltaXRlckFic3RyYWN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9saW1pdGVycyA9IGxpbWl0ZXJzO1xuICB9XG5cbiAgY29uc3VtZShrZXksIHBvaW50cyA9IDEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICAgIHRoaXMuX2xpbWl0ZXJzLmZvckVhY2goKGxpbWl0ZXIpID0+IHtcbiAgICAgICAgcHJvbWlzZXMucHVzaChsaW1pdGVyLmNvbnN1bWUoa2V5LCBwb2ludHMpLmNhdGNoKHJlaiA9PiAoeyByZWplY3RlZDogdHJ1ZSwgcmVqIH0pKSk7XG4gICAgICB9KTtcblxuICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zdCByZXNPYmogPSB7fTtcbiAgICAgICAgICBsZXQgcmVqZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgIHJlcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICByZWplY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHJlamVjdGVkICYmIHJlc1tpXS5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICByZXNPYmpbdGhpcy5fbGltaXRlcnNbaV0ua2V5UHJlZml4XSA9IHJlc1tpXS5yZWo7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFyZWplY3RlZCkge1xuICAgICAgICAgICAgICByZXNPYmpbdGhpcy5fbGltaXRlcnNbaV0ua2V5UHJlZml4XSA9IHJlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHJlamVjdChyZXNPYmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlc09iaik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlckFic3RyYWN0IiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJSYXRlTGltaXRlclVuaW9uIiwiY29uc3RydWN0b3IiLCJsaW1pdGVycyIsImxlbmd0aCIsIkVycm9yIiwiZm9yRWFjaCIsImxpbWl0ZXIiLCJfbGltaXRlcnMiLCJjb25zdW1lIiwia2V5IiwicG9pbnRzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwcm9taXNlcyIsInB1c2giLCJjYXRjaCIsInJlaiIsInJlamVjdGVkIiwiYWxsIiwidGhlbiIsInJlcyIsInJlc09iaiIsIml0ZW0iLCJpIiwia2V5UHJlZml4Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterUnion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/BlockedKeys.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/BlockedKeys.js ***!
  \*************************************************************************************/
/***/ ((module) => {

eval("module.exports = class BlockedKeys {\n    constructor(){\n        this._keys = {}; // {'key': 1526279430331}\n        this._addedKeysAmount = 0;\n    }\n    collectExpired() {\n        const now = Date.now();\n        Object.keys(this._keys).forEach((key)=>{\n            if (this._keys[key] <= now) {\n                delete this._keys[key];\n            }\n        });\n        this._addedKeysAmount = Object.keys(this._keys).length;\n    }\n    /**\n   * Add new blocked key\n   *\n   * @param key String\n   * @param sec Number\n   */ add(key, sec) {\n        this.addMs(key, sec * 1000);\n    }\n    /**\n   * Add new blocked key for ms\n   *\n   * @param key String\n   * @param ms Number\n   */ addMs(key, ms) {\n        this._keys[key] = Date.now() + ms;\n        this._addedKeysAmount++;\n        if (this._addedKeysAmount > 999) {\n            this.collectExpired();\n        }\n    }\n    /**\n   * 0 means not blocked\n   *\n   * @param key\n   * @returns {number}\n   */ msBeforeExpire(key) {\n        const expire = this._keys[key];\n        if (expire && expire >= Date.now()) {\n            this.collectExpired();\n            const now = Date.now();\n            return expire >= now ? expire - now : 0;\n        }\n        return 0;\n    }\n    /**\n   * If key is not given, delete all data in memory\n   * \n   * @param {string|undefined} key\n   */ delete(key) {\n        if (key) {\n            delete this._keys[key];\n        } else {\n            Object.keys(this._keys).forEach((key)=>{\n                delete this._keys[key];\n            });\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L0Jsb2NrZWRLZXlzL0Jsb2NrZWRLZXlzLmpzPzk1YzgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBCbG9ja2VkS2V5cyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2tleXMgPSB7fTsgLy8geydrZXknOiAxNTI2Mjc5NDMwMzMxfVxuICAgIHRoaXMuX2FkZGVkS2V5c0Ftb3VudCA9IDA7XG4gIH1cblxuICBjb2xsZWN0RXhwaXJlZCgpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5fa2V5cykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBpZiAodGhpcy5fa2V5c1trZXldIDw9IG5vdykge1xuICAgICAgICBkZWxldGUgdGhpcy5fa2V5c1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fYWRkZWRLZXlzQW1vdW50ID0gT2JqZWN0LmtleXModGhpcy5fa2V5cykubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgYmxvY2tlZCBrZXlcbiAgICpcbiAgICogQHBhcmFtIGtleSBTdHJpbmdcbiAgICogQHBhcmFtIHNlYyBOdW1iZXJcbiAgICovXG4gIGFkZChrZXksIHNlYykge1xuICAgIHRoaXMuYWRkTXMoa2V5LCBzZWMgKiAxMDAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmV3IGJsb2NrZWQga2V5IGZvciBtc1xuICAgKlxuICAgKiBAcGFyYW0ga2V5IFN0cmluZ1xuICAgKiBAcGFyYW0gbXMgTnVtYmVyXG4gICAqL1xuICBhZGRNcyhrZXksIG1zKSB7XG4gICAgdGhpcy5fa2V5c1trZXldID0gRGF0ZS5ub3coKSArIG1zO1xuICAgIHRoaXMuX2FkZGVkS2V5c0Ftb3VudCsrO1xuICAgIGlmICh0aGlzLl9hZGRlZEtleXNBbW91bnQgPiA5OTkpIHtcbiAgICAgIHRoaXMuY29sbGVjdEV4cGlyZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogMCBtZWFucyBub3QgYmxvY2tlZFxuICAgKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtc0JlZm9yZUV4cGlyZShrZXkpIHtcbiAgICBjb25zdCBleHBpcmUgPSB0aGlzLl9rZXlzW2tleV07XG5cbiAgICBpZiAoZXhwaXJlICYmIGV4cGlyZSA+PSBEYXRlLm5vdygpKSB7XG4gICAgICB0aGlzLmNvbGxlY3RFeHBpcmVkKCk7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgcmV0dXJuIGV4cGlyZSA+PSBub3cgPyBleHBpcmUgLSBub3cgOiAwO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGtleSBpcyBub3QgZ2l2ZW4sIGRlbGV0ZSBhbGwgZGF0YSBpbiBtZW1vcnlcbiAgICogXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0ga2V5XG4gICAqL1xuICBkZWxldGUoa2V5KSB7XG4gICAgaWYgKGtleSkge1xuICAgICAgZGVsZXRlIHRoaXMuX2tleXNba2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgT2JqZWN0LmtleXModGhpcy5fa2V5cykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9rZXlzW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG4iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIkJsb2NrZWRLZXlzIiwiY29uc3RydWN0b3IiLCJfa2V5cyIsIl9hZGRlZEtleXNBbW91bnQiLCJjb2xsZWN0RXhwaXJlZCIsIm5vdyIsIkRhdGUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsImxlbmd0aCIsImFkZCIsInNlYyIsImFkZE1zIiwibXMiLCJtc0JlZm9yZUV4cGlyZSIsImV4cGlyZSIsImRlbGV0ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQkMsYUFBYztRQUNaLElBQUksQ0FBQ0MsS0FBSyxHQUFHLENBQUMsR0FBRyx5QkFBeUI7UUFDMUMsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRztJQUMxQjtJQUVBQyxpQkFBaUI7UUFDZixNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO1FBRXBCRSxPQUFPQyxJQUFJLENBQUMsSUFBSSxDQUFDTixLQUFLLEVBQUVPLE9BQU8sQ0FBQyxDQUFDQztZQUMvQixJQUFJLElBQUksQ0FBQ1IsS0FBSyxDQUFDUSxJQUFJLElBQUlMLEtBQUs7Z0JBQzFCLE9BQU8sSUFBSSxDQUFDSCxLQUFLLENBQUNRLElBQUk7WUFDeEI7UUFDRjtRQUVBLElBQUksQ0FBQ1AsZ0JBQWdCLEdBQUdJLE9BQU9DLElBQUksQ0FBQyxJQUFJLENBQUNOLEtBQUssRUFBRVMsTUFBTTtJQUN4RDtJQUVBOzs7OztHQUtDLEdBQ0RDLElBQUlGLEdBQUcsRUFBRUcsR0FBRyxFQUFFO1FBQ1osSUFBSSxDQUFDQyxLQUFLLENBQUNKLEtBQUtHLE1BQU07SUFDeEI7SUFFQTs7Ozs7R0FLQyxHQUNEQyxNQUFNSixHQUFHLEVBQUVLLEVBQUUsRUFBRTtRQUNiLElBQUksQ0FBQ2IsS0FBSyxDQUFDUSxJQUFJLEdBQUdKLEtBQUtELEdBQUcsS0FBS1U7UUFDL0IsSUFBSSxDQUFDWixnQkFBZ0I7UUFDckIsSUFBSSxJQUFJLENBQUNBLGdCQUFnQixHQUFHLEtBQUs7WUFDL0IsSUFBSSxDQUFDQyxjQUFjO1FBQ3JCO0lBQ0Y7SUFFQTs7Ozs7R0FLQyxHQUNEWSxlQUFlTixHQUFHLEVBQUU7UUFDbEIsTUFBTU8sU0FBUyxJQUFJLENBQUNmLEtBQUssQ0FBQ1EsSUFBSTtRQUU5QixJQUFJTyxVQUFVQSxVQUFVWCxLQUFLRCxHQUFHLElBQUk7WUFDbEMsSUFBSSxDQUFDRCxjQUFjO1lBQ25CLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7WUFDcEIsT0FBT1ksVUFBVVosTUFBTVksU0FBU1osTUFBTTtRQUN4QztRQUVBLE9BQU87SUFDVDtJQUVBOzs7O0dBSUMsR0FDRGEsT0FBT1IsR0FBRyxFQUFFO1FBQ1YsSUFBSUEsS0FBSztZQUNQLE9BQU8sSUFBSSxDQUFDUixLQUFLLENBQUNRLElBQUk7UUFDeEIsT0FBTztZQUNMSCxPQUFPQyxJQUFJLENBQUMsSUFBSSxDQUFDTixLQUFLLEVBQUVPLE9BQU8sQ0FBQyxDQUFDQztnQkFDL0IsT0FBTyxJQUFJLENBQUNSLEtBQUssQ0FBQ1EsSUFBSTtZQUN4QjtRQUNGO0lBQ0Y7QUFDRiIsImZpbGUiOiIocnNjKS8uL25vZGVfbW9kdWxlcy9yYXRlLWxpbWl0ZXItZmxleGlibGUvbGliL2NvbXBvbmVudC9CbG9ja2VkS2V5cy9CbG9ja2VkS2V5cy5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/BlockedKeys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/index.js ***!
  \*******************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const BlockedKeys = __webpack_require__(/*! ./BlockedKeys */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/BlockedKeys.js\");\nmodule.exports = BlockedKeys;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9jb21wb25lbnQvQmxvY2tlZEtleXMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsY0FBY0MsbUJBQU9BLENBQUM7QUFFNUJDLE9BQU9DLE9BQU8sR0FBR0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L0Jsb2NrZWRLZXlzL2luZGV4LmpzP2RmNTMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQmxvY2tlZEtleXMgPSByZXF1aXJlKCcuL0Jsb2NrZWRLZXlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2tlZEtleXM7XG4iXSwibmFtZXMiOlsiQmxvY2tlZEtleXMiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/component/BlockedKeys/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/MemoryStorage.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/MemoryStorage.js ***!
  \*****************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const Record = __webpack_require__(/*! ./Record */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/Record.js\");\nconst RateLimiterRes = __webpack_require__(/*! ../../RateLimiterRes */ \"(rsc)/./node_modules/rate-limiter-flexible/lib/RateLimiterRes.js\");\nmodule.exports = class MemoryStorage {\n    constructor(){\n        /**\n     * @type {Object.<string, Record>}\n     * @private\n     */ this._storage = {};\n    }\n    incrby(key, value, durationSec) {\n        if (this._storage[key]) {\n            const msBeforeExpires = this._storage[key].expiresAt ? this._storage[key].expiresAt.getTime() - new Date().getTime() : -1;\n            if (!this._storage[key].expiresAt || msBeforeExpires > 0) {\n                // Change value\n                this._storage[key].value = this._storage[key].value + value;\n                return new RateLimiterRes(0, msBeforeExpires, this._storage[key].value, false);\n            }\n            return this.set(key, value, durationSec);\n        }\n        return this.set(key, value, durationSec);\n    }\n    set(key, value, durationSec) {\n        const durationMs = durationSec * 1000;\n        if (this._storage[key] && this._storage[key].timeoutId) {\n            clearTimeout(this._storage[key].timeoutId);\n        }\n        this._storage[key] = new Record(value, durationMs > 0 ? new Date(Date.now() + durationMs) : null);\n        if (durationMs > 0) {\n            this._storage[key].timeoutId = setTimeout(()=>{\n                delete this._storage[key];\n            }, durationMs);\n            if (this._storage[key].timeoutId.unref) {\n                this._storage[key].timeoutId.unref();\n            }\n        }\n        return new RateLimiterRes(0, durationMs === 0 ? -1 : durationMs, this._storage[key].value, true);\n    }\n    /**\n   *\n   * @param key\n   * @returns {*}\n   */ get(key) {\n        if (this._storage[key]) {\n            const msBeforeExpires = this._storage[key].expiresAt ? this._storage[key].expiresAt.getTime() - new Date().getTime() : -1;\n            return new RateLimiterRes(0, msBeforeExpires, this._storage[key].value, false);\n        }\n        return null;\n    }\n    /**\n   *\n   * @param key\n   * @returns {boolean}\n   */ delete(key) {\n        if (this._storage[key]) {\n            if (this._storage[key].timeoutId) {\n                clearTimeout(this._storage[key].timeoutId);\n            }\n            delete this._storage[key];\n            return true;\n        }\n        return false;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9jb21wb25lbnQvTWVtb3J5U3RvcmFnZS9NZW1vcnlTdG9yYWdlLmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFNBQVNDLG1CQUFPQSxDQUFDO0FBQ3ZCLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUM7QUFFL0JFLE9BQU9DLE9BQU8sR0FBRyxNQUFNQztJQUNyQkMsYUFBYztRQUNaOzs7S0FHQyxHQUNELElBQUksQ0FBQ0MsUUFBUSxHQUFHLENBQUM7SUFDbkI7SUFFQUMsT0FBT0MsR0FBRyxFQUFFQyxLQUFLLEVBQUVDLFdBQVcsRUFBRTtRQUM5QixJQUFJLElBQUksQ0FBQ0osUUFBUSxDQUFDRSxJQUFJLEVBQUU7WUFDdEIsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0wsUUFBUSxDQUFDRSxJQUFJLENBQUNJLFNBQVMsR0FDaEQsSUFBSSxDQUFDTixRQUFRLENBQUNFLElBQUksQ0FBQ0ksU0FBUyxDQUFDQyxPQUFPLEtBQUssSUFBSUMsT0FBT0QsT0FBTyxLQUMzRCxDQUFDO1lBQ0wsSUFBSSxDQUFDLElBQUksQ0FBQ1AsUUFBUSxDQUFDRSxJQUFJLENBQUNJLFNBQVMsSUFBSUQsa0JBQWtCLEdBQUc7Z0JBQ3hELGVBQWU7Z0JBQ2YsSUFBSSxDQUFDTCxRQUFRLENBQUNFLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0gsUUFBUSxDQUFDRSxJQUFJLENBQUNDLEtBQUssR0FBR0E7Z0JBRXRELE9BQU8sSUFBSVIsZUFBZSxHQUFHVSxpQkFBaUIsSUFBSSxDQUFDTCxRQUFRLENBQUNFLElBQUksQ0FBQ0MsS0FBSyxFQUFFO1lBQzFFO1lBRUEsT0FBTyxJQUFJLENBQUNNLEdBQUcsQ0FBQ1AsS0FBS0MsT0FBT0M7UUFDOUI7UUFDQSxPQUFPLElBQUksQ0FBQ0ssR0FBRyxDQUFDUCxLQUFLQyxPQUFPQztJQUM5QjtJQUVBSyxJQUFJUCxHQUFHLEVBQUVDLEtBQUssRUFBRUMsV0FBVyxFQUFFO1FBQzNCLE1BQU1NLGFBQWFOLGNBQWM7UUFFakMsSUFBSSxJQUFJLENBQUNKLFFBQVEsQ0FBQ0UsSUFBSSxJQUFJLElBQUksQ0FBQ0YsUUFBUSxDQUFDRSxJQUFJLENBQUNTLFNBQVMsRUFBRTtZQUN0REMsYUFBYSxJQUFJLENBQUNaLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDUyxTQUFTO1FBQzNDO1FBRUEsSUFBSSxDQUFDWCxRQUFRLENBQUNFLElBQUksR0FBRyxJQUFJVCxPQUN2QlUsT0FDQU8sYUFBYSxJQUFJLElBQUlGLEtBQUtBLEtBQUtLLEdBQUcsS0FBS0gsY0FBYztRQUV2RCxJQUFJQSxhQUFhLEdBQUc7WUFDbEIsSUFBSSxDQUFDVixRQUFRLENBQUNFLElBQUksQ0FBQ1MsU0FBUyxHQUFHRyxXQUFXO2dCQUN4QyxPQUFPLElBQUksQ0FBQ2QsUUFBUSxDQUFDRSxJQUFJO1lBQzNCLEdBQUdRO1lBQ0gsSUFBSSxJQUFJLENBQUNWLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDUyxTQUFTLENBQUNJLEtBQUssRUFBRTtnQkFDdEMsSUFBSSxDQUFDZixRQUFRLENBQUNFLElBQUksQ0FBQ1MsU0FBUyxDQUFDSSxLQUFLO1lBQ3BDO1FBQ0Y7UUFFQSxPQUFPLElBQUlwQixlQUFlLEdBQUdlLGVBQWUsSUFBSSxDQUFDLElBQUlBLFlBQVksSUFBSSxDQUFDVixRQUFRLENBQUNFLElBQUksQ0FBQ0MsS0FBSyxFQUFFO0lBQzdGO0lBRUE7Ozs7R0FJQyxHQUNEYSxJQUFJZCxHQUFHLEVBQUU7UUFDUCxJQUFJLElBQUksQ0FBQ0YsUUFBUSxDQUFDRSxJQUFJLEVBQUU7WUFDdEIsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0wsUUFBUSxDQUFDRSxJQUFJLENBQUNJLFNBQVMsR0FDaEQsSUFBSSxDQUFDTixRQUFRLENBQUNFLElBQUksQ0FBQ0ksU0FBUyxDQUFDQyxPQUFPLEtBQUssSUFBSUMsT0FBT0QsT0FBTyxLQUMzRCxDQUFDO1lBQ0wsT0FBTyxJQUFJWixlQUFlLEdBQUdVLGlCQUFpQixJQUFJLENBQUNMLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDQyxLQUFLLEVBQUU7UUFDMUU7UUFDQSxPQUFPO0lBQ1Q7SUFFQTs7OztHQUlDLEdBQ0RjLE9BQU9mLEdBQUcsRUFBRTtRQUNWLElBQUksSUFBSSxDQUFDRixRQUFRLENBQUNFLElBQUksRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQ0YsUUFBUSxDQUFDRSxJQUFJLENBQUNTLFNBQVMsRUFBRTtnQkFDaENDLGFBQWEsSUFBSSxDQUFDWixRQUFRLENBQUNFLElBQUksQ0FBQ1MsU0FBUztZQUMzQztZQUNBLE9BQU8sSUFBSSxDQUFDWCxRQUFRLENBQUNFLElBQUk7WUFDekIsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L01lbW9yeVN0b3JhZ2UvTWVtb3J5U3RvcmFnZS5qcz9hZjE5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlY29yZCA9IHJlcXVpcmUoJy4vUmVjb3JkJyk7XG5jb25zdCBSYXRlTGltaXRlclJlcyA9IHJlcXVpcmUoJy4uLy4uL1JhdGVMaW1pdGVyUmVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTWVtb3J5U3RvcmFnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgUmVjb3JkPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3N0b3JhZ2UgPSB7fTtcbiAgfVxuXG4gIGluY3JieShrZXksIHZhbHVlLCBkdXJhdGlvblNlYykge1xuICAgIGlmICh0aGlzLl9zdG9yYWdlW2tleV0pIHtcbiAgICAgIGNvbnN0IG1zQmVmb3JlRXhwaXJlcyA9IHRoaXMuX3N0b3JhZ2Vba2V5XS5leHBpcmVzQXRcbiAgICAgICAgPyB0aGlzLl9zdG9yYWdlW2tleV0uZXhwaXJlc0F0LmdldFRpbWUoKSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICAgIDogLTE7XG4gICAgICBpZiAoIXRoaXMuX3N0b3JhZ2Vba2V5XS5leHBpcmVzQXQgfHwgbXNCZWZvcmVFeHBpcmVzID4gMCkge1xuICAgICAgICAvLyBDaGFuZ2UgdmFsdWVcbiAgICAgICAgdGhpcy5fc3RvcmFnZVtrZXldLnZhbHVlID0gdGhpcy5fc3RvcmFnZVtrZXldLnZhbHVlICsgdmFsdWU7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRlclJlcygwLCBtc0JlZm9yZUV4cGlyZXMsIHRoaXMuX3N0b3JhZ2Vba2V5XS52YWx1ZSwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zZXQoa2V5LCB2YWx1ZSwgZHVyYXRpb25TZWMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXQoa2V5LCB2YWx1ZSwgZHVyYXRpb25TZWMpO1xuICB9XG5cbiAgc2V0KGtleSwgdmFsdWUsIGR1cmF0aW9uU2VjKSB7XG4gICAgY29uc3QgZHVyYXRpb25NcyA9IGR1cmF0aW9uU2VjICogMTAwMDtcblxuICAgIGlmICh0aGlzLl9zdG9yYWdlW2tleV0gJiYgdGhpcy5fc3RvcmFnZVtrZXldLnRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3N0b3JhZ2Vba2V5XS50aW1lb3V0SWQpO1xuICAgIH1cblxuICAgIHRoaXMuX3N0b3JhZ2Vba2V5XSA9IG5ldyBSZWNvcmQoXG4gICAgICB2YWx1ZSxcbiAgICAgIGR1cmF0aW9uTXMgPiAwID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIGR1cmF0aW9uTXMpIDogbnVsbFxuICAgICk7XG4gICAgaWYgKGR1cmF0aW9uTXMgPiAwKSB7XG4gICAgICB0aGlzLl9zdG9yYWdlW2tleV0udGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9zdG9yYWdlW2tleV07XG4gICAgICB9LCBkdXJhdGlvbk1zKTtcbiAgICAgIGlmICh0aGlzLl9zdG9yYWdlW2tleV0udGltZW91dElkLnVucmVmKSB7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Vba2V5XS50aW1lb3V0SWQudW5yZWYoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJhdGVMaW1pdGVyUmVzKDAsIGR1cmF0aW9uTXMgPT09IDAgPyAtMSA6IGR1cmF0aW9uTXMsIHRoaXMuX3N0b3JhZ2Vba2V5XS52YWx1ZSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIGdldChrZXkpIHtcbiAgICBpZiAodGhpcy5fc3RvcmFnZVtrZXldKSB7XG4gICAgICBjb25zdCBtc0JlZm9yZUV4cGlyZXMgPSB0aGlzLl9zdG9yYWdlW2tleV0uZXhwaXJlc0F0XG4gICAgICAgID8gdGhpcy5fc3RvcmFnZVtrZXldLmV4cGlyZXNBdC5nZXRUaW1lKCkgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgICAgICA6IC0xO1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRlclJlcygwLCBtc0JlZm9yZUV4cGlyZXMsIHRoaXMuX3N0b3JhZ2Vba2V5XS52YWx1ZSwgZmFsc2UpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZGVsZXRlKGtleSkge1xuICAgIGlmICh0aGlzLl9zdG9yYWdlW2tleV0pIHtcbiAgICAgIGlmICh0aGlzLl9zdG9yYWdlW2tleV0udGltZW91dElkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zdG9yYWdlW2tleV0udGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSB0aGlzLl9zdG9yYWdlW2tleV07XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIlJlY29yZCIsInJlcXVpcmUiLCJSYXRlTGltaXRlclJlcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJNZW1vcnlTdG9yYWdlIiwiY29uc3RydWN0b3IiLCJfc3RvcmFnZSIsImluY3JieSIsImtleSIsInZhbHVlIiwiZHVyYXRpb25TZWMiLCJtc0JlZm9yZUV4cGlyZXMiLCJleHBpcmVzQXQiLCJnZXRUaW1lIiwiRGF0ZSIsInNldCIsImR1cmF0aW9uTXMiLCJ0aW1lb3V0SWQiLCJjbGVhclRpbWVvdXQiLCJub3ciLCJzZXRUaW1lb3V0IiwidW5yZWYiLCJnZXQiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/MemoryStorage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/Record.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/Record.js ***!
  \**********************************************************************************/
/***/ ((module) => {

eval("module.exports = class Record {\n    /**\n   *\n   * @param value int\n   * @param expiresAt Date|int\n   * @param timeoutId\n   */ constructor(value, expiresAt, timeoutId = null){\n        this.value = value;\n        this.expiresAt = expiresAt;\n        this.timeoutId = timeoutId;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this._value = parseInt(value);\n    }\n    get expiresAt() {\n        return this._expiresAt;\n    }\n    set expiresAt(value) {\n        if (!(value instanceof Date) && Number.isInteger(value)) {\n            value = new Date(value);\n        }\n        this._expiresAt = value;\n    }\n    get timeoutId() {\n        return this._timeoutId;\n    }\n    set timeoutId(value) {\n        this._timeoutId = value;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L01lbW9yeVN0b3JhZ2UvUmVjb3JkLmpzPzY4ODkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBSZWNvcmQge1xuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHZhbHVlIGludFxuICAgKiBAcGFyYW0gZXhwaXJlc0F0IERhdGV8aW50XG4gICAqIEBwYXJhbSB0aW1lb3V0SWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHZhbHVlLCBleHBpcmVzQXQsIHRpbWVvdXRJZCA9IG51bGwpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5leHBpcmVzQXQgPSBleHBpcmVzQXQ7XG4gICAgdGhpcy50aW1lb3V0SWQgPSB0aW1lb3V0SWQ7XG4gIH1cblxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWUgPSBwYXJzZUludCh2YWx1ZSk7XG4gIH1cblxuICBnZXQgZXhwaXJlc0F0KCkge1xuICAgIHJldHVybiB0aGlzLl9leHBpcmVzQXQ7XG4gIH1cblxuICBzZXQgZXhwaXJlc0F0KHZhbHVlKSB7XG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSAmJiBOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHRoaXMuX2V4cGlyZXNBdCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHRpbWVvdXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGltZW91dElkO1xuICB9XG5cbiAgc2V0IHRpbWVvdXRJZCh2YWx1ZSkge1xuICAgIHRoaXMuX3RpbWVvdXRJZCA9IHZhbHVlO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJSZWNvcmQiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZXhwaXJlc0F0IiwidGltZW91dElkIiwiX3ZhbHVlIiwicGFyc2VJbnQiLCJfZXhwaXJlc0F0IiwiRGF0ZSIsIk51bWJlciIsImlzSW50ZWdlciIsIl90aW1lb3V0SWQiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxPQUFPLEdBQUcsTUFBTUM7SUFDckI7Ozs7O0dBS0MsR0FDREMsWUFBWUMsS0FBSyxFQUFFQyxTQUFTLEVBQUVDLFlBQVksSUFBSSxDQUFFO1FBQzlDLElBQUksQ0FBQ0YsS0FBSyxHQUFHQTtRQUNiLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNDLFNBQVMsR0FBR0E7SUFDbkI7SUFFQSxJQUFJRixRQUFRO1FBQ1YsT0FBTyxJQUFJLENBQUNHLE1BQU07SUFDcEI7SUFFQSxJQUFJSCxNQUFNQSxLQUFLLEVBQUU7UUFDZixJQUFJLENBQUNHLE1BQU0sR0FBR0MsU0FBU0o7SUFDekI7SUFFQSxJQUFJQyxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUNJLFVBQVU7SUFDeEI7SUFFQSxJQUFJSixVQUFVRCxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFFQSxDQUFBQSxpQkFBaUJNLElBQUcsS0FBTUMsT0FBT0MsU0FBUyxDQUFDUixRQUFRO1lBQ3ZEQSxRQUFRLElBQUlNLEtBQUtOO1FBQ25CO1FBQ0EsSUFBSSxDQUFDSyxVQUFVLEdBQUdMO0lBQ3BCO0lBRUEsSUFBSUUsWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDTyxVQUFVO0lBQ3hCO0lBRUEsSUFBSVAsVUFBVUYsS0FBSyxFQUFFO1FBQ25CLElBQUksQ0FBQ1MsVUFBVSxHQUFHVDtJQUNwQjtBQUNGIiwiZmlsZSI6Iihyc2MpLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L01lbW9yeVN0b3JhZ2UvUmVjb3JkLmpzIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/component/MemoryStorage/Record.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/rate-limiter-flexible/lib/component/RateLimiterQueueError.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/rate-limiter-flexible/lib/component/RateLimiterQueueError.js ***!
  \***********************************************************************************/
/***/ ((module) => {

eval("module.exports = class RateLimiterQueueError extends Error {\n    constructor(message, extra){\n        super();\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n        this.name = \"CustomError\";\n        this.message = message;\n        if (extra) {\n            this.extra = extra;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzL3JhdGUtbGltaXRlci1mbGV4aWJsZS9saWIvY29tcG9uZW50L1JhdGVMaW1pdGVyUXVldWVFcnJvci5qcz80ZDhlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBleHRyYSkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG4gICAgdGhpcy5uYW1lID0gJ0N1c3RvbUVycm9yJztcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmIChleHRyYSkge1xuICAgICAgdGhpcy5leHRyYSA9IGV4dHJhO1xuICAgIH1cbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHRyYSIsImNhcHR1cmVTdGFja1RyYWNlIiwibmFtZSJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQU8sR0FBRyxNQUFNQyw4QkFBOEJDO0lBQ25EQyxZQUFZQyxPQUFPLEVBQUVDLEtBQUssQ0FBRTtRQUMxQixLQUFLO1FBQ0wsSUFBSUgsTUFBTUksaUJBQWlCLEVBQUU7WUFDM0JKLE1BQU1JLGlCQUFpQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUNILFdBQVc7UUFDaEQ7UUFDQSxJQUFJLENBQUNJLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0gsT0FBTyxHQUFHQTtRQUNmLElBQUlDLE9BQU87WUFDVCxJQUFJLENBQUNBLEtBQUssR0FBR0E7UUFDZjtJQUNGO0FBQ0YiLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmF0ZS1saW1pdGVyLWZsZXhpYmxlL2xpYi9jb21wb25lbnQvUmF0ZUxpbWl0ZXJRdWV1ZUVycm9yLmpzIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/rate-limiter-flexible/lib/component/RateLimiterQueueError.js\n");

/***/ })

};
;