"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/payment/verify/route";
exports.ids = ["app/api/payment/verify/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "cluster":
/*!**************************!*\
  !*** external "cluster" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("cluster");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayment%2Fverify%2Froute&page=%2Fapi%2Fpayment%2Fverify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fverify%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayment%2Fverify%2Froute&page=%2Fapi%2Fpayment%2Fverify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fverify%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Ananya_Downloads_Nirvaanaa_current_Nirvaanaa_1_Nirvaanaa_app_api_payment_verify_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/payment/verify/route.js */ \"(rsc)/./app/api/payment/verify/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/payment/verify/route\",\n        pathname: \"/api/payment/verify\",\n        filename: \"route\",\n        bundlePath: \"app/api/payment/verify/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Ananya\\\\Downloads\\\\Nirvaanaa_current\\\\Nirvaanaa (1)\\\\Nirvaanaa\\\\app\\\\api\\\\payment\\\\verify\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Ananya_Downloads_Nirvaanaa_current_Nirvaanaa_1_Nirvaanaa_app_api_payment_verify_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/payment/verify/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwYXltZW50JTJGdmVyaWZ5JTJGcm91dGUmcGFnZT0lMkZhcGklMkZwYXltZW50JTJGdmVyaWZ5JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcGF5bWVudCUyRnZlcmlmeSUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBbmFueWElNUNEb3dubG9hZHMlNUNOaXJ2YWFuYWFfY3VycmVudCU1Q05pcnZhYW5hYSUyMCgxKSU1Q05pcnZhYW5hYSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQW5hbnlhJTVDRG93bmxvYWRzJTVDTmlydmFhbmFhX2N1cnJlbnQlNUNOaXJ2YWFuYWElMjAoMSklNUNOaXJ2YWFuYWEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDOEQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLz9kMGZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEFuYW55YVxcXFxEb3dubG9hZHNcXFxcTmlydmFhbmFhX2N1cnJlbnRcXFxcTmlydmFhbmFhICgxKVxcXFxOaXJ2YWFuYWFcXFxcYXBwXFxcXGFwaVxcXFxwYXltZW50XFxcXHZlcmlmeVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGF5bWVudC92ZXJpZnkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXltZW50L3ZlcmlmeVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF5bWVudC92ZXJpZnkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBbmFueWFcXFxcRG93bmxvYWRzXFxcXE5pcnZhYW5hYV9jdXJyZW50XFxcXE5pcnZhYW5hYSAoMSlcXFxcTmlydmFhbmFhXFxcXGFwcFxcXFxhcGlcXFxccGF5bWVudFxcXFx2ZXJpZnlcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcGF5bWVudC92ZXJpZnkvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayment%2Fverify%2Froute&page=%2Fapi%2Fpayment%2Fverify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fverify%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/payment/verify/route.js":
/*!*****************************************!*\
  !*** ./app/api/payment/verify/route.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var razorpay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! razorpay */ \"(rsc)/./node_modules/razorpay/dist/razorpay.js\");\n/* harmony import */ var razorpay__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(razorpay__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.js\");\n/* harmony import */ var _models_Order__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/models/Order */ \"(rsc)/./models/Order.js\");\n/* harmony import */ var _lib_rateLimit__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/rateLimit */ \"(rsc)/./lib/rateLimit.js\");\n\n\n\n\n\n\n// Initialize Razorpay client\nconst razorpay = new (razorpay__WEBPACK_IMPORTED_MODULE_1___default())({\n    key_id: process.env.RAZORPAY_KEY_ID,\n    key_secret: process.env.RAZORPAY_KEY_SECRET\n});\n/**\r\n * Verify Razorpay payment signature\r\n */ function verifyPaymentSignature(orderId, paymentId, signature) {\n    const text = `${orderId}|${paymentId}`;\n    const generatedSignature = crypto__WEBPACK_IMPORTED_MODULE_2___default().createHmac(\"sha256\", process.env.RAZORPAY_KEY_SECRET).update(text).digest(\"hex\");\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().timingSafeEqual(Buffer.from(signature), Buffer.from(generatedSignature));\n}\nasync function POST(request) {\n    // Apply rate limiting\n    const rateLimitResponse = await (0,_lib_rateLimit__WEBPACK_IMPORTED_MODULE_5__.rateLimit)(request, \"payment\");\n    if (rateLimitResponse) {\n        return rateLimitResponse;\n    }\n    try {\n        const body = await request.json();\n        const { razorpay_order_id, razorpay_payment_id, razorpay_signature, orderId } = body;\n        if (!razorpay_order_id || !razorpay_payment_id || !razorpay_signature) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Missing payment verification data\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify payment signature\n        const isValidSignature = verifyPaymentSignature(razorpay_order_id, razorpay_payment_id, razorpay_signature);\n        if (!isValidSignature) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid payment signature\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        // Find order\n        const order = await _models_Order__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findById(orderId);\n        if (!order) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Order not found\",\n                success: false\n            }, {\n                status: 404\n            });\n        }\n        // Verify payment with Razorpay API\n        try {\n            const payment = await razorpay.payments.fetch(razorpay_payment_id);\n            if (payment.status === \"captured\" && payment.order_id === razorpay_order_id) {\n                // Payment is valid and captured\n                // Update order status if not already updated (webhook might have done this)\n                if (order.paymentStatus !== \"paid\") {\n                    order.paymentStatus = \"paid\";\n                    order.status = \"processing\";\n                    order.razorpayPaymentId = razorpay_payment_id;\n                    order.razorpayOrderId = razorpay_order_id;\n                    if (order.addTimelineEntry) {\n                        order.addTimelineEntry(\"processing\", \"Payment verified and order is being processed\", null);\n                    }\n                    await order.save();\n                }\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: true,\n                    message: \"Payment verified successfully\",\n                    orderId: order._id.toString(),\n                    paymentId: razorpay_payment_id\n                });\n            } else {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Payment not captured\",\n                    success: false\n                }, {\n                    status: 400\n                });\n            }\n        } catch (error) {\n            console.error(\"Razorpay payment fetch error:\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to verify payment with Razorpay\",\n                success: false\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Payment verification error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Payment verification failed\",\n            success: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3BheW1lbnQvdmVyaWZ5L3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyQztBQUNYO0FBQ0o7QUFDVTtBQUNIO0FBQ1M7QUFFNUMsNkJBQTZCO0FBQzdCLE1BQU1NLFdBQVcsSUFBSUwsaURBQVFBLENBQUM7SUFDNUJNLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUNuQ0MsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxtQkFBbUI7QUFDN0M7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLHVCQUF1QkMsT0FBTyxFQUFFQyxTQUFTLEVBQUVDLFNBQVM7SUFDM0QsTUFBTUMsT0FBTyxDQUFDLEVBQUVILFFBQVEsQ0FBQyxFQUFFQyxVQUFVLENBQUM7SUFDdEMsTUFBTUcscUJBQXFCaEIsd0RBQ2QsQ0FBQyxVQUFVTSxRQUFRQyxHQUFHLENBQUNHLG1CQUFtQixFQUNwRFEsTUFBTSxDQUFDSCxNQUNQSSxNQUFNLENBQUM7SUFFVixPQUFPbkIsNkRBQXNCLENBQzNCcUIsT0FBT0MsSUFBSSxDQUFDUixZQUNaTyxPQUFPQyxJQUFJLENBQUNOO0FBRWhCO0FBRU8sZUFBZU8sS0FBS0MsT0FBTztJQUNoQyxzQkFBc0I7SUFDdEIsTUFBTUMsb0JBQW9CLE1BQU10Qix5REFBU0EsQ0FBQ3FCLFNBQVM7SUFDbkQsSUFBSUMsbUJBQW1CO1FBQ3JCLE9BQU9BO0lBQ1Q7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNRixRQUFRRyxJQUFJO1FBQy9CLE1BQU0sRUFDSkMsaUJBQWlCLEVBQ2pCQyxtQkFBbUIsRUFDbkJDLGtCQUFrQixFQUNsQmxCLE9BQU8sRUFDUixHQUFHYztRQUVKLElBQUksQ0FBQ0UscUJBQXFCLENBQUNDLHVCQUF1QixDQUFDQyxvQkFBb0I7WUFDckUsT0FBT2hDLGtGQUFZQSxDQUFDNkIsSUFBSSxDQUN0QjtnQkFBRUksT0FBTztZQUFvQyxHQUM3QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsMkJBQTJCO1FBQzNCLE1BQU1DLG1CQUFtQnRCLHVCQUN2QmlCLG1CQUNBQyxxQkFDQUM7UUFHRixJQUFJLENBQUNHLGtCQUFrQjtZQUNyQixPQUFPbkMsa0ZBQVlBLENBQUM2QixJQUFJLENBQ3RCO2dCQUFFSSxPQUFPO2dCQUE2QkcsU0FBUztZQUFNLEdBQ3JEO2dCQUFFRixRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNL0Isd0RBQVNBO1FBRWYsYUFBYTtRQUNiLE1BQU1rQyxRQUFRLE1BQU1qQyxxREFBS0EsQ0FBQ2tDLFFBQVEsQ0FBQ3hCO1FBQ25DLElBQUksQ0FBQ3VCLE9BQU87WUFDVixPQUFPckMsa0ZBQVlBLENBQUM2QixJQUFJLENBQ3RCO2dCQUFFSSxPQUFPO2dCQUFtQkcsU0FBUztZQUFNLEdBQzNDO2dCQUFFRixRQUFRO1lBQUk7UUFFbEI7UUFFQSxtQ0FBbUM7UUFDbkMsSUFBSTtZQUNGLE1BQU1LLFVBQVUsTUFBTWpDLFNBQVNrQyxRQUFRLENBQUNDLEtBQUssQ0FBQ1Y7WUFFOUMsSUFBSVEsUUFBUUwsTUFBTSxLQUFLLGNBQWNLLFFBQVFHLFFBQVEsS0FBS1osbUJBQW1CO2dCQUMzRSxnQ0FBZ0M7Z0JBQ2hDLDRFQUE0RTtnQkFDNUUsSUFBSU8sTUFBTU0sYUFBYSxLQUFLLFFBQVE7b0JBQ2xDTixNQUFNTSxhQUFhLEdBQUc7b0JBQ3RCTixNQUFNSCxNQUFNLEdBQUc7b0JBQ2ZHLE1BQU1PLGlCQUFpQixHQUFHYjtvQkFDMUJNLE1BQU1RLGVBQWUsR0FBR2Y7b0JBRXhCLElBQUlPLE1BQU1TLGdCQUFnQixFQUFFO3dCQUMxQlQsTUFBTVMsZ0JBQWdCLENBQ3BCLGNBQ0EsaURBQ0E7b0JBRUo7b0JBRUEsTUFBTVQsTUFBTVUsSUFBSTtnQkFDbEI7Z0JBRUEsT0FBTy9DLGtGQUFZQSxDQUFDNkIsSUFBSSxDQUFDO29CQUN2Qk8sU0FBUztvQkFDVFksU0FBUztvQkFDVGxDLFNBQVN1QixNQUFNWSxHQUFHLENBQUNDLFFBQVE7b0JBQzNCbkMsV0FBV2dCO2dCQUNiO1lBQ0YsT0FBTztnQkFDTCxPQUFPL0Isa0ZBQVlBLENBQUM2QixJQUFJLENBQ3RCO29CQUFFSSxPQUFPO29CQUF3QkcsU0FBUztnQkFBTSxHQUNoRDtvQkFBRUYsUUFBUTtnQkFBSTtZQUVsQjtRQUNGLEVBQUUsT0FBT0QsT0FBTztZQUNka0IsUUFBUWxCLEtBQUssQ0FBQyxpQ0FBaUNBO1lBQy9DLE9BQU9qQyxrRkFBWUEsQ0FBQzZCLElBQUksQ0FDdEI7Z0JBQUVJLE9BQU87Z0JBQTBDRyxTQUFTO1lBQU0sR0FDbEU7Z0JBQUVGLFFBQVE7WUFBSTtRQUVsQjtJQUNGLEVBQUUsT0FBT0QsT0FBTztRQUNka0IsUUFBUWxCLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU9qQyxrRkFBWUEsQ0FBQzZCLElBQUksQ0FDdEI7WUFBRUksT0FBTztZQUErQkcsU0FBUztRQUFNLEdBQ3ZEO1lBQUVGLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL2FwcC9hcGkvcGF5bWVudC92ZXJpZnkvcm91dGUuanM/ZjEwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCBSYXpvcnBheSBmcm9tICdyYXpvcnBheSc7XHJcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcclxuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICdAL2xpYi9tb25nb2RiJztcclxuaW1wb3J0IE9yZGVyIGZyb20gJ0AvbW9kZWxzL09yZGVyJztcclxuaW1wb3J0IHsgcmF0ZUxpbWl0IH0gZnJvbSAnQC9saWIvcmF0ZUxpbWl0JztcclxuXHJcbi8vIEluaXRpYWxpemUgUmF6b3JwYXkgY2xpZW50XHJcbmNvbnN0IHJhem9ycGF5ID0gbmV3IFJhem9ycGF5KHtcclxuICBrZXlfaWQ6IHByb2Nlc3MuZW52LlJBWk9SUEFZX0tFWV9JRCxcclxuICBrZXlfc2VjcmV0OiBwcm9jZXNzLmVudi5SQVpPUlBBWV9LRVlfU0VDUkVULFxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZnkgUmF6b3JwYXkgcGF5bWVudCBzaWduYXR1cmVcclxuICovXHJcbmZ1bmN0aW9uIHZlcmlmeVBheW1lbnRTaWduYXR1cmUob3JkZXJJZCwgcGF5bWVudElkLCBzaWduYXR1cmUpIHtcclxuICBjb25zdCB0ZXh0ID0gYCR7b3JkZXJJZH18JHtwYXltZW50SWR9YDtcclxuICBjb25zdCBnZW5lcmF0ZWRTaWduYXR1cmUgPSBjcnlwdG9cclxuICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBwcm9jZXNzLmVudi5SQVpPUlBBWV9LRVlfU0VDUkVUKVxyXG4gICAgLnVwZGF0ZSh0ZXh0KVxyXG4gICAgLmRpZ2VzdCgnaGV4Jyk7XHJcblxyXG4gIHJldHVybiBjcnlwdG8udGltaW5nU2FmZUVxdWFsKFxyXG4gICAgQnVmZmVyLmZyb20oc2lnbmF0dXJlKSxcclxuICAgIEJ1ZmZlci5mcm9tKGdlbmVyYXRlZFNpZ25hdHVyZSlcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XHJcbiAgLy8gQXBwbHkgcmF0ZSBsaW1pdGluZ1xyXG4gIGNvbnN0IHJhdGVMaW1pdFJlc3BvbnNlID0gYXdhaXQgcmF0ZUxpbWl0KHJlcXVlc3QsICdwYXltZW50Jyk7XHJcbiAgaWYgKHJhdGVMaW1pdFJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gcmF0ZUxpbWl0UmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3Qge1xyXG4gICAgICByYXpvcnBheV9vcmRlcl9pZCxcclxuICAgICAgcmF6b3JwYXlfcGF5bWVudF9pZCxcclxuICAgICAgcmF6b3JwYXlfc2lnbmF0dXJlLFxyXG4gICAgICBvcmRlcklkLFxyXG4gICAgfSA9IGJvZHk7XHJcblxyXG4gICAgaWYgKCFyYXpvcnBheV9vcmRlcl9pZCB8fCAhcmF6b3JwYXlfcGF5bWVudF9pZCB8fCAhcmF6b3JwYXlfc2lnbmF0dXJlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTWlzc2luZyBwYXltZW50IHZlcmlmaWNhdGlvbiBkYXRhJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSBwYXltZW50IHNpZ25hdHVyZVxyXG4gICAgY29uc3QgaXNWYWxpZFNpZ25hdHVyZSA9IHZlcmlmeVBheW1lbnRTaWduYXR1cmUoXHJcbiAgICAgIHJhem9ycGF5X29yZGVyX2lkLFxyXG4gICAgICByYXpvcnBheV9wYXltZW50X2lkLFxyXG4gICAgICByYXpvcnBheV9zaWduYXR1cmVcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFpc1ZhbGlkU2lnbmF0dXJlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBwYXltZW50IHNpZ25hdHVyZScsIHN1Y2Nlc3M6IGZhbHNlIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XHJcblxyXG4gICAgLy8gRmluZCBvcmRlclxyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChvcmRlcklkKTtcclxuICAgIGlmICghb3JkZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdPcmRlciBub3QgZm91bmQnLCBzdWNjZXNzOiBmYWxzZSB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSBwYXltZW50IHdpdGggUmF6b3JwYXkgQVBJXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgcmF6b3JwYXkucGF5bWVudHMuZmV0Y2gocmF6b3JwYXlfcGF5bWVudF9pZCk7XHJcblxyXG4gICAgICBpZiAocGF5bWVudC5zdGF0dXMgPT09ICdjYXB0dXJlZCcgJiYgcGF5bWVudC5vcmRlcl9pZCA9PT0gcmF6b3JwYXlfb3JkZXJfaWQpIHtcclxuICAgICAgICAvLyBQYXltZW50IGlzIHZhbGlkIGFuZCBjYXB0dXJlZFxyXG4gICAgICAgIC8vIFVwZGF0ZSBvcmRlciBzdGF0dXMgaWYgbm90IGFscmVhZHkgdXBkYXRlZCAod2ViaG9vayBtaWdodCBoYXZlIGRvbmUgdGhpcylcclxuICAgICAgICBpZiAob3JkZXIucGF5bWVudFN0YXR1cyAhPT0gJ3BhaWQnKSB7XHJcbiAgICAgICAgICBvcmRlci5wYXltZW50U3RhdHVzID0gJ3BhaWQnO1xyXG4gICAgICAgICAgb3JkZXIuc3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xyXG4gICAgICAgICAgb3JkZXIucmF6b3JwYXlQYXltZW50SWQgPSByYXpvcnBheV9wYXltZW50X2lkO1xyXG4gICAgICAgICAgb3JkZXIucmF6b3JwYXlPcmRlcklkID0gcmF6b3JwYXlfb3JkZXJfaWQ7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChvcmRlci5hZGRUaW1lbGluZUVudHJ5KSB7XHJcbiAgICAgICAgICAgIG9yZGVyLmFkZFRpbWVsaW5lRW50cnkoXHJcbiAgICAgICAgICAgICAgJ3Byb2Nlc3NpbmcnLFxyXG4gICAgICAgICAgICAgICdQYXltZW50IHZlcmlmaWVkIGFuZCBvcmRlciBpcyBiZWluZyBwcm9jZXNzZWQnLFxyXG4gICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYXdhaXQgb3JkZXIuc2F2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnUGF5bWVudCB2ZXJpZmllZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgICAgb3JkZXJJZDogb3JkZXIuX2lkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICBwYXltZW50SWQ6IHJhem9ycGF5X3BheW1lbnRfaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ1BheW1lbnQgbm90IGNhcHR1cmVkJywgc3VjY2VzczogZmFsc2UgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Jhem9ycGF5IHBheW1lbnQgZmV0Y2ggZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byB2ZXJpZnkgcGF5bWVudCB3aXRoIFJhem9ycGF5Jywgc3VjY2VzczogZmFsc2UgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUGF5bWVudCB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnUGF5bWVudCB2ZXJpZmljYXRpb24gZmFpbGVkJywgc3VjY2VzczogZmFsc2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlJhem9ycGF5IiwiY3J5cHRvIiwiZGJDb25uZWN0IiwiT3JkZXIiLCJyYXRlTGltaXQiLCJyYXpvcnBheSIsImtleV9pZCIsInByb2Nlc3MiLCJlbnYiLCJSQVpPUlBBWV9LRVlfSUQiLCJrZXlfc2VjcmV0IiwiUkFaT1JQQVlfS0VZX1NFQ1JFVCIsInZlcmlmeVBheW1lbnRTaWduYXR1cmUiLCJvcmRlcklkIiwicGF5bWVudElkIiwic2lnbmF0dXJlIiwidGV4dCIsImdlbmVyYXRlZFNpZ25hdHVyZSIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJkaWdlc3QiLCJ0aW1pbmdTYWZlRXF1YWwiLCJCdWZmZXIiLCJmcm9tIiwiUE9TVCIsInJlcXVlc3QiLCJyYXRlTGltaXRSZXNwb25zZSIsImJvZHkiLCJqc29uIiwicmF6b3JwYXlfb3JkZXJfaWQiLCJyYXpvcnBheV9wYXltZW50X2lkIiwicmF6b3JwYXlfc2lnbmF0dXJlIiwiZXJyb3IiLCJzdGF0dXMiLCJpc1ZhbGlkU2lnbmF0dXJlIiwic3VjY2VzcyIsIm9yZGVyIiwiZmluZEJ5SWQiLCJwYXltZW50IiwicGF5bWVudHMiLCJmZXRjaCIsIm9yZGVyX2lkIiwicGF5bWVudFN0YXR1cyIsInJhem9ycGF5UGF5bWVudElkIiwicmF6b3JwYXlPcmRlcklkIiwiYWRkVGltZWxpbmVFbnRyeSIsInNhdmUiLCJtZXNzYWdlIiwiX2lkIiwidG9TdHJpbmciLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/payment/verify/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUcsSUFBSSxDQUFDLENBQUNiO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xyXG4gKiBpbiBkZXZlbG9wbWVudC4gVGhpcyBwcmV2ZW50cyBjb25uZWN0aW9ucyBncm93aW5nIGV4cG9uZW50aWFsbHlcclxuICogZHVyaW5nIEFQSSBSb3V0ZSB1c2FnZS5cclxuICovXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cykudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aHJvdyBlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./lib/rateLimit.js":
/*!**************************!*\
  !*** ./lib/rateLimit.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit)\n/* harmony export */ });\n/* harmony import */ var rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rate-limiter-flexible */ \"(rsc)/./node_modules/rate-limiter-flexible/index.js\");\n/* harmony import */ var rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\n\n// Create rate limiters for different endpoints\nconst rateLimiters = {\n    // Auth endpoints: 5 requests per 15 minutes per IP\n    auth: new rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__.RateLimiterMemory({\n        points: 5,\n        duration: 15 * 60\n    }),\n    // API endpoints: 100 requests per 15 minutes per IP\n    api: new rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__.RateLimiterMemory({\n        points: 100,\n        duration: 15 * 60\n    }),\n    // Payment endpoints: 10 requests per 15 minutes per IP\n    payment: new rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__.RateLimiterMemory({\n        points: 10,\n        duration: 15 * 60\n    }),\n    // Admin endpoints: 30 requests per 15 minutes per IP\n    admin: new rate_limiter_flexible__WEBPACK_IMPORTED_MODULE_0__.RateLimiterMemory({\n        points: 30,\n        duration: 15 * 60\n    })\n};\n/**\r\n * Rate limiting middleware for Next.js API routes\r\n * @param {Request} request - The incoming request\r\n * @param {string} type - Type of rate limiter ('auth', 'api', 'payment', 'admin')\r\n * @returns {Promise<NextResponse|null>} - Returns error response if rate limited, null otherwise\r\n */ async function rateLimit(request, type = \"api\") {\n    try {\n        const limiter = rateLimiters[type] || rateLimiters.api;\n        // Get client IP address\n        const forwarded = request.headers.get(\"x-forwarded-for\");\n        const ip = forwarded ? forwarded.split(\",\")[0] : request.headers.get(\"x-real-ip\") || \"unknown\";\n        // Apply rate limit\n        await limiter.consume(ip);\n        return null; // No rate limit exceeded\n    } catch (error) {\n        // Rate limit exceeded\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Too many requests. Please try again later.\",\n            retryAfter: Math.ceil(error.msBeforeNext / 1000) || 60\n        }, {\n            status: 429,\n            headers: {\n                \"Retry-After\": Math.ceil(error.msBeforeNext / 1000) || 60,\n                \"X-RateLimit-Limit\": error.totalHits || 100,\n                \"X-RateLimit-Remaining\": 0\n            }\n        });\n    }\n}\n/**\r\n * Wrapper function to apply rate limiting to API route handlers\r\n */ function withRateLimit(handler, type = \"api\") {\n    return async (request, context)=>{\n        const rateLimitResponse = await rateLimit(request, type);\n        if (rateLimitResponse) {\n            return rateLimitResponse;\n        }\n        return handler(request, context);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF0ZUxpbWl0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBEO0FBQ2Y7QUFFM0MsK0NBQStDO0FBQy9DLE1BQU1FLGVBQWU7SUFDbkIsbURBQW1EO0lBQ25EQyxNQUFNLElBQUlILG9FQUFpQkEsQ0FBQztRQUMxQkksUUFBUTtRQUNSQyxVQUFVLEtBQUs7SUFDakI7SUFDQSxvREFBb0Q7SUFDcERDLEtBQUssSUFBSU4sb0VBQWlCQSxDQUFDO1FBQ3pCSSxRQUFRO1FBQ1JDLFVBQVUsS0FBSztJQUNqQjtJQUNBLHVEQUF1RDtJQUN2REUsU0FBUyxJQUFJUCxvRUFBaUJBLENBQUM7UUFDN0JJLFFBQVE7UUFDUkMsVUFBVSxLQUFLO0lBQ2pCO0lBQ0EscURBQXFEO0lBQ3JERyxPQUFPLElBQUlSLG9FQUFpQkEsQ0FBQztRQUMzQkksUUFBUTtRQUNSQyxVQUFVLEtBQUs7SUFDakI7QUFDRjtBQUVBOzs7OztDQUtDLEdBQ00sZUFBZUksVUFBVUMsT0FBTyxFQUFFQyxPQUFPLEtBQUs7SUFDbkQsSUFBSTtRQUNGLE1BQU1DLFVBQVVWLFlBQVksQ0FBQ1MsS0FBSyxJQUFJVCxhQUFhSSxHQUFHO1FBRXRELHdCQUF3QjtRQUN4QixNQUFNTyxZQUFZSCxRQUFRSSxPQUFPLENBQUNDLEdBQUcsQ0FBQztRQUN0QyxNQUFNQyxLQUFLSCxZQUFZQSxVQUFVSSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FDbkNQLFFBQVFJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdCQUNwQjtRQUVYLG1CQUFtQjtRQUNuQixNQUFNSCxRQUFRTSxPQUFPLENBQUNGO1FBRXRCLE9BQU8sTUFBTSx5QkFBeUI7SUFDeEMsRUFBRSxPQUFPRyxPQUFPO1FBQ2Qsc0JBQXNCO1FBQ3RCLE9BQU9sQixrRkFBWUEsQ0FBQ21CLElBQUksQ0FDdEI7WUFDRUQsT0FBTztZQUNQRSxZQUFZQyxLQUFLQyxJQUFJLENBQUNKLE1BQU1LLFlBQVksR0FBRyxTQUFTO1FBQ3RELEdBQ0E7WUFDRUMsUUFBUTtZQUNSWCxTQUFTO2dCQUNQLGVBQWVRLEtBQUtDLElBQUksQ0FBQ0osTUFBTUssWUFBWSxHQUFHLFNBQVM7Z0JBQ3ZELHFCQUFxQkwsTUFBTU8sU0FBUyxJQUFJO2dCQUN4Qyx5QkFBeUI7WUFDM0I7UUFDRjtJQUVKO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGNBQWNDLE9BQU8sRUFBRWpCLE9BQU8sS0FBSztJQUNqRCxPQUFPLE9BQU9ELFNBQVNtQjtRQUNyQixNQUFNQyxvQkFBb0IsTUFBTXJCLFVBQVVDLFNBQVNDO1FBQ25ELElBQUltQixtQkFBbUI7WUFDckIsT0FBT0E7UUFDVDtRQUNBLE9BQU9GLFFBQVFsQixTQUFTbUI7SUFDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9saWIvcmF0ZUxpbWl0LmpzPzZmM2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmF0ZUxpbWl0ZXJNZW1vcnkgfSBmcm9tICdyYXRlLWxpbWl0ZXItZmxleGlibGUnO1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcblxyXG4vLyBDcmVhdGUgcmF0ZSBsaW1pdGVycyBmb3IgZGlmZmVyZW50IGVuZHBvaW50c1xyXG5jb25zdCByYXRlTGltaXRlcnMgPSB7XHJcbiAgLy8gQXV0aCBlbmRwb2ludHM6IDUgcmVxdWVzdHMgcGVyIDE1IG1pbnV0ZXMgcGVyIElQXHJcbiAgYXV0aDogbmV3IFJhdGVMaW1pdGVyTWVtb3J5KHtcclxuICAgIHBvaW50czogNSxcclxuICAgIGR1cmF0aW9uOiAxNSAqIDYwLCAvLyAxNSBtaW51dGVzXHJcbiAgfSksXHJcbiAgLy8gQVBJIGVuZHBvaW50czogMTAwIHJlcXVlc3RzIHBlciAxNSBtaW51dGVzIHBlciBJUFxyXG4gIGFwaTogbmV3IFJhdGVMaW1pdGVyTWVtb3J5KHtcclxuICAgIHBvaW50czogMTAwLFxyXG4gICAgZHVyYXRpb246IDE1ICogNjAsIC8vIDE1IG1pbnV0ZXNcclxuICB9KSxcclxuICAvLyBQYXltZW50IGVuZHBvaW50czogMTAgcmVxdWVzdHMgcGVyIDE1IG1pbnV0ZXMgcGVyIElQXHJcbiAgcGF5bWVudDogbmV3IFJhdGVMaW1pdGVyTWVtb3J5KHtcclxuICAgIHBvaW50czogMTAsXHJcbiAgICBkdXJhdGlvbjogMTUgKiA2MCwgLy8gMTUgbWludXRlc1xyXG4gIH0pLFxyXG4gIC8vIEFkbWluIGVuZHBvaW50czogMzAgcmVxdWVzdHMgcGVyIDE1IG1pbnV0ZXMgcGVyIElQXHJcbiAgYWRtaW46IG5ldyBSYXRlTGltaXRlck1lbW9yeSh7XHJcbiAgICBwb2ludHM6IDMwLFxyXG4gICAgZHVyYXRpb246IDE1ICogNjAsIC8vIDE1IG1pbnV0ZXNcclxuICB9KSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSYXRlIGxpbWl0aW5nIG1pZGRsZXdhcmUgZm9yIE5leHQuanMgQVBJIHJvdXRlc1xyXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgLSBUaGUgaW5jb21pbmcgcmVxdWVzdFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFR5cGUgb2YgcmF0ZSBsaW1pdGVyICgnYXV0aCcsICdhcGknLCAncGF5bWVudCcsICdhZG1pbicpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE5leHRSZXNwb25zZXxudWxsPn0gLSBSZXR1cm5zIGVycm9yIHJlc3BvbnNlIGlmIHJhdGUgbGltaXRlZCwgbnVsbCBvdGhlcndpc2VcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByYXRlTGltaXQocmVxdWVzdCwgdHlwZSA9ICdhcGknKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGxpbWl0ZXIgPSByYXRlTGltaXRlcnNbdHlwZV0gfHwgcmF0ZUxpbWl0ZXJzLmFwaTtcclxuICAgIFxyXG4gICAgLy8gR2V0IGNsaWVudCBJUCBhZGRyZXNzXHJcbiAgICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcclxuICAgIGNvbnN0IGlwID0gZm9yd2FyZGVkID8gZm9yd2FyZGVkLnNwbGl0KCcsJylbMF0gOiBcclxuICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJykgfHwgXHJcbiAgICAgICAgICAgICAgICd1bmtub3duJztcclxuICAgIFxyXG4gICAgLy8gQXBwbHkgcmF0ZSBsaW1pdFxyXG4gICAgYXdhaXQgbGltaXRlci5jb25zdW1lKGlwKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7IC8vIE5vIHJhdGUgbGltaXQgZXhjZWVkZWRcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gUmF0ZSBsaW1pdCBleGNlZWRlZFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICByZXRyeUFmdGVyOiBNYXRoLmNlaWwoZXJyb3IubXNCZWZvcmVOZXh0IC8gMTAwMCkgfHwgNjBcclxuICAgICAgfSxcclxuICAgICAgeyBcclxuICAgICAgICBzdGF0dXM6IDQyOSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnUmV0cnktQWZ0ZXInOiBNYXRoLmNlaWwoZXJyb3IubXNCZWZvcmVOZXh0IC8gMTAwMCkgfHwgNjAsXHJcbiAgICAgICAgICAnWC1SYXRlTGltaXQtTGltaXQnOiBlcnJvci50b3RhbEhpdHMgfHwgMTAwLFxyXG4gICAgICAgICAgJ1gtUmF0ZUxpbWl0LVJlbWFpbmluZyc6IDAsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFdyYXBwZXIgZnVuY3Rpb24gdG8gYXBwbHkgcmF0ZSBsaW1pdGluZyB0byBBUEkgcm91dGUgaGFuZGxlcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmF0ZUxpbWl0KGhhbmRsZXIsIHR5cGUgPSAnYXBpJykge1xyXG4gIHJldHVybiBhc3luYyAocmVxdWVzdCwgY29udGV4dCkgPT4ge1xyXG4gICAgY29uc3QgcmF0ZUxpbWl0UmVzcG9uc2UgPSBhd2FpdCByYXRlTGltaXQocmVxdWVzdCwgdHlwZSk7XHJcbiAgICBpZiAocmF0ZUxpbWl0UmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJhdGVMaW1pdFJlc3BvbnNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgY29udGV4dCk7XHJcbiAgfTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyTWVtb3J5IiwiTmV4dFJlc3BvbnNlIiwicmF0ZUxpbWl0ZXJzIiwiYXV0aCIsInBvaW50cyIsImR1cmF0aW9uIiwiYXBpIiwicGF5bWVudCIsImFkbWluIiwicmF0ZUxpbWl0IiwicmVxdWVzdCIsInR5cGUiLCJsaW1pdGVyIiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsImlwIiwic3BsaXQiLCJjb25zdW1lIiwiZXJyb3IiLCJqc29uIiwicmV0cnlBZnRlciIsIk1hdGgiLCJjZWlsIiwibXNCZWZvcmVOZXh0Iiwic3RhdHVzIiwidG90YWxIaXRzIiwid2l0aFJhdGVMaW1pdCIsImhhbmRsZXIiLCJjb250ZXh0IiwicmF0ZUxpbWl0UmVzcG9uc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/rateLimit.js\n");

/***/ }),

/***/ "(rsc)/./models/Order.js":
/*!*************************!*\
  !*** ./models/Order.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst orderSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    orderNumber: {\n        type: String,\n        // required: true,\n        unique: true\n    },\n    userId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    items: [\n        {\n            productId: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"Product\",\n                required: true\n            },\n            name: {\n                type: String,\n                required: true\n            },\n            image: {\n                type: String,\n                required: true\n            },\n            price: {\n                type: Number,\n                required: true,\n                min: 0\n            },\n            originalPrice: {\n                type: Number,\n                min: 0,\n                default: 0\n            },\n            discount: {\n                type: Number,\n                min: 0,\n                default: 0\n            },\n            quantity: {\n                type: Number,\n                required: true,\n                min: 1\n            },\n            sku: String,\n            colorVariant: {\n                name: String,\n                hex: String,\n                images: [\n                    String\n                ]\n            }\n        }\n    ],\n    subtotal: {\n        type: Number,\n        required: true,\n        min: 0\n    },\n    tax: {\n        type: Number,\n        required: true,\n        min: 0,\n        default: 0\n    },\n    shipping: {\n        type: Number,\n        required: true,\n        min: 0,\n        default: 0\n    },\n    discount: {\n        type: Number,\n        required: true,\n        min: 0,\n        default: 0\n    },\n    total: {\n        type: Number,\n        required: true,\n        min: 0\n    },\n    currency: {\n        type: String,\n        required: true,\n        default: \"INR\"\n    },\n    status: {\n        type: String,\n        enum: [\n            \"pending\",\n            \"processing\",\n            \"shipped\",\n            \"delivered\",\n            \"cancelled\",\n            \"refunded\"\n        ],\n        default: \"pending\"\n    },\n    paymentStatus: {\n        type: String,\n        enum: [\n            \"pending\",\n            \"paid\",\n            \"failed\",\n            \"refunded\"\n        ],\n        default: \"pending\"\n    },\n    paymentMethod: {\n        type: String,\n        enum: [\n            \"razorpay\",\n            \"cod\"\n        ],\n        required: true\n    },\n    razorpayOrderId: {\n        type: String,\n        sparse: true\n    },\n    razorpayPaymentId: {\n        type: String,\n        sparse: true\n    },\n    shippingAddress: {\n        name: {\n            type: String,\n            required: true\n        },\n        phone: {\n            type: String,\n            required: true\n        },\n        street: {\n            type: String,\n            required: true\n        },\n        city: {\n            type: String,\n            required: true\n        },\n        state: {\n            type: String,\n            required: true\n        },\n        zipCode: {\n            type: String,\n            required: true\n        },\n        country: {\n            type: String,\n            required: true,\n            default: \"India\"\n        }\n    },\n    billingAddress: {\n        name: {\n            type: String,\n            required: true\n        },\n        phone: {\n            type: String,\n            required: true\n        },\n        street: {\n            type: String,\n            required: true\n        },\n        city: {\n            type: String,\n            required: true\n        },\n        state: {\n            type: String,\n            required: true\n        },\n        zipCode: {\n            type: String,\n            required: true\n        },\n        country: {\n            type: String,\n            required: true,\n            default: \"India\"\n        }\n    },\n    shippingMethod: {\n        name: {\n            type: String,\n            required: true,\n            default: \"Standard Shipping\"\n        },\n        estimatedDays: {\n            type: Number,\n            required: true,\n            default: 5\n        },\n        trackingNumber: String,\n        trackingUrl: String\n    },\n    notes: {\n        customer: String,\n        admin: String\n    },\n    timeline: [\n        {\n            status: {\n                type: String,\n                required: true\n            },\n            message: {\n                type: String,\n                required: true\n            },\n            timestamp: {\n                type: Date,\n                default: Date.now\n            },\n            updatedBy: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"User\"\n            }\n        }\n    ],\n    emailSent: {\n        confirmation: {\n            type: Boolean,\n            default: false\n        },\n        shipped: {\n            type: Boolean,\n            default: false\n        },\n        delivered: {\n            type: Boolean,\n            default: false\n        }\n    },\n    smsSent: {\n        confirmation: {\n            type: Boolean,\n            default: false\n        },\n        shipped: {\n            type: Boolean,\n            default: false\n        },\n        delivered: {\n            type: Boolean,\n            default: false\n        }\n    },\n    refundAmount: {\n        type: Number,\n        min: 0\n    },\n    refundReason: String,\n    cancelledAt: Date,\n    cancelledBy: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\"\n    },\n    deliveredAt: Date\n}, {\n    timestamps: true\n});\n// Indexes for efficient queries\norderSchema.index({\n    orderNumber: 1\n});\norderSchema.index({\n    userId: 1\n});\norderSchema.index({\n    status: 1\n});\norderSchema.index({\n    paymentStatus: 1\n});\norderSchema.index({\n    createdAt: -1\n});\norderSchema.index({\n    razorpayOrderId: 1\n});\norderSchema.index({\n    razorpayPaymentId: 1\n});\norderSchema.index({\n    \"shippingAddress.phone\": 1\n});\n// Virtual for order summary\norderSchema.virtual(\"orderSummary\").get(function() {\n    return {\n        orderNumber: this.orderNumber,\n        total: this.total,\n        status: this.status,\n        itemCount: this.items.length,\n        createdAt: this.createdAt\n    };\n});\n// Virtual for customer info\norderSchema.virtual(\"customerInfo\").get(function() {\n    return {\n        name: this.shippingAddress.name,\n        phone: this.shippingAddress.phone,\n        email: this.userId?.email\n    };\n});\n// Instance method to add timeline entry\norderSchema.methods.addTimelineEntry = function(status, message, updatedBy = null) {\n    this.timeline.push({\n        status,\n        message,\n        timestamp: new Date(),\n        updatedBy\n    });\n    return this.save();\n};\n// Instance method to update status\norderSchema.methods.updateStatus = function(newStatus, message, updatedBy = null) {\n    this.status = newStatus;\n    this.addTimelineEntry(newStatus, message, updatedBy);\n    // Set deliveredAt if status is delivered\n    if (newStatus === \"delivered\") {\n        this.deliveredAt = new Date();\n    }\n    // Set cancelledAt if status is cancelled\n    if (newStatus === \"cancelled\") {\n        this.cancelledAt = new Date();\n        this.cancelledBy = updatedBy;\n    }\n    return this.save();\n};\n// Instance method to calculate totals\norderSchema.methods.calculateTotals = function() {\n    this.subtotal = this.items.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n    this.total = this.subtotal + this.tax + this.shipping - this.discount;\n    return this.save();\n};\n// Static method to generate order number\norderSchema.statics.generateOrderNumber = async function() {\n    const date = new Date();\n    const year = date.getFullYear().toString().slice(-2);\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n    const day = date.getDate().toString().padStart(2, \"0\");\n    // Get count of orders today\n    const todayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    const todayEnd = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\n    const todayOrders = await this.countDocuments({\n        createdAt: {\n            $gte: todayStart,\n            $lt: todayEnd\n        }\n    });\n    const sequence = (todayOrders + 1).toString().padStart(3, \"0\");\n    return `NV${year}${month}${day}${sequence}`;\n};\n// Static method to find by user\norderSchema.statics.findByUser = function(userId) {\n    return this.find({\n        userId\n    }).sort({\n        createdAt: -1\n    });\n};\n// Static method to find pending orders\norderSchema.statics.findPending = function() {\n    return this.find({\n        status: \"pending\"\n    }).sort({\n        createdAt: -1\n    });\n};\n// Static method to find by status\norderSchema.statics.findByStatus = function(status) {\n    return this.find({\n        status\n    }).sort({\n        createdAt: -1\n    });\n};\n// Pre-save middleware to generate order number\norderSchema.pre(\"save\", async function(next) {\n    if (this.isNew && !this.orderNumber) {\n        this.orderNumber = await this.constructor.generateOrderNumber();\n    }\n    next();\n});\n// Ensure virtuals are serialized\norderSchema.set(\"toJSON\", {\n    virtuals: true,\n    transform: function(doc, ret) {\n        delete ret.__v;\n        return ret;\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Order || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Order\", orderSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtBQUNwRDtBQUVBLHVDQUF1QztBQUN2Q3hFLFlBQVl3RixPQUFPLENBQUNzQixXQUFXLEdBQUc7SUFDaEMsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQztRQUFFN0UsUUFBUTtJQUFVLEdBQUc4RSxJQUFJLENBQUM7UUFBRXJDLFdBQVcsQ0FBQztJQUFFO0FBQy9EO0FBRUEsa0NBQWtDO0FBQ2xDeEUsWUFBWXdGLE9BQU8sQ0FBQ3VCLFlBQVksR0FBRyxTQUFTaEYsTUFBTTtJQUNoRCxPQUFPLElBQUksQ0FBQzZFLElBQUksQ0FBQztRQUFFN0U7SUFBTyxHQUFHOEUsSUFBSSxDQUFDO1FBQUVyQyxXQUFXLENBQUM7SUFBRTtBQUNwRDtBQUVBLCtDQUErQztBQUMvQ3hFLFlBQVlnSCxHQUFHLENBQUMsUUFBUSxlQUFlQyxJQUFJO0lBQ3pDLElBQUksSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUNoSCxXQUFXLEVBQUU7UUFDbkMsSUFBSSxDQUFDQSxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUNpSCxXQUFXLENBQUMxQixtQkFBbUI7SUFDL0Q7SUFDQXdCO0FBQ0Y7QUFFQSxpQ0FBaUM7QUFDakNqSCxZQUFZb0gsR0FBRyxDQUFDLFVBQVU7SUFDeEJDLFVBQVU7SUFDVkMsV0FBVyxTQUFTQyxHQUFHLEVBQUVDLEdBQUc7UUFDMUIsT0FBT0EsSUFBSUMsR0FBRztRQUNkLE9BQU9EO0lBQ1Q7QUFDRjtBQUVBLGlFQUFlekgsd0RBQWUsQ0FBQzRILEtBQUssSUFBSTVILHFEQUFjLENBQUMsU0FBU0MsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9tb2RlbHMvT3JkZXIuanM/ZWIyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBvcmRlck51bWJlcjoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAvLyByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHVuaXF1ZTogdHJ1ZSxcclxuICB9LFxyXG4gIHVzZXJJZDoge1xyXG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgcmVmOiAnVXNlcicsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG4gIGl0ZW1zOiBbe1xyXG4gICAgcHJvZHVjdElkOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG5hbWU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBpbWFnZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHByaWNlOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbjogMCxcclxuICAgIH0sXHJcbiAgICBvcmlnaW5hbFByaWNlOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgfSxcclxuICAgIGRpc2NvdW50OiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgfSxcclxuICAgIHF1YW50aXR5OiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbjogMSxcclxuICAgIH0sXHJcbiAgICBza3U6IFN0cmluZyxcclxuICAgIGNvbG9yVmFyaWFudDoge1xyXG4gICAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICAgIGhleDogU3RyaW5nLFxyXG4gICAgICBpbWFnZXM6IFtTdHJpbmddLFxyXG4gICAgfSxcclxuICB9XSxcclxuICBzdWJ0b3RhbDoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICBtaW46IDAsXHJcbiAgfSxcclxuICB0YXg6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgbWluOiAwLFxyXG4gICAgZGVmYXVsdDogMCxcclxuICB9LFxyXG4gIHNoaXBwaW5nOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIG1pbjogMCxcclxuICAgIGRlZmF1bHQ6IDAsXHJcbiAgfSxcclxuICBkaXNjb3VudDoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICBtaW46IDAsXHJcbiAgICBkZWZhdWx0OiAwLFxyXG4gIH0sXHJcbiAgdG90YWw6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgbWluOiAwLFxyXG4gIH0sXHJcbiAgY3VycmVuY3k6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogJ0lOUicsXHJcbiAgfSxcclxuICBzdGF0dXM6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsncGVuZGluZycsICdwcm9jZXNzaW5nJywgJ3NoaXBwZWQnLCAnZGVsaXZlcmVkJywgJ2NhbmNlbGxlZCcsICdyZWZ1bmRlZCddLFxyXG4gICAgZGVmYXVsdDogJ3BlbmRpbmcnLFxyXG4gIH0sXHJcbiAgcGF5bWVudFN0YXR1czoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWydwZW5kaW5nJywgJ3BhaWQnLCAnZmFpbGVkJywgJ3JlZnVuZGVkJ10sXHJcbiAgICBkZWZhdWx0OiAncGVuZGluZycsXHJcbiAgfSxcclxuICBwYXltZW50TWV0aG9kOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbJ3Jhem9ycGF5JywgJ2NvZCddLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICByYXpvcnBheU9yZGVySWQ6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHNwYXJzZTogdHJ1ZSxcclxuICB9LFxyXG4gIHJhem9ycGF5UGF5bWVudElkOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBzcGFyc2U6IHRydWUsXHJcbiAgfSxcclxuICBzaGlwcGluZ0FkZHJlc3M6IHtcclxuICAgIG5hbWU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBwaG9uZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHN0cmVldDoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGNpdHk6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBzdGF0ZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHppcENvZGU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjb3VudHJ5OiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICdJbmRpYScsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgYmlsbGluZ0FkZHJlc3M6IHtcclxuICAgIG5hbWU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBwaG9uZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHN0cmVldDoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGNpdHk6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBzdGF0ZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHppcENvZGU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjb3VudHJ5OiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICdJbmRpYScsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgc2hpcHBpbmdNZXRob2Q6IHtcclxuICAgIG5hbWU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogJ1N0YW5kYXJkIFNoaXBwaW5nJyxcclxuICAgIH0sXHJcbiAgICBlc3RpbWF0ZWREYXlzOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6IDUsXHJcbiAgICB9LFxyXG4gICAgdHJhY2tpbmdOdW1iZXI6IFN0cmluZyxcclxuICAgIHRyYWNraW5nVXJsOiBTdHJpbmcsXHJcbiAgfSxcclxuICBub3Rlczoge1xyXG4gICAgY3VzdG9tZXI6IFN0cmluZyxcclxuICAgIGFkbWluOiBTdHJpbmcsXHJcbiAgfSxcclxuICB0aW1lbGluZTogW3tcclxuICAgIHN0YXR1czoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG1lc3NhZ2U6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB0aW1lc3RhbXA6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXHJcbiAgICB9LFxyXG4gICAgdXBkYXRlZEJ5OiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICB9LFxyXG4gIH1dLFxyXG4gIGVtYWlsU2VudDoge1xyXG4gICAgY29uZmlybWF0aW9uOiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIHNoaXBwZWQ6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgZGVsaXZlcmVkOiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHNtc1NlbnQ6IHtcclxuICAgIGNvbmZpcm1hdGlvbjoge1xyXG4gICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBzaGlwcGVkOiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIGRlbGl2ZXJlZDoge1xyXG4gICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICByZWZ1bmRBbW91bnQ6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIG1pbjogMCxcclxuICB9LFxyXG4gIHJlZnVuZFJlYXNvbjogU3RyaW5nLFxyXG4gIGNhbmNlbGxlZEF0OiBEYXRlLFxyXG4gIGNhbmNlbGxlZEJ5OiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdVc2VyJyxcclxuICB9LFxyXG4gIGRlbGl2ZXJlZEF0OiBEYXRlLFxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyBJbmRleGVzIGZvciBlZmZpY2llbnQgcXVlcmllc1xyXG5vcmRlclNjaGVtYS5pbmRleCh7IG9yZGVyTnVtYmVyOiAxIH0pO1xyXG5vcmRlclNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSB9KTtcclxub3JkZXJTY2hlbWEuaW5kZXgoeyBzdGF0dXM6IDEgfSk7XHJcbm9yZGVyU2NoZW1hLmluZGV4KHsgcGF5bWVudFN0YXR1czogMSB9KTtcclxub3JkZXJTY2hlbWEuaW5kZXgoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG5vcmRlclNjaGVtYS5pbmRleCh7IHJhem9ycGF5T3JkZXJJZDogMSB9KTtcclxub3JkZXJTY2hlbWEuaW5kZXgoeyByYXpvcnBheVBheW1lbnRJZDogMSB9KTtcclxub3JkZXJTY2hlbWEuaW5kZXgoeyAnc2hpcHBpbmdBZGRyZXNzLnBob25lJzogMSB9KTtcclxuXHJcbi8vIFZpcnR1YWwgZm9yIG9yZGVyIHN1bW1hcnlcclxub3JkZXJTY2hlbWEudmlydHVhbCgnb3JkZXJTdW1tYXJ5JykuZ2V0KGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICBvcmRlck51bWJlcjogdGhpcy5vcmRlck51bWJlcixcclxuICAgIHRvdGFsOiB0aGlzLnRvdGFsLFxyXG4gICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgIGl0ZW1Db3VudDogdGhpcy5pdGVtcy5sZW5ndGgsXHJcbiAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gIH07XHJcbn0pO1xyXG5cclxuLy8gVmlydHVhbCBmb3IgY3VzdG9tZXIgaW5mb1xyXG5vcmRlclNjaGVtYS52aXJ0dWFsKCdjdXN0b21lckluZm8nKS5nZXQoZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG5hbWU6IHRoaXMuc2hpcHBpbmdBZGRyZXNzLm5hbWUsXHJcbiAgICBwaG9uZTogdGhpcy5zaGlwcGluZ0FkZHJlc3MucGhvbmUsXHJcbiAgICBlbWFpbDogdGhpcy51c2VySWQ/LmVtYWlsLFxyXG4gIH07XHJcbn0pO1xyXG5cclxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIGFkZCB0aW1lbGluZSBlbnRyeVxyXG5vcmRlclNjaGVtYS5tZXRob2RzLmFkZFRpbWVsaW5lRW50cnkgPSBmdW5jdGlvbihzdGF0dXMsIG1lc3NhZ2UsIHVwZGF0ZWRCeSA9IG51bGwpIHtcclxuICB0aGlzLnRpbWVsaW5lLnB1c2goe1xyXG4gICAgc3RhdHVzLFxyXG4gICAgbWVzc2FnZSxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgIHVwZGF0ZWRCeSxcclxuICB9KTtcclxuICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbn07XHJcblxyXG4vLyBJbnN0YW5jZSBtZXRob2QgdG8gdXBkYXRlIHN0YXR1c1xyXG5vcmRlclNjaGVtYS5tZXRob2RzLnVwZGF0ZVN0YXR1cyA9IGZ1bmN0aW9uKG5ld1N0YXR1cywgbWVzc2FnZSwgdXBkYXRlZEJ5ID0gbnVsbCkge1xyXG4gIHRoaXMuc3RhdHVzID0gbmV3U3RhdHVzO1xyXG4gIHRoaXMuYWRkVGltZWxpbmVFbnRyeShuZXdTdGF0dXMsIG1lc3NhZ2UsIHVwZGF0ZWRCeSk7XHJcbiAgXHJcbiAgLy8gU2V0IGRlbGl2ZXJlZEF0IGlmIHN0YXR1cyBpcyBkZWxpdmVyZWRcclxuICBpZiAobmV3U3RhdHVzID09PSAnZGVsaXZlcmVkJykge1xyXG4gICAgdGhpcy5kZWxpdmVyZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFNldCBjYW5jZWxsZWRBdCBpZiBzdGF0dXMgaXMgY2FuY2VsbGVkXHJcbiAgaWYgKG5ld1N0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHtcclxuICAgIHRoaXMuY2FuY2VsbGVkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5jYW5jZWxsZWRCeSA9IHVwZGF0ZWRCeTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xyXG59O1xyXG5cclxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIGNhbGN1bGF0ZSB0b3RhbHNcclxub3JkZXJTY2hlbWEubWV0aG9kcy5jYWxjdWxhdGVUb3RhbHMgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnN1YnRvdGFsID0gdGhpcy5pdGVtcy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgKGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5KSwgMCk7XHJcbiAgdGhpcy50b3RhbCA9IHRoaXMuc3VidG90YWwgKyB0aGlzLnRheCArIHRoaXMuc2hpcHBpbmcgLSB0aGlzLmRpc2NvdW50O1xyXG4gIHJldHVybiB0aGlzLnNhdmUoKTtcclxufTtcclxuXHJcbi8vIFN0YXRpYyBtZXRob2QgdG8gZ2VuZXJhdGUgb3JkZXIgbnVtYmVyXHJcbm9yZGVyU2NoZW1hLnN0YXRpY3MuZ2VuZXJhdGVPcmRlck51bWJlciA9IGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zbGljZSgtMik7XHJcbiAgY29uc3QgbW9udGggPSAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuICBcclxuICAvLyBHZXQgY291bnQgb2Ygb3JkZXJzIHRvZGF5XHJcbiAgY29uc3QgdG9kYXlTdGFydCA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7XHJcbiAgY29uc3QgdG9kYXlFbmQgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkgKyAxKTtcclxuICBcclxuICBjb25zdCB0b2RheU9yZGVycyA9IGF3YWl0IHRoaXMuY291bnREb2N1bWVudHMoe1xyXG4gICAgY3JlYXRlZEF0OiB7ICRndGU6IHRvZGF5U3RhcnQsICRsdDogdG9kYXlFbmQgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IHNlcXVlbmNlID0gKHRvZGF5T3JkZXJzICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpO1xyXG4gIHJldHVybiBgTlYke3llYXJ9JHttb250aH0ke2RheX0ke3NlcXVlbmNlfWA7XHJcbn07XHJcblxyXG4vLyBTdGF0aWMgbWV0aG9kIHRvIGZpbmQgYnkgdXNlclxyXG5vcmRlclNjaGVtYS5zdGF0aWNzLmZpbmRCeVVzZXIgPSBmdW5jdGlvbih1c2VySWQpIHtcclxuICByZXR1cm4gdGhpcy5maW5kKHsgdXNlcklkIH0pLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG59O1xyXG5cclxuLy8gU3RhdGljIG1ldGhvZCB0byBmaW5kIHBlbmRpbmcgb3JkZXJzXHJcbm9yZGVyU2NoZW1hLnN0YXRpY3MuZmluZFBlbmRpbmcgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdGhpcy5maW5kKHsgc3RhdHVzOiAncGVuZGluZycgfSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcbn07XHJcblxyXG4vLyBTdGF0aWMgbWV0aG9kIHRvIGZpbmQgYnkgc3RhdHVzXHJcbm9yZGVyU2NoZW1hLnN0YXRpY3MuZmluZEJ5U3RhdHVzID0gZnVuY3Rpb24oc3RhdHVzKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmluZCh7IHN0YXR1cyB9KS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxufTtcclxuXHJcbi8vIFByZS1zYXZlIG1pZGRsZXdhcmUgdG8gZ2VuZXJhdGUgb3JkZXIgbnVtYmVyXHJcbm9yZGVyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uKG5leHQpIHtcclxuICBpZiAodGhpcy5pc05ldyAmJiAhdGhpcy5vcmRlck51bWJlcikge1xyXG4gICAgdGhpcy5vcmRlck51bWJlciA9IGF3YWl0IHRoaXMuY29uc3RydWN0b3IuZ2VuZXJhdGVPcmRlck51bWJlcigpO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuLy8gRW5zdXJlIHZpcnR1YWxzIGFyZSBzZXJpYWxpemVkXHJcbm9yZGVyU2NoZW1hLnNldCgndG9KU09OJywge1xyXG4gIHZpcnR1YWxzOiB0cnVlLFxyXG4gIHRyYW5zZm9ybTogZnVuY3Rpb24oZG9jLCByZXQpIHtcclxuICAgIGRlbGV0ZSByZXQuX192O1xyXG4gICAgcmV0dXJuIHJldDtcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5PcmRlciB8fCBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBvcmRlclNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIm9yZGVyU2NoZW1hIiwiU2NoZW1hIiwib3JkZXJOdW1iZXIiLCJ0eXBlIiwiU3RyaW5nIiwidW5pcXVlIiwidXNlcklkIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiaXRlbXMiLCJwcm9kdWN0SWQiLCJuYW1lIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsIm1pbiIsIm9yaWdpbmFsUHJpY2UiLCJkZWZhdWx0IiwiZGlzY291bnQiLCJxdWFudGl0eSIsInNrdSIsImNvbG9yVmFyaWFudCIsImhleCIsImltYWdlcyIsInN1YnRvdGFsIiwidGF4Iiwic2hpcHBpbmciLCJ0b3RhbCIsImN1cnJlbmN5Iiwic3RhdHVzIiwiZW51bSIsInBheW1lbnRTdGF0dXMiLCJwYXltZW50TWV0aG9kIiwicmF6b3JwYXlPcmRlcklkIiwic3BhcnNlIiwicmF6b3JwYXlQYXltZW50SWQiLCJzaGlwcGluZ0FkZHJlc3MiLCJwaG9uZSIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmlsbGluZ0FkZHJlc3MiLCJzaGlwcGluZ01ldGhvZCIsImVzdGltYXRlZERheXMiLCJ0cmFja2luZ051bWJlciIsInRyYWNraW5nVXJsIiwibm90ZXMiLCJjdXN0b21lciIsImFkbWluIiwidGltZWxpbmUiLCJtZXNzYWdlIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInVwZGF0ZWRCeSIsImVtYWlsU2VudCIsImNvbmZpcm1hdGlvbiIsIkJvb2xlYW4iLCJzaGlwcGVkIiwiZGVsaXZlcmVkIiwic21zU2VudCIsInJlZnVuZEFtb3VudCIsInJlZnVuZFJlYXNvbiIsImNhbmNlbGxlZEF0IiwiY2FuY2VsbGVkQnkiLCJkZWxpdmVyZWRBdCIsInRpbWVzdGFtcHMiLCJpbmRleCIsImNyZWF0ZWRBdCIsInZpcnR1YWwiLCJnZXQiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJlbWFpbCIsIm1ldGhvZHMiLCJhZGRUaW1lbGluZUVudHJ5IiwicHVzaCIsInNhdmUiLCJ1cGRhdGVTdGF0dXMiLCJuZXdTdGF0dXMiLCJjYWxjdWxhdGVUb3RhbHMiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwic3RhdGljcyIsImdlbmVyYXRlT3JkZXJOdW1iZXIiLCJkYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwidG9TdHJpbmciLCJzbGljZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImRheSIsImdldERhdGUiLCJ0b2RheVN0YXJ0IiwidG9kYXlFbmQiLCJ0b2RheU9yZGVycyIsImNvdW50RG9jdW1lbnRzIiwiJGd0ZSIsIiRsdCIsInNlcXVlbmNlIiwiZmluZEJ5VXNlciIsImZpbmQiLCJzb3J0IiwiZmluZFBlbmRpbmciLCJmaW5kQnlTdGF0dXMiLCJwcmUiLCJuZXh0IiwiaXNOZXciLCJjb25zdHJ1Y3RvciIsInNldCIsInZpcnR1YWxzIiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwiX192IiwibW9kZWxzIiwiT3JkZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/Order.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/supports-color","vendor-chunks/ms","vendor-chunks/has-flag","vendor-chunks/mime-db","vendor-chunks/mime-types","vendor-chunks/razorpay","vendor-chunks/rate-limiter-flexible","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/get-proto","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/axios","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayment%2Fverify%2Froute&page=%2Fapi%2Fpayment%2Fverify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fverify%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();