/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cart/route";
exports.ids = ["app/api/cart/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?c6f9":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?ae40":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?4410":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?c757":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Ananya_Downloads_Nirvaanaa_current_Nirvaanaa_1_Nirvaanaa_app_api_cart_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/cart/route.js */ \"(rsc)/./app/api/cart/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cart/route\",\n        pathname: \"/api/cart\",\n        filename: \"route\",\n        bundlePath: \"app/api/cart/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Ananya\\\\Downloads\\\\Nirvaanaa_current\\\\Nirvaanaa (1)\\\\Nirvaanaa\\\\app\\\\api\\\\cart\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Ananya_Downloads_Nirvaanaa_current_Nirvaanaa_1_Nirvaanaa_app_api_cart_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/cart/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjYXJ0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjYXJ0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2FydCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBbmFueWElNUNEb3dubG9hZHMlNUNOaXJ2YWFuYWFfY3VycmVudCU1Q05pcnZhYW5hYSUyMCgxKSU1Q05pcnZhYW5hYSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQW5hbnlhJTVDRG93bmxvYWRzJTVDTmlydmFhbmFhX2N1cnJlbnQlNUNOaXJ2YWFuYWElMjAoMSklNUNOaXJ2YWFuYWEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUQ7QUFDaEk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLz8zOWM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEFuYW55YVxcXFxEb3dubG9hZHNcXFxcTmlydmFhbmFhX2N1cnJlbnRcXFxcTmlydmFhbmFhICgxKVxcXFxOaXJ2YWFuYWFcXFxcYXBwXFxcXGFwaVxcXFxjYXJ0XFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYXJ0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2FydFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2FydC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEFuYW55YVxcXFxEb3dubG9hZHNcXFxcTmlydmFhbmFhX2N1cnJlbnRcXFxcTmlydmFhbmFhICgxKVxcXFxOaXJ2YWFuYWFcXFxcYXBwXFxcXGFwaVxcXFxjYXJ0XFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NhcnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/cart/route.js":
/*!*******************************!*\
  !*** ./app/api/cart/route.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./models/User.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/Product */ \"(rsc)/./models/Product.js\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_socket__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/socket */ \"(rsc)/./lib/socket.js\");\n/* harmony import */ var _lib_socket__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_lib_socket__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nasync function GET(req) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // If email query provided, return user's cart; otherwise return empty items\n        const { searchParams } = new URL(req.url);\n        const email = searchParams.get(\"email\");\n        if (email) {\n            const user = await _models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n                email: email.toLowerCase()\n            }).lean();\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                items: user?.cart || []\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            items: []\n        });\n    } catch (err) {\n        console.error(\"GET /api/cart\", err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"Failed\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(req) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const body = await req.json();\n        // debug: log incoming payload for troubleshooting\n        console.debug(\"[DEBUG] /api/cart POST body:\", JSON.stringify(body));\n        const { productId, name, price, image, quantity = 1, slug, items } = body;\n        if (body.email) {\n            const user = await _models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n                email: body.email.toLowerCase()\n            });\n            if (user) {\n                if (items) {\n                    // Bulk update cart items - compute deltas vs existing cart, validate and apply stock/sales changes\n                    const existingMap = new Map(user.cart.map((i)=>[\n                            String(i.productId),\n                            i.quantity\n                        ]));\n                    for (const item of items){\n                        const product = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(item.productId);\n                        if (!product) continue;\n                        const prevQty = existingMap.get(String(item.productId)) || 0;\n                        const delta = (item.quantity || 0) - prevQty;\n                        if (delta > 0 && product.stock < delta) {\n                            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                                error: `Only ${product.stock} items available for ${product.title}`\n                            }, {\n                                status: 400\n                            });\n                        }\n                    }\n                    // Apply updates: set cart, then adjust stock and sales by deltas\n                    user.cart = items.map((it)=>({\n                            ...it,\n                            discount: it.discount || 0,\n                            colorVariant: it.colorVariant || null\n                        }));\n                    for (const it of items){\n                        try {\n                            const prevQty = existingMap.get(String(it.productId)) || 0;\n                            const delta = (it.quantity || 0) - prevQty;\n                            if (delta !== 0) {\n                                const updated = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(it.productId, {\n                                    $inc: {\n                                        stock: -delta,\n                                        salesCount: delta\n                                    }\n                                }, {\n                                    new: true\n                                }).lean();\n                                try {\n                                    (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToAdmin)(\"product-changed\", {\n                                        action: \"updated\",\n                                        product: updated\n                                    });\n                                } catch (e) {}\n                            }\n                        } catch (e) {\n                        // ignore per-item failures\n                        }\n                    }\n                } else {\n                    // Single item update - check stock availability\n                    const product = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(productId);\n                    if (product && product.stock < quantity) {\n                        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                            error: `Only ${product.stock} items available for ${product.title}`\n                        }, {\n                            status: 400\n                        });\n                    }\n                    const existing = user.cart.find((i)=>String(i.productId) === String(productId));\n                    if (existing) {\n                        const newQuantity = existing.quantity + quantity;\n                        if (product && product.stock < newQuantity) {\n                            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                                error: `Cannot add ${quantity} more items. Only ${product.stock - existing.quantity} available`\n                            }, {\n                                status: 400\n                            });\n                        }\n                        existing.quantity = newQuantity;\n                        // increment salesCount for added quantity and decrement stock by added quantity\n                        try {\n                            await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(productId, {\n                                $inc: {\n                                    salesCount: quantity,\n                                    stock: -quantity\n                                }\n                            });\n                        } catch (e) {}\n                    } else {\n                        user.cart.push({\n                            productId,\n                            name,\n                            price,\n                            discount: body.discount || 0,\n                            image,\n                            quantity,\n                            slug,\n                            colorVariant: body.colorVariant || null\n                        });\n                        // increment salesCount and decrement stock for newly added product\n                        try {\n                            await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(productId, {\n                                $inc: {\n                                    salesCount: quantity,\n                                    stock: -quantity\n                                }\n                            });\n                        } catch (e) {}\n                    }\n                }\n                await user.save();\n                // Emit real-time update to user and admin\n                (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToUser)(body.email, \"cart-changed\", {\n                    items: user.cart\n                });\n                try {\n                    // Broadcast updated product snapshot if we mutated a specific product\n                    if (productId) {\n                        const updated = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(productId).lean();\n                        (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToAdmin)(\"product-changed\", {\n                            action: \"updated\",\n                            product: updated\n                        });\n                        (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToAll)(\"product-changed\", {\n                            action: \"updated\",\n                            product: updated\n                        });\n                    }\n                } catch (e) {}\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            ok: true\n        });\n    } catch (err) {\n        console.error(err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"Failed\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(req) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const body = await req.json();\n        const { productId, quantity, email } = body;\n        if (!email) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"email required\"\n        }, {\n            status: 400\n        });\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            email: email.toLowerCase()\n        });\n        if (!user) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"user not found\"\n        }, {\n            status: 404\n        });\n        const item = user.cart.find((i)=>String(i.productId) === String(productId));\n        if (!item) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"item not in cart\"\n        }, {\n            status: 404\n        });\n        // Adjust product stock/sales based on delta\n        const prevQty = item.quantity;\n        const delta = quantity - prevQty;\n        if (delta !== 0) {\n            const product = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(productId);\n            if (!product) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                error: \"product not found\"\n            }, {\n                status: 404\n            });\n            if (delta > 0 && product.stock < delta) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                    error: `Only ${product.stock} items available for ${product.title}`\n                }, {\n                    status: 400\n                });\n            }\n            const updated = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(productId, {\n                $inc: {\n                    stock: -delta,\n                    salesCount: delta\n                }\n            }, {\n                new: true\n            }).lean();\n            try {\n                (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToAdmin)(\"product-changed\", {\n                    action: \"updated\",\n                    product: updated\n                });\n            } catch (e) {}\n        }\n        item.quantity = quantity;\n        await user.save();\n        // Emit real-time update\n        (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToUser)(email, \"cart-changed\", {\n            items: user.cart\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            ok: true\n        });\n    } catch (err) {\n        console.error(err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"Failed\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(req) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const contentType = req.headers.get(\"content-type\") || \"\";\n        let productId, email;\n        if (contentType.includes(\"application/json\")) {\n            const body = await req.json();\n            productId = body.productId;\n            email = body.email;\n        } else {\n            const { searchParams } = new URL(req.url);\n            productId = searchParams.get(\"productId\");\n            email = searchParams.get(\"email\");\n        }\n        if (!email) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"email required\"\n        }, {\n            status: 400\n        });\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            email: email.toLowerCase()\n        });\n        if (!user) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"user not found\"\n        }, {\n            status: 404\n        });\n        // Restore stock and decrement salesCount by the removed quantity\n        const removed = user.cart.find((i)=>String(i.productId) === String(productId));\n        if (removed) {\n            try {\n                const updated = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(productId, {\n                    $inc: {\n                        stock: removed.quantity,\n                        salesCount: -removed.quantity\n                    }\n                }, {\n                    new: true\n                }).lean();\n                try {\n                    (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToAdmin)(\"product-changed\", {\n                        action: \"updated\",\n                        product: updated\n                    });\n                } catch (e) {}\n            } catch (e) {\n            // ignore failures\n            }\n        }\n        user.cart = user.cart.filter((i)=>String(i.productId) !== String(productId));\n        await user.save();\n        // Emit real-time update\n        (0,_lib_socket__WEBPACK_IMPORTED_MODULE_4__.emitToUser)(email, \"cart-changed\", {\n            items: user.cart\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            ok: true\n        });\n    } catch (err) {\n        console.error(err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            error: \"Failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUV1QixNQUFNO3dCQUFFUCxPQUFPdUIsUUFBUW5DLFFBQVE7d0JBQUVvQixZQUFZLENBQUNlLFFBQVFuQyxRQUFRO29CQUFDO2dCQUFFLEdBQUc7b0JBQUVxQixLQUFLO2dCQUFLLEdBQUd0QyxJQUFJO2dCQUNwSixJQUFJO29CQUFFWix3REFBV0EsQ0FBQyxtQkFBbUI7d0JBQUVtRCxRQUFRO3dCQUFXZCxTQUFTUztvQkFBUTtnQkFBSSxFQUFFLE9BQU1NLEdBQUcsQ0FBQztZQUM3RixFQUFFLE9BQU9BLEdBQUc7WUFDVixrQkFBa0I7WUFDcEI7UUFDRjtRQUNBM0MsS0FBS00sSUFBSSxHQUFHTixLQUFLTSxJQUFJLENBQUNrRCxNQUFNLENBQUMvQixDQUFBQSxJQUFLQyxPQUFPRCxFQUFFVCxTQUFTLE1BQU1VLE9BQU9WO1FBQ2pFLE1BQU1oQixLQUFLZ0QsSUFBSTtRQUVmLHdCQUF3QjtRQUN4QjFELHVEQUFVQSxDQUFDUSxPQUFPLGdCQUFnQjtZQUFFTyxPQUFPTCxLQUFLTSxJQUFJO1FBQUM7UUFFckQsT0FBT2pCLGtGQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFBRTZDLElBQUk7UUFBSztJQUN0QyxFQUFFLE9BQU8xQyxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQ0Y7UUFDZCxPQUFPbEIsa0ZBQVlBLENBQUNlLElBQUksQ0FBQztZQUFFSyxPQUFPO1FBQVMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDOUQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25pcnZhYW5hYS1lY29tbWVyY2UvLi9hcHAvYXBpL2NhcnQvcm91dGUuanM/ZmQ5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL21vbmdvZGInO1xuaW1wb3J0IFVzZXIgZnJvbSAnQC9tb2RlbHMvVXNlcic7XG5pbXBvcnQgUHJvZHVjdCBmcm9tICdAL21vZGVscy9Qcm9kdWN0JztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGVtaXRUb1VzZXIsIGVtaXRUb0FkbWluLCBlbWl0VG9BbGwgfSBmcm9tICdAL2xpYi9zb2NrZXQnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcSkge1xuICB0cnkge1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuICAgIC8vIElmIGVtYWlsIHF1ZXJ5IHByb3ZpZGVkLCByZXR1cm4gdXNlcidzIGNhcnQ7IG90aGVyd2lzZSByZXR1cm4gZW1wdHkgaXRlbXNcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBlbWFpbCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VtYWlsJyk7XG4gICAgaWYgKGVtYWlsKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCkgfSkubGVhbigpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgaXRlbXM6IHVzZXI/LmNhcnQgfHwgW10gfSk7XG4gICAgfVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGl0ZW1zOiBbXSB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignR0VUIC9hcGkvY2FydCcsIGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAvLyBkZWJ1ZzogbG9nIGluY29taW5nIHBheWxvYWQgZm9yIHRyb3VibGVzaG9vdGluZ1xuICBjb25zb2xlLmRlYnVnKCdbREVCVUddIC9hcGkvY2FydCBQT1NUIGJvZHk6JywgSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xuICAgIGNvbnN0IHsgcHJvZHVjdElkLCBuYW1lLCBwcmljZSwgaW1hZ2UsIHF1YW50aXR5ID0gMSwgc2x1ZywgaXRlbXMgfSA9IGJvZHk7XG4gICAgXG4gICAgaWYgKGJvZHkuZW1haWwpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbDogYm9keS5lbWFpbC50b0xvd2VyQ2FzZSgpIH0pO1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgaWYgKGl0ZW1zKSB7XG4gICAgICAgICAgLy8gQnVsayB1cGRhdGUgY2FydCBpdGVtcyAtIGNvbXB1dGUgZGVsdGFzIHZzIGV4aXN0aW5nIGNhcnQsIHZhbGlkYXRlIGFuZCBhcHBseSBzdG9jay9zYWxlcyBjaGFuZ2VzXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdNYXAgPSBuZXcgTWFwKHVzZXIuY2FydC5tYXAoaSA9PiBbU3RyaW5nKGkucHJvZHVjdElkKSwgaS5xdWFudGl0eV0pKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKGl0ZW0ucHJvZHVjdElkKTtcbiAgICAgICAgICAgIGlmICghcHJvZHVjdCkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBwcmV2UXR5ID0gZXhpc3RpbmdNYXAuZ2V0KFN0cmluZyhpdGVtLnByb2R1Y3RJZCkpIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IChpdGVtLnF1YW50aXR5IHx8IDApIC0gcHJldlF0eTtcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDAgJiYgcHJvZHVjdC5zdG9jayA8IGRlbHRhKSB7XG4gICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgICAgICB7IGVycm9yOiBgT25seSAke3Byb2R1Y3Quc3RvY2t9IGl0ZW1zIGF2YWlsYWJsZSBmb3IgJHtwcm9kdWN0LnRpdGxlfWAgfSxcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQXBwbHkgdXBkYXRlczogc2V0IGNhcnQsIHRoZW4gYWRqdXN0IHN0b2NrIGFuZCBzYWxlcyBieSBkZWx0YXNcbiAgICAgICAgICB1c2VyLmNhcnQgPSBpdGVtcy5tYXAoaXQgPT4gKHsgXG4gICAgICAgICAgICAuLi5pdCwgXG4gICAgICAgICAgICBkaXNjb3VudDogaXQuZGlzY291bnQgfHwgMCxcbiAgICAgICAgICAgIGNvbG9yVmFyaWFudDogaXQuY29sb3JWYXJpYW50IHx8IG51bGxcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgZm9yIChjb25zdCBpdCBvZiBpdGVtcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgcHJldlF0eSA9IGV4aXN0aW5nTWFwLmdldChTdHJpbmcoaXQucHJvZHVjdElkKSkgfHwgMDtcbiAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSAoaXQucXVhbnRpdHkgfHwgMCkgLSBwcmV2UXR5O1xuICAgICAgICAgICAgICBpZiAoZGVsdGEgIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZFVwZGF0ZShpdC5wcm9kdWN0SWQsIHtcbiAgICAgICAgICAgICAgICAgICRpbmM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RvY2s6IC1kZWx0YSwgLy8gcG9zaXRpdmUgZGVsdGEgcmVkdWNlcyBzdG9jazsgbmVnYXRpdmUgZGVsdGEgaW5jcmVhc2VzIHN0b2NrXG4gICAgICAgICAgICAgICAgICAgIHNhbGVzQ291bnQ6IGRlbHRhLFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHsgbmV3OiB0cnVlIH0pLmxlYW4oKTtcbiAgICAgICAgICAgICAgICB0cnkgeyBlbWl0VG9BZG1pbigncHJvZHVjdC1jaGFuZ2VkJywgeyBhY3Rpb246ICd1cGRhdGVkJywgcHJvZHVjdDogdXBkYXRlZCB9KTsgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAvLyBpZ25vcmUgcGVyLWl0ZW0gZmFpbHVyZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2luZ2xlIGl0ZW0gdXBkYXRlIC0gY2hlY2sgc3RvY2sgYXZhaWxhYmlsaXR5XG4gICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcbiAgICAgICAgICBpZiAocHJvZHVjdCAmJiBwcm9kdWN0LnN0b2NrIDwgcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgICAgeyBlcnJvcjogYE9ubHkgJHtwcm9kdWN0LnN0b2NrfSBpdGVtcyBhdmFpbGFibGUgZm9yICR7cHJvZHVjdC50aXRsZX1gIH0sXG4gICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICBjb25zdCBleGlzdGluZyA9IHVzZXIuY2FydC5maW5kKGkgPT4gU3RyaW5nKGkucHJvZHVjdElkKSA9PT0gU3RyaW5nKHByb2R1Y3RJZCkpO1xuICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgY29uc3QgbmV3UXVhbnRpdHkgPSBleGlzdGluZy5xdWFudGl0eSArIHF1YW50aXR5O1xuICAgICAgICAgICAgaWYgKHByb2R1Y3QgJiYgcHJvZHVjdC5zdG9jayA8IG5ld1F1YW50aXR5KSB7XG4gICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgICAgICB7IGVycm9yOiBgQ2Fubm90IGFkZCAke3F1YW50aXR5fSBtb3JlIGl0ZW1zLiBPbmx5ICR7cHJvZHVjdC5zdG9jayAtIGV4aXN0aW5nLnF1YW50aXR5fSBhdmFpbGFibGVgIH0sXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXhpc3RpbmcucXVhbnRpdHkgPSBuZXdRdWFudGl0eTtcbiAgICAgICAgLy8gaW5jcmVtZW50IHNhbGVzQ291bnQgZm9yIGFkZGVkIHF1YW50aXR5IGFuZCBkZWNyZW1lbnQgc3RvY2sgYnkgYWRkZWQgcXVhbnRpdHlcbiAgICAgICAgdHJ5IHsgYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZFVwZGF0ZShwcm9kdWN0SWQsIHsgJGluYzogeyBzYWxlc0NvdW50OiBxdWFudGl0eSwgc3RvY2s6IC1xdWFudGl0eSB9IH0pOyB9IGNhdGNoKGUpIHt9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlci5jYXJ0LnB1c2goeyBcbiAgICAgICAgICBwcm9kdWN0SWQsIFxuICAgICAgICAgIG5hbWUsIFxuICAgICAgICAgIHByaWNlLCBcbiAgICAgICAgICBkaXNjb3VudDogYm9keS5kaXNjb3VudCB8fCAwLCBcbiAgICAgICAgICBpbWFnZSwgXG4gICAgICAgICAgcXVhbnRpdHksIFxuICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgY29sb3JWYXJpYW50OiBib2R5LmNvbG9yVmFyaWFudCB8fCBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBpbmNyZW1lbnQgc2FsZXNDb3VudCBhbmQgZGVjcmVtZW50IHN0b2NrIGZvciBuZXdseSBhZGRlZCBwcm9kdWN0XG4gICAgICAgIHRyeSB7IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWRBbmRVcGRhdGUocHJvZHVjdElkLCB7ICRpbmM6IHsgc2FsZXNDb3VudDogcXVhbnRpdHksIHN0b2NrOiAtcXVhbnRpdHkgfSB9KTsgfSBjYXRjaChlKSB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgICAgXG4gIC8vIEVtaXQgcmVhbC10aW1lIHVwZGF0ZSB0byB1c2VyIGFuZCBhZG1pblxuICBlbWl0VG9Vc2VyKGJvZHkuZW1haWwsICdjYXJ0LWNoYW5nZWQnLCB7IGl0ZW1zOiB1c2VyLmNhcnQgfSk7XG4gIHRyeSB7XG4gICAgLy8gQnJvYWRjYXN0IHVwZGF0ZWQgcHJvZHVjdCBzbmFwc2hvdCBpZiB3ZSBtdXRhdGVkIGEgc3BlY2lmaWMgcHJvZHVjdFxuICAgIGlmIChwcm9kdWN0SWQpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHByb2R1Y3RJZCkubGVhbigpO1xuICAgICAgZW1pdFRvQWRtaW4oJ3Byb2R1Y3QtY2hhbmdlZCcsIHsgYWN0aW9uOiAndXBkYXRlZCcsIHByb2R1Y3Q6IHVwZGF0ZWQgfSk7XG4gICAgICBlbWl0VG9BbGwoJ3Byb2R1Y3QtY2hhbmdlZCcsIHsgYWN0aW9uOiAndXBkYXRlZCcsIHByb2R1Y3Q6IHVwZGF0ZWQgfSk7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXEpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zdCB7IHByb2R1Y3RJZCwgcXVhbnRpdHksIGVtYWlsIH0gPSBib2R5O1xuICAgIGlmICghZW1haWwpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnZW1haWwgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICd1c2VyIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICBjb25zdCBpdGVtID0gdXNlci5jYXJ0LmZpbmQoaSA9PiBTdHJpbmcoaS5wcm9kdWN0SWQpID09PSBTdHJpbmcocHJvZHVjdElkKSk7XG4gICAgaWYgKCFpdGVtKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2l0ZW0gbm90IGluIGNhcnQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgLy8gQWRqdXN0IHByb2R1Y3Qgc3RvY2svc2FsZXMgYmFzZWQgb24gZGVsdGFcbiAgICBjb25zdCBwcmV2UXR5ID0gaXRlbS5xdWFudGl0eTtcbiAgICBjb25zdCBkZWx0YSA9IHF1YW50aXR5IC0gcHJldlF0eTtcbiAgICBpZiAoZGVsdGEgIT09IDApIHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHByb2R1Y3RJZCk7XG4gICAgICBpZiAoIXByb2R1Y3QpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAncHJvZHVjdCBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICBpZiAoZGVsdGEgPiAwICYmIHByb2R1Y3Quc3RvY2sgPCBkZWx0YSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogYE9ubHkgJHtwcm9kdWN0LnN0b2NrfSBpdGVtcyBhdmFpbGFibGUgZm9yICR7cHJvZHVjdC50aXRsZX1gIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZFVwZGF0ZShwcm9kdWN0SWQsIHsgJGluYzogeyBzdG9jazogLWRlbHRhLCBzYWxlc0NvdW50OiBkZWx0YSB9IH0sIHsgbmV3OiB0cnVlIH0pLmxlYW4oKTtcbiAgICAgIHRyeSB7IGVtaXRUb0FkbWluKCdwcm9kdWN0LWNoYW5nZWQnLCB7IGFjdGlvbjogJ3VwZGF0ZWQnLCBwcm9kdWN0OiB1cGRhdGVkIH0pOyB9IGNhdGNoKGUpIHt9XG4gICAgfVxuICAgIGl0ZW0ucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICBcbiAgICAvLyBFbWl0IHJlYWwtdGltZSB1cGRhdGVcbiAgICBlbWl0VG9Vc2VyKGVtYWlsLCAnY2FydC1jaGFuZ2VkJywgeyBpdGVtczogdXNlci5jYXJ0IH0pO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXEpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG4gICAgbGV0IHByb2R1Y3RJZCwgZW1haWw7XG4gICAgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAgICAgcHJvZHVjdElkID0gYm9keS5wcm9kdWN0SWQ7XG4gICAgICBlbWFpbCA9IGJvZHkuZW1haWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgcHJvZHVjdElkID0gc2VhcmNoUGFyYW1zLmdldCgncHJvZHVjdElkJyk7XG4gICAgICBlbWFpbCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VtYWlsJyk7XG4gICAgfVxuICAgIGlmICghZW1haWwpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnZW1haWwgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICd1c2VyIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAvLyBSZXN0b3JlIHN0b2NrIGFuZCBkZWNyZW1lbnQgc2FsZXNDb3VudCBieSB0aGUgcmVtb3ZlZCBxdWFudGl0eVxuICAgIGNvbnN0IHJlbW92ZWQgPSB1c2VyLmNhcnQuZmluZChpID0+IFN0cmluZyhpLnByb2R1Y3RJZCkgPT09IFN0cmluZyhwcm9kdWN0SWQpKTtcbiAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWRBbmRVcGRhdGUocHJvZHVjdElkLCB7ICRpbmM6IHsgc3RvY2s6IHJlbW92ZWQucXVhbnRpdHksIHNhbGVzQ291bnQ6IC1yZW1vdmVkLnF1YW50aXR5IH0gfSwgeyBuZXc6IHRydWUgfSkubGVhbigpO1xuICAgICAgICB0cnkgeyBlbWl0VG9BZG1pbigncHJvZHVjdC1jaGFuZ2VkJywgeyBhY3Rpb246ICd1cGRhdGVkJywgcHJvZHVjdDogdXBkYXRlZCB9KTsgfSBjYXRjaChlKSB7fVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZ25vcmUgZmFpbHVyZXNcbiAgICAgIH1cbiAgICB9XG4gICAgdXNlci5jYXJ0ID0gdXNlci5jYXJ0LmZpbHRlcihpID0+IFN0cmluZyhpLnByb2R1Y3RJZCkgIT09IFN0cmluZyhwcm9kdWN0SWQpKTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICBcbiAgICAvLyBFbWl0IHJlYWwtdGltZSB1cGRhdGVcbiAgICBlbWl0VG9Vc2VyKGVtYWlsLCAnY2FydC1jaGFuZ2VkJywgeyBpdGVtczogdXNlci5jYXJ0IH0pO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJVc2VyIiwiUHJvZHVjdCIsIk5leHRSZXNwb25zZSIsImVtaXRUb1VzZXIiLCJlbWl0VG9BZG1pbiIsImVtaXRUb0FsbCIsIkdFVCIsInJlcSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImVtYWlsIiwiZ2V0IiwidXNlciIsImZpbmRPbmUiLCJ0b0xvd2VyQ2FzZSIsImxlYW4iLCJqc29uIiwiaXRlbXMiLCJjYXJ0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJkZWJ1ZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9kdWN0SWQiLCJuYW1lIiwicHJpY2UiLCJpbWFnZSIsInF1YW50aXR5Iiwic2x1ZyIsImV4aXN0aW5nTWFwIiwiTWFwIiwibWFwIiwiaSIsIlN0cmluZyIsIml0ZW0iLCJwcm9kdWN0IiwiZmluZEJ5SWQiLCJwcmV2UXR5IiwiZGVsdGEiLCJzdG9jayIsInRpdGxlIiwiaXQiLCJkaXNjb3VudCIsImNvbG9yVmFyaWFudCIsInVwZGF0ZWQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIiRpbmMiLCJzYWxlc0NvdW50IiwibmV3IiwiYWN0aW9uIiwiZSIsImV4aXN0aW5nIiwiZmluZCIsIm5ld1F1YW50aXR5IiwicHVzaCIsInNhdmUiLCJvayIsIlBVVCIsIkRFTEVURSIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsImluY2x1ZGVzIiwicmVtb3ZlZCIsImZpbHRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/cart/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUcsSUFBSSxDQUFDLENBQUNiO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xyXG4gKiBpbiBkZXZlbG9wbWVudC4gVGhpcyBwcmV2ZW50cyBjb25uZWN0aW9ucyBncm93aW5nIGV4cG9uZW50aWFsbHlcclxuICogZHVyaW5nIEFQSSBSb3V0ZSB1c2FnZS5cclxuICovXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cykudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aHJvdyBlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./lib/socket.js":
/*!***********************!*\
  !*** ./lib/socket.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const { Server } = __webpack_require__(/*! socket.io */ \"(rsc)/./node_modules/socket.io/dist/index.js\");\nlet io;\nconst initSocket = (server)=>{\n    io = new Server(server, {\n        cors: {\n            origin: process.env.NEXTAUTH_URL || \"http://localhost:3000\",\n            methods: [\n                \"GET\",\n                \"POST\"\n            ]\n        }\n    });\n    io.on(\"connection\", (socket)=>{\n        console.log(\"Client connected:\", socket.id);\n        // Join admin room for admin-specific updates\n        socket.on(\"join-admin\", ()=>{\n            socket.join(\"admin\");\n            console.log(\"Admin joined:\", socket.id);\n        });\n        // Join user-specific room\n        socket.on(\"join-user\", (userId)=>{\n            socket.join(`user-${userId}`);\n            console.log(\"User joined:\", userId);\n        });\n        // Handle cart updates\n        socket.on(\"cart-updated\", (data)=>{\n            socket.broadcast.to(`user-${data.userId}`).emit(\"cart-changed\", data);\n        });\n        // Handle wishlist updates\n        socket.on(\"wishlist-updated\", (data)=>{\n            socket.broadcast.to(`user-${data.userId}`).emit(\"wishlist-changed\", data);\n        });\n        // Handle product updates for admin\n        socket.on(\"product-updated\", (data)=>{\n            socket.broadcast.to(\"admin\").emit(\"product-changed\", data);\n        });\n        // Handle KPI updates\n        socket.on(\"kpi-updated\", (data)=>{\n            socket.broadcast.to(\"admin\").emit(\"kpi-changed\", data);\n        });\n        socket.on(\"disconnect\", ()=>{\n            console.log(\"Client disconnected:\", socket.id);\n        });\n    });\n    return io;\n};\nconst getIO = ()=>{\n    if (!io) {\n        throw new Error(\"Socket.io not initialized!\");\n    }\n    return io;\n};\nconst emitToUser = (userId, event, data)=>{\n    if (io) {\n        io.to(`user-${userId}`).emit(event, data);\n    }\n};\nconst emitToAdmin = (event, data)=>{\n    if (io) {\n        io.to(\"admin\").emit(event, data);\n    }\n};\n// Broadcast to all connected clients\nconst emitToAll = (event, data)=>{\n    if (io) {\n        io.emit(event, data);\n    }\n};\nmodule.exports = {\n    initSocket,\n    getIO,\n    emitToUser,\n    emitToAdmin,\n    emitToAll\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc29ja2V0LmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU0sRUFBRUEsTUFBTSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDO0FBRTNCLElBQUlDO0FBRUosTUFBTUMsYUFBYSxDQUFDQztJQUNsQkYsS0FBSyxJQUFJRixPQUFPSSxRQUFRO1FBQ3RCQyxNQUFNO1lBQ0pDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxJQUFJO1lBQ3BDQyxTQUFTO2dCQUFDO2dCQUFPO2FBQU87UUFDMUI7SUFDRjtJQUVBUixHQUFHUyxFQUFFLENBQUMsY0FBYyxDQUFDQztRQUNuQkMsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkYsT0FBT0csRUFBRTtRQUUxQyw2Q0FBNkM7UUFDN0NILE9BQU9ELEVBQUUsQ0FBQyxjQUFjO1lBQ3RCQyxPQUFPSSxJQUFJLENBQUM7WUFDWkgsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQkYsT0FBT0csRUFBRTtRQUN4QztRQUVBLDBCQUEwQjtRQUMxQkgsT0FBT0QsRUFBRSxDQUFDLGFBQWEsQ0FBQ007WUFDdEJMLE9BQU9JLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRUMsT0FBTyxDQUFDO1lBQzVCSixRQUFRQyxHQUFHLENBQUMsZ0JBQWdCRztRQUM5QjtRQUVBLHNCQUFzQjtRQUN0QkwsT0FBT0QsRUFBRSxDQUFDLGdCQUFnQixDQUFDTztZQUN6Qk4sT0FBT08sU0FBUyxDQUFDQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUVGLEtBQUtELE1BQU0sQ0FBQyxDQUFDLEVBQUVJLElBQUksQ0FBQyxnQkFBZ0JIO1FBQ2xFO1FBRUEsMEJBQTBCO1FBQzFCTixPQUFPRCxFQUFFLENBQUMsb0JBQW9CLENBQUNPO1lBQzdCTixPQUFPTyxTQUFTLENBQUNDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRUYsS0FBS0QsTUFBTSxDQUFDLENBQUMsRUFBRUksSUFBSSxDQUFDLG9CQUFvQkg7UUFDdEU7UUFFQSxtQ0FBbUM7UUFDbkNOLE9BQU9ELEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQ087WUFDNUJOLE9BQU9PLFNBQVMsQ0FBQ0MsRUFBRSxDQUFDLFNBQVNDLElBQUksQ0FBQyxtQkFBbUJIO1FBQ3ZEO1FBRUEscUJBQXFCO1FBQ3JCTixPQUFPRCxFQUFFLENBQUMsZUFBZSxDQUFDTztZQUN4Qk4sT0FBT08sU0FBUyxDQUFDQyxFQUFFLENBQUMsU0FBU0MsSUFBSSxDQUFDLGVBQWVIO1FBQ25EO1FBRUFOLE9BQU9ELEVBQUUsQ0FBQyxjQUFjO1lBQ3RCRSxRQUFRQyxHQUFHLENBQUMsd0JBQXdCRixPQUFPRyxFQUFFO1FBQy9DO0lBQ0Y7SUFFQSxPQUFPYjtBQUNUO0FBRUEsTUFBTW9CLFFBQVE7SUFDWixJQUFJLENBQUNwQixJQUFJO1FBQ1AsTUFBTSxJQUFJcUIsTUFBTTtJQUNsQjtJQUNBLE9BQU9yQjtBQUNUO0FBRUEsTUFBTXNCLGFBQWEsQ0FBQ1AsUUFBUVEsT0FBT1A7SUFDakMsSUFBSWhCLElBQUk7UUFDTkEsR0FBR2tCLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRUgsT0FBTyxDQUFDLEVBQUVJLElBQUksQ0FBQ0ksT0FBT1A7SUFDdEM7QUFDRjtBQUVBLE1BQU1RLGNBQWMsQ0FBQ0QsT0FBT1A7SUFDMUIsSUFBSWhCLElBQUk7UUFDTkEsR0FBR2tCLEVBQUUsQ0FBQyxTQUFTQyxJQUFJLENBQUNJLE9BQU9QO0lBQzdCO0FBQ0Y7QUFFQSxxQ0FBcUM7QUFDckMsTUFBTVMsWUFBWSxDQUFDRixPQUFPUDtJQUN4QixJQUFJaEIsSUFBSTtRQUNOQSxHQUFHbUIsSUFBSSxDQUFDSSxPQUFPUDtJQUNqQjtBQUNGO0FBRUFVLE9BQU9DLE9BQU8sR0FBRztJQUNmMUI7SUFDQW1CO0lBQ0FFO0lBQ0FFO0lBQ0FDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaXJ2YWFuYWEtZWNvbW1lcmNlLy4vbGliL3NvY2tldC5qcz81NzQwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU2VydmVyIH0gPSByZXF1aXJlKCdzb2NrZXQuaW8nKTtcblxubGV0IGlvO1xuXG5jb25zdCBpbml0U29ja2V0ID0gKHNlcnZlcikgPT4ge1xuICBpbyA9IG5ldyBTZXJ2ZXIoc2VydmVyLCB7XG4gICAgY29yczoge1xuICAgICAgb3JpZ2luOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXG4gICAgICBtZXRob2RzOiBbJ0dFVCcsICdQT1NUJ10sXG4gICAgfSxcbiAgfSk7XG5cbiAgaW8ub24oJ2Nvbm5lY3Rpb24nLCAoc29ja2V0KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NsaWVudCBjb25uZWN0ZWQ6Jywgc29ja2V0LmlkKTtcblxuICAgIC8vIEpvaW4gYWRtaW4gcm9vbSBmb3IgYWRtaW4tc3BlY2lmaWMgdXBkYXRlc1xuICAgIHNvY2tldC5vbignam9pbi1hZG1pbicsICgpID0+IHtcbiAgICAgIHNvY2tldC5qb2luKCdhZG1pbicpO1xuICAgICAgY29uc29sZS5sb2coJ0FkbWluIGpvaW5lZDonLCBzb2NrZXQuaWQpO1xuICAgIH0pO1xuXG4gICAgLy8gSm9pbiB1c2VyLXNwZWNpZmljIHJvb21cbiAgICBzb2NrZXQub24oJ2pvaW4tdXNlcicsICh1c2VySWQpID0+IHtcbiAgICAgIHNvY2tldC5qb2luKGB1c2VyLSR7dXNlcklkfWApO1xuICAgICAgY29uc29sZS5sb2coJ1VzZXIgam9pbmVkOicsIHVzZXJJZCk7XG4gICAgfSk7XG5cbiAgICAvLyBIYW5kbGUgY2FydCB1cGRhdGVzXG4gICAgc29ja2V0Lm9uKCdjYXJ0LXVwZGF0ZWQnLCAoZGF0YSkgPT4ge1xuICAgICAgc29ja2V0LmJyb2FkY2FzdC50byhgdXNlci0ke2RhdGEudXNlcklkfWApLmVtaXQoJ2NhcnQtY2hhbmdlZCcsIGRhdGEpO1xuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHdpc2hsaXN0IHVwZGF0ZXNcbiAgICBzb2NrZXQub24oJ3dpc2hsaXN0LXVwZGF0ZWQnLCAoZGF0YSkgPT4ge1xuICAgICAgc29ja2V0LmJyb2FkY2FzdC50byhgdXNlci0ke2RhdGEudXNlcklkfWApLmVtaXQoJ3dpc2hsaXN0LWNoYW5nZWQnLCBkYXRhKTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBwcm9kdWN0IHVwZGF0ZXMgZm9yIGFkbWluXG4gICAgc29ja2V0Lm9uKCdwcm9kdWN0LXVwZGF0ZWQnLCAoZGF0YSkgPT4ge1xuICAgICAgc29ja2V0LmJyb2FkY2FzdC50bygnYWRtaW4nKS5lbWl0KCdwcm9kdWN0LWNoYW5nZWQnLCBkYXRhKTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBLUEkgdXBkYXRlc1xuICAgIHNvY2tldC5vbigna3BpLXVwZGF0ZWQnLCAoZGF0YSkgPT4ge1xuICAgICAgc29ja2V0LmJyb2FkY2FzdC50bygnYWRtaW4nKS5lbWl0KCdrcGktY2hhbmdlZCcsIGRhdGEpO1xuICAgIH0pO1xuXG4gICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsaWVudCBkaXNjb25uZWN0ZWQ6Jywgc29ja2V0LmlkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGlvO1xufTtcblxuY29uc3QgZ2V0SU8gPSAoKSA9PiB7XG4gIGlmICghaW8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvY2tldC5pbyBub3QgaW5pdGlhbGl6ZWQhJyk7XG4gIH1cbiAgcmV0dXJuIGlvO1xufTtcblxuY29uc3QgZW1pdFRvVXNlciA9ICh1c2VySWQsIGV2ZW50LCBkYXRhKSA9PiB7XG4gIGlmIChpbykge1xuICAgIGlvLnRvKGB1c2VyLSR7dXNlcklkfWApLmVtaXQoZXZlbnQsIGRhdGEpO1xuICB9XG59O1xuXG5jb25zdCBlbWl0VG9BZG1pbiA9IChldmVudCwgZGF0YSkgPT4ge1xuICBpZiAoaW8pIHtcbiAgICBpby50bygnYWRtaW4nKS5lbWl0KGV2ZW50LCBkYXRhKTtcbiAgfVxufTtcblxuLy8gQnJvYWRjYXN0IHRvIGFsbCBjb25uZWN0ZWQgY2xpZW50c1xuY29uc3QgZW1pdFRvQWxsID0gKGV2ZW50LCBkYXRhKSA9PiB7XG4gIGlmIChpbykge1xuICAgIGlvLmVtaXQoZXZlbnQsIGRhdGEpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5pdFNvY2tldCxcbiAgZ2V0SU8sXG4gIGVtaXRUb1VzZXIsXG4gIGVtaXRUb0FkbWluLFxuICBlbWl0VG9BbGwsXG59O1xuIl0sIm5hbWVzIjpbIlNlcnZlciIsInJlcXVpcmUiLCJpbyIsImluaXRTb2NrZXQiLCJzZXJ2ZXIiLCJjb3JzIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsIm1ldGhvZHMiLCJvbiIsInNvY2tldCIsImNvbnNvbGUiLCJsb2ciLCJpZCIsImpvaW4iLCJ1c2VySWQiLCJkYXRhIiwiYnJvYWRjYXN0IiwidG8iLCJlbWl0IiwiZ2V0SU8iLCJFcnJvciIsImVtaXRUb1VzZXIiLCJldmVudCIsImVtaXRUb0FkbWluIiwiZW1pdFRvQWxsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/socket.js\n");

/***/ }),

/***/ "(rsc)/./models/Product.js":
/*!***************************!*\
  !*** ./models/Product.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst productSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: [\n            true,\n            \"Product title is required\"\n        ],\n        trim: true,\n        maxlength: [\n            100,\n            \"Title cannot be more than 100 characters\"\n        ]\n    },\n    slug: {\n        type: String,\n        required: [\n            true,\n            \"Product slug is required\"\n        ],\n        unique: true,\n        lowercase: true,\n        trim: true,\n        match: [\n            /^[a-z0-9-]+$/,\n            \"Slug can only contain lowercase letters, numbers, and hyphens\"\n        ]\n    },\n    description: {\n        type: String,\n        required: [\n            true,\n            \"Product description is required\"\n        ],\n        maxlength: [\n            2000,\n            \"Description cannot be more than 2000 characters\"\n        ]\n    },\n    shortDescription: {\n        type: String,\n        maxlength: [\n            200,\n            \"Short description cannot be more than 200 characters\"\n        ]\n    },\n    images: [\n        {\n            url: {\n                type: String,\n                required: true\n            },\n            alt: {\n                type: String,\n                required: true\n            },\n            publicId: {\n                type: String,\n                required: true\n            }\n        }\n    ],\n    price: {\n        type: Number,\n        required: [\n            true,\n            \"Product price is required\"\n        ],\n        min: [\n            0,\n            \"Price cannot be negative\"\n        ]\n    },\n    // Discount percentage (0-100)\n    discount: {\n        type: Number,\n        min: [\n            0,\n            \"Discount cannot be negative\"\n        ],\n        max: [\n            100,\n            \"Discount cannot be more than 100%\"\n        ],\n        default: 0\n    },\n    comparePrice: {\n        type: Number,\n        min: [\n            0,\n            \"Compare price cannot be negative\"\n        ]\n    },\n    stock: {\n        type: Number,\n        required: [\n            true,\n            \"Stock quantity is required\"\n        ],\n        min: [\n            0,\n            \"Stock cannot be negative\"\n        ],\n        default: 10\n    },\n    sku: {\n        type: String,\n        unique: true,\n        sparse: true,\n        trim: true\n    },\n    tags: [\n        {\n            type: String,\n            trim: true,\n            lowercase: true\n        }\n    ],\n    category: {\n        type: String,\n        required: [\n            true,\n            \"Product category is required\"\n        ],\n        enum: [\n            \"bangle-box\",\n            \"clutch\",\n            \"gift-hampers\",\n            \"goggle-cover\",\n            \"kitty-bag\",\n            \"long-tote-bag\",\n            \"picnic-bag\",\n            \"potli-purse\",\n            \"sling-bags\",\n            \"velvet-clutch-with-flaps\"\n        ]\n    },\n    subcategory: {\n        type: String,\n        trim: true\n    },\n    materials: [\n        {\n            type: String,\n            trim: true\n        }\n    ],\n    dimensions: {\n        length: Number,\n        width: Number,\n        height: Number,\n        unit: {\n            type: String,\n            enum: [\n                \"cm\",\n                \"inches\"\n            ],\n            default: \"cm\"\n        }\n    },\n    weight: {\n        value: Number,\n        unit: {\n            type: String,\n            enum: [\n                \"g\",\n                \"kg\",\n                \"lbs\"\n            ],\n            default: \"g\"\n        }\n    },\n    colors: [\n        {\n            name: String,\n            hex: String\n        }\n    ],\n    colorVariants: [\n        {\n            name: {\n                type: String,\n                required: true,\n                trim: true\n            },\n            hex: {\n                type: String,\n                required: true,\n                match: [\n                    /^#[0-9A-Fa-f]{6}$/,\n                    \"Hex color must be in format #RRGGBB\"\n                ]\n            },\n            images: [\n                {\n                    type: String,\n                    trim: true\n                }\n            ]\n        }\n    ],\n    published: {\n        type: Boolean,\n        default: true\n    },\n    featured: {\n        type: Boolean,\n        default: false\n    },\n    seo: {\n        metaTitle: {\n            type: String,\n            maxlength: [\n                60,\n                \"Meta title cannot be more than 60 characters\"\n            ]\n        },\n        metaDescription: {\n            type: String,\n            maxlength: [\n                160,\n                \"Meta description cannot be more than 160 characters\"\n            ]\n        },\n        keywords: [\n            String\n        ]\n    },\n    ratings: {\n        average: {\n            type: Number,\n            default: 0,\n            min: 0,\n            max: 5\n        },\n        count: {\n            type: Number,\n            default: 0,\n            min: 0\n        }\n    },\n    salesCount: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    isHandmade: {\n        type: Boolean,\n        default: true\n    },\n    madeIn: {\n        type: String,\n        default: \"India\"\n    },\n    careInstructions: {\n        type: String,\n        maxlength: [\n            500,\n            \"Care instructions cannot be more than 500 characters\"\n        ]\n    }\n}, {\n    timestamps: true\n});\n// Indexes for efficient queries\nproductSchema.index({\n    slug: 1\n});\nproductSchema.index({\n    category: 1\n});\nproductSchema.index({\n    tags: 1\n});\nproductSchema.index({\n    published: 1\n});\nproductSchema.index({\n    featured: 1\n});\nproductSchema.index({\n    \"ratings.average\": -1\n});\nproductSchema.index({\n    salesCount: -1\n});\nproductSchema.index({\n    createdAt: -1\n});\nproductSchema.set(\"toJSON\", {\n    virtuals: true,\n    transform: function(doc, ret) {\n        delete ret.__v;\n        return ret;\n    }\n});\n// Virtual for discount percentage\nproductSchema.virtual(\"discountPercentage\").get(function() {\n    if (this.comparePrice && this.comparePrice > this.price) {\n        return Math.round((this.comparePrice - this.price) / this.comparePrice * 100);\n    }\n    return 0;\n});\n// Virtual for in stock status\nproductSchema.virtual(\"inStock\").get(function() {\n    return this.stock > 0;\n});\n// Virtual for main image\nproductSchema.virtual(\"mainImage\").get(function() {\n    return this.images.length > 0 ? this.images[0] : null;\n});\n// Instance method to update stock\nproductSchema.methods.updateStock = function(quantity) {\n    this.stock = Math.max(0, this.stock - quantity);\n    return this.save();\n};\n// Instance method to increment sales count\nproductSchema.methods.incrementSales = function(quantity = 1) {\n    this.salesCount += quantity;\n    return this.save();\n};\n// Static method to find published products\nproductSchema.statics.findPublished = function() {\n    return this.find({\n        published: true\n    });\n};\n// Static method to find featured products\nproductSchema.statics.findFeatured = function() {\n    return this.find({\n        published: true,\n        featured: true\n    });\n};\n// Static method to find by category\nproductSchema.statics.findByCategory = function(category) {\n    return this.find({\n        published: true,\n        category\n    });\n};\n// Static method to search products\nproductSchema.statics.search = function(query) {\n    return this.find({\n        published: true,\n        $or: [\n            {\n                title: {\n                    $regex: query,\n                    $options: \"i\"\n                }\n            },\n            {\n                description: {\n                    $regex: query,\n                    $options: \"i\"\n                }\n            },\n            {\n                tags: {\n                    $in: [\n                        new RegExp(query, \"i\")\n                    ]\n                }\n            }\n        ]\n    });\n};\n// Pre-save middleware to generate slug if not provided\nproductSchema.pre(\"save\", function(next) {\n    if (!this.slug && this.title) {\n        this.slug = this.title.toLowerCase().replace(/[^a-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").trim(\"-\");\n    }\n    next();\n});\n// Ensure virtuals are serialized\nproductSchema.set(\"toJSON\", {\n    virtuals: true,\n    transform: function(doc, ret) {\n        delete ret.__v;\n        return ret;\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", productSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUFpQixJQUN6QkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJBLE9BQU8sQ0FBQyxPQUFPLEtBQ2ZyRixJQUFJLENBQUM7SUFDVjtJQUNBbUY7QUFDRjtBQUVBLGlDQUFpQztBQUNqQ3pGLGNBQWM2RCxHQUFHLENBQUMsVUFBVTtJQUMxQkMsVUFBVTtJQUNWQyxXQUFXLFNBQVNDLEdBQUcsRUFBRUMsR0FBRztRQUMxQixPQUFPQSxJQUFJQyxHQUFHO1FBQ2QsT0FBT0Q7SUFDVDtBQUNGO0FBRUEsaUVBQWVsRSx3REFBZSxDQUFDOEYsT0FBTyxJQUFJOUYscURBQWMsQ0FBQyxXQUFXQyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL21vZGVscy9Qcm9kdWN0LmpzPzA5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB0aXRsZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdQcm9kdWN0IHRpdGxlIGlzIHJlcXVpcmVkJ10sXG4gICAgdHJpbTogdHJ1ZSxcbiAgICBtYXhsZW5ndGg6IFsxMDAsICdUaXRsZSBjYW5ub3QgYmUgbW9yZSB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG4gIH0sXG4gIHNsdWc6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUHJvZHVjdCBzbHVnIGlzIHJlcXVpcmVkJ10sXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIG1hdGNoOiBbL15bYS16MC05LV0rJC8sICdTbHVnIGNhbiBvbmx5IGNvbnRhaW4gbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIGFuZCBoeXBoZW5zJ10sXG4gIH0sXG4gIGRlc2NyaXB0aW9uOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1Byb2R1Y3QgZGVzY3JpcHRpb24gaXMgcmVxdWlyZWQnXSxcbiAgICBtYXhsZW5ndGg6IFsyMDAwLCAnRGVzY3JpcHRpb24gY2Fubm90IGJlIG1vcmUgdGhhbiAyMDAwIGNoYXJhY3RlcnMnXSxcbiAgfSxcbiAgc2hvcnREZXNjcmlwdGlvbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBtYXhsZW5ndGg6IFsyMDAsICdTaG9ydCBkZXNjcmlwdGlvbiBjYW5ub3QgYmUgbW9yZSB0aGFuIDIwMCBjaGFyYWN0ZXJzJ10sXG4gIH0sXG4gIGltYWdlczogW3tcbiAgICB1cmw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgYWx0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHB1YmxpY0lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICB9XSxcbiAgcHJpY2U6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUHJvZHVjdCBwcmljZSBpcyByZXF1aXJlZCddLFxuICAgIG1pbjogWzAsICdQcmljZSBjYW5ub3QgYmUgbmVnYXRpdmUnXSxcbiAgfSxcbiAgLy8gRGlzY291bnQgcGVyY2VudGFnZSAoMC0xMDApXG4gIGRpc2NvdW50OiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIG1pbjogWzAsICdEaXNjb3VudCBjYW5ub3QgYmUgbmVnYXRpdmUnXSxcbiAgICBtYXg6IFsxMDAsICdEaXNjb3VudCBjYW5ub3QgYmUgbW9yZSB0aGFuIDEwMCUnXSxcbiAgICBkZWZhdWx0OiAwLFxuICB9LFxuICBjb21wYXJlUHJpY2U6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgbWluOiBbMCwgJ0NvbXBhcmUgcHJpY2UgY2Fubm90IGJlIG5lZ2F0aXZlJ10sXG4gIH0sXG4gIHN0b2NrOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1N0b2NrIHF1YW50aXR5IGlzIHJlcXVpcmVkJ10sXG4gICAgbWluOiBbMCwgJ1N0b2NrIGNhbm5vdCBiZSBuZWdhdGl2ZSddLFxuICAgIGRlZmF1bHQ6IDEwLFxuICB9LFxuICBza3U6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHNwYXJzZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICB0YWdzOiBbe1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgfV0sXG4gIGNhdGVnb3J5OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1Byb2R1Y3QgY2F0ZWdvcnkgaXMgcmVxdWlyZWQnXSxcbiAgICBlbnVtOiBbXG4gICAgICAnYmFuZ2xlLWJveCcsXG4gICAgICAnY2x1dGNoJyxcbiAgICAgICdnaWZ0LWhhbXBlcnMnLFxuICAgICAgJ2dvZ2dsZS1jb3ZlcicsXG4gICAgICAna2l0dHktYmFnJyxcbiAgICAgICdsb25nLXRvdGUtYmFnJyxcbiAgICAgICdwaWNuaWMtYmFnJyxcbiAgICAgICdwb3RsaS1wdXJzZScsXG4gICAgICAnc2xpbmctYmFncycsXG4gICAgICAndmVsdmV0LWNsdXRjaC13aXRoLWZsYXBzJ1xuICAgIF0sXG4gIH0sXG4gIHN1YmNhdGVnb3J5OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHRyaW06IHRydWUsXG4gIH0sXG4gIG1hdGVyaWFsczogW3tcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfV0sXG4gIGRpbWVuc2lvbnM6IHtcbiAgICBsZW5ndGg6IE51bWJlcixcbiAgICB3aWR0aDogTnVtYmVyLFxuICAgIGhlaWdodDogTnVtYmVyLFxuICAgIHVuaXQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnY20nLCAnaW5jaGVzJ10sXG4gICAgICBkZWZhdWx0OiAnY20nLFxuICAgIH0sXG4gIH0sXG4gIHdlaWdodDoge1xuICAgIHZhbHVlOiBOdW1iZXIsXG4gICAgdW5pdDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogWydnJywgJ2tnJywgJ2xicyddLFxuICAgICAgZGVmYXVsdDogJ2cnLFxuICAgIH0sXG4gIH0sXG4gIGNvbG9yczogW3tcbiAgICBuYW1lOiBTdHJpbmcsXG4gICAgaGV4OiBTdHJpbmcsXG4gIH1dLFxuICBjb2xvclZhcmlhbnRzOiBbe1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIGhleDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBtYXRjaDogWy9eI1swLTlBLUZhLWZdezZ9JC8sICdIZXggY29sb3IgbXVzdCBiZSBpbiBmb3JtYXQgI1JSR0dCQiddLFxuICAgIH0sXG4gICAgaW1hZ2VzOiBbe1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9XSxcbiAgfV0sXG4gIHB1Ymxpc2hlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgfSxcbiAgZmVhdHVyZWQ6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxuICBzZW86IHtcbiAgICBtZXRhVGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIG1heGxlbmd0aDogWzYwLCAnTWV0YSB0aXRsZSBjYW5ub3QgYmUgbW9yZSB0aGFuIDYwIGNoYXJhY3RlcnMnXSxcbiAgICB9LFxuICAgIG1ldGFEZXNjcmlwdGlvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgbWF4bGVuZ3RoOiBbMTYwLCAnTWV0YSBkZXNjcmlwdGlvbiBjYW5ub3QgYmUgbW9yZSB0aGFuIDE2MCBjaGFyYWN0ZXJzJ10sXG4gICAgfSxcbiAgICBrZXl3b3JkczogW1N0cmluZ10sXG4gIH0sXG4gIHJhdGluZ3M6IHtcbiAgICBhdmVyYWdlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiA1LFxuICAgIH0sXG4gICAgY291bnQ6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICBtaW46IDAsXG4gICAgfSxcbiAgfSxcbiAgc2FsZXNDb3VudDoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwLFxuICAgIG1pbjogMCxcbiAgfSxcbiAgaXNIYW5kbWFkZToge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgfSxcbiAgbWFkZUluOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdJbmRpYScsXG4gIH0sXG4gIGNhcmVJbnN0cnVjdGlvbnM6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgbWF4bGVuZ3RoOiBbNTAwLCAnQ2FyZSBpbnN0cnVjdGlvbnMgY2Fubm90IGJlIG1vcmUgdGhhbiA1MDAgY2hhcmFjdGVycyddLFxuICB9LFxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbi8vIEluZGV4ZXMgZm9yIGVmZmljaWVudCBxdWVyaWVzXG5wcm9kdWN0U2NoZW1hLmluZGV4KHsgc2x1ZzogMSB9KTtcbnByb2R1Y3RTY2hlbWEuaW5kZXgoeyBjYXRlZ29yeTogMSB9KTtcbnByb2R1Y3RTY2hlbWEuaW5kZXgoeyB0YWdzOiAxIH0pO1xucHJvZHVjdFNjaGVtYS5pbmRleCh7IHB1Ymxpc2hlZDogMSB9KTtcbnByb2R1Y3RTY2hlbWEuaW5kZXgoeyBmZWF0dXJlZDogMSB9KTtcbnByb2R1Y3RTY2hlbWEuaW5kZXgoeyAncmF0aW5ncy5hdmVyYWdlJzogLTEgfSk7XG5wcm9kdWN0U2NoZW1hLmluZGV4KHsgc2FsZXNDb3VudDogLTEgfSk7XG5wcm9kdWN0U2NoZW1hLmluZGV4KHsgY3JlYXRlZEF0OiAtMSB9KTtcbnByb2R1Y3RTY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHZpcnR1YWxzOiB0cnVlLFxuICB0cmFuc2Zvcm06IGZ1bmN0aW9uIChkb2MsIHJldCkge1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxuXG4vLyBWaXJ0dWFsIGZvciBkaXNjb3VudCBwZXJjZW50YWdlXG5wcm9kdWN0U2NoZW1hLnZpcnR1YWwoJ2Rpc2NvdW50UGVyY2VudGFnZScpLmdldChmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuY29tcGFyZVByaWNlICYmIHRoaXMuY29tcGFyZVByaWNlID4gdGhpcy5wcmljZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKCgodGhpcy5jb21wYXJlUHJpY2UgLSB0aGlzLnByaWNlKSAvIHRoaXMuY29tcGFyZVByaWNlKSAqIDEwMCk7XG4gIH1cbiAgcmV0dXJuIDA7XG59KTtcblxuLy8gVmlydHVhbCBmb3IgaW4gc3RvY2sgc3RhdHVzXG5wcm9kdWN0U2NoZW1hLnZpcnR1YWwoJ2luU3RvY2snKS5nZXQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5zdG9jayA+IDA7XG59KTtcblxuXG4vLyBWaXJ0dWFsIGZvciBtYWluIGltYWdlXG5wcm9kdWN0U2NoZW1hLnZpcnR1YWwoJ21haW5JbWFnZScpLmdldChmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuaW1hZ2VzLmxlbmd0aCA+IDAgPyB0aGlzLmltYWdlc1swXSA6IG51bGw7XG59KTtcblxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIHVwZGF0ZSBzdG9ja1xucHJvZHVjdFNjaGVtYS5tZXRob2RzLnVwZGF0ZVN0b2NrID0gZnVuY3Rpb24ocXVhbnRpdHkpIHtcbiAgdGhpcy5zdG9jayA9IE1hdGgubWF4KDAsIHRoaXMuc3RvY2sgLSBxdWFudGl0eSk7XG4gIHJldHVybiB0aGlzLnNhdmUoKTtcbn07XG5cbi8vIEluc3RhbmNlIG1ldGhvZCB0byBpbmNyZW1lbnQgc2FsZXMgY291bnRcbnByb2R1Y3RTY2hlbWEubWV0aG9kcy5pbmNyZW1lbnRTYWxlcyA9IGZ1bmN0aW9uKHF1YW50aXR5ID0gMSkge1xuICB0aGlzLnNhbGVzQ291bnQgKz0gcXVhbnRpdHk7XG4gIHJldHVybiB0aGlzLnNhdmUoKTtcbn07XG5cbi8vIFN0YXRpYyBtZXRob2QgdG8gZmluZCBwdWJsaXNoZWQgcHJvZHVjdHNcbnByb2R1Y3RTY2hlbWEuc3RhdGljcy5maW5kUHVibGlzaGVkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmZpbmQoeyBwdWJsaXNoZWQ6IHRydWUgfSk7XG59O1xuXG4vLyBTdGF0aWMgbWV0aG9kIHRvIGZpbmQgZmVhdHVyZWQgcHJvZHVjdHNcbnByb2R1Y3RTY2hlbWEuc3RhdGljcy5maW5kRmVhdHVyZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZmluZCh7IHB1Ymxpc2hlZDogdHJ1ZSwgZmVhdHVyZWQ6IHRydWUgfSk7XG59O1xuXG4vLyBTdGF0aWMgbWV0aG9kIHRvIGZpbmQgYnkgY2F0ZWdvcnlcbnByb2R1Y3RTY2hlbWEuc3RhdGljcy5maW5kQnlDYXRlZ29yeSA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gIHJldHVybiB0aGlzLmZpbmQoeyBwdWJsaXNoZWQ6IHRydWUsIGNhdGVnb3J5IH0pO1xufTtcblxuLy8gU3RhdGljIG1ldGhvZCB0byBzZWFyY2ggcHJvZHVjdHNcbnByb2R1Y3RTY2hlbWEuc3RhdGljcy5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSkge1xuICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICBwdWJsaXNoZWQ6IHRydWUsXG4gICAgJG9yOiBbXG4gICAgICB7IHRpdGxlOiB7ICRyZWdleDogcXVlcnksICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgeyBkZXNjcmlwdGlvbjogeyAkcmVnZXg6IHF1ZXJ5LCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgIHsgdGFnczogeyAkaW46IFtuZXcgUmVnRXhwKHF1ZXJ5LCAnaScpXSB9IH0sXG4gICAgXSxcbiAgfSk7XG59O1xuXG4vLyBQcmUtc2F2ZSBtaWRkbGV3YXJlIHRvIGdlbmVyYXRlIHNsdWcgaWYgbm90IHByb3ZpZGVkXG5wcm9kdWN0U2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbiAgaWYgKCF0aGlzLnNsdWcgJiYgdGhpcy50aXRsZSkge1xuICAgIHRoaXMuc2x1ZyA9IHRoaXMudGl0bGVcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAucmVwbGFjZSgvW15hLXowLTlcXHMtXS9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpXG4gICAgICAudHJpbSgnLScpO1xuICB9XG4gIG5leHQoKTtcbn0pO1xuXG4vLyBFbnN1cmUgdmlydHVhbHMgYXJlIHNlcmlhbGl6ZWRcbnByb2R1Y3RTY2hlbWEuc2V0KCd0b0pTT04nLCB7XG4gIHZpcnR1YWxzOiB0cnVlLFxuICB0cmFuc2Zvcm06IGZ1bmN0aW9uKGRvYywgcmV0KSB7XG4gICAgZGVsZXRlIHJldC5fX3Y7XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbCgnUHJvZHVjdCcsIHByb2R1Y3RTY2hlbWEpO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicHJvZHVjdFNjaGVtYSIsIlNjaGVtYSIsInRpdGxlIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsIm1heGxlbmd0aCIsInNsdWciLCJ1bmlxdWUiLCJsb3dlcmNhc2UiLCJtYXRjaCIsImRlc2NyaXB0aW9uIiwic2hvcnREZXNjcmlwdGlvbiIsImltYWdlcyIsInVybCIsImFsdCIsInB1YmxpY0lkIiwicHJpY2UiLCJOdW1iZXIiLCJtaW4iLCJkaXNjb3VudCIsIm1heCIsImRlZmF1bHQiLCJjb21wYXJlUHJpY2UiLCJzdG9jayIsInNrdSIsInNwYXJzZSIsInRhZ3MiLCJjYXRlZ29yeSIsImVudW0iLCJzdWJjYXRlZ29yeSIsIm1hdGVyaWFscyIsImRpbWVuc2lvbnMiLCJsZW5ndGgiLCJ3aWR0aCIsImhlaWdodCIsInVuaXQiLCJ3ZWlnaHQiLCJ2YWx1ZSIsImNvbG9ycyIsIm5hbWUiLCJoZXgiLCJjb2xvclZhcmlhbnRzIiwicHVibGlzaGVkIiwiQm9vbGVhbiIsImZlYXR1cmVkIiwic2VvIiwibWV0YVRpdGxlIiwibWV0YURlc2NyaXB0aW9uIiwia2V5d29yZHMiLCJyYXRpbmdzIiwiYXZlcmFnZSIsImNvdW50Iiwic2FsZXNDb3VudCIsImlzSGFuZG1hZGUiLCJtYWRlSW4iLCJjYXJlSW5zdHJ1Y3Rpb25zIiwidGltZXN0YW1wcyIsImluZGV4IiwiY3JlYXRlZEF0Iiwic2V0IiwidmlydHVhbHMiLCJ0cmFuc2Zvcm0iLCJkb2MiLCJyZXQiLCJfX3YiLCJ2aXJ0dWFsIiwiZ2V0IiwiTWF0aCIsInJvdW5kIiwibWV0aG9kcyIsInVwZGF0ZVN0b2NrIiwicXVhbnRpdHkiLCJzYXZlIiwiaW5jcmVtZW50U2FsZXMiLCJzdGF0aWNzIiwiZmluZFB1Ymxpc2hlZCIsImZpbmQiLCJmaW5kRmVhdHVyZWQiLCJmaW5kQnlDYXRlZ29yeSIsInNlYXJjaCIsInF1ZXJ5IiwiJG9yIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCIkaW4iLCJSZWdFeHAiLCJwcmUiLCJuZXh0IiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwibW9kZWxzIiwiUHJvZHVjdCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/Product.js\n");

/***/ }),

/***/ "(rsc)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            \"Name is required\"\n        ],\n        trim: true,\n        maxlength: [\n            50,\n            \"Name cannot be more than 50 characters\"\n        ]\n    },\n    email: {\n        type: String,\n        required: [\n            true,\n            \"Email is required\"\n        ],\n        unique: true,\n        lowercase: true,\n        trim: true,\n        match: [\n            /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/,\n            \"Please enter a valid email\"\n        ]\n    },\n    passwordHash: {\n        type: String,\n        required: function() {\n            return !this.googleId && !this.facebookId; // Password required only for email/password auth\n        }\n    },\n    role: {\n        type: String,\n        enum: [\n            \"user\",\n            \"admin\"\n        ],\n        default: \"user\"\n    },\n    googleId: {\n        type: String,\n        sparse: true\n    },\n    facebookId: {\n        type: String,\n        sparse: true\n    },\n    image: {\n        type: String\n    },\n    profileImage: {\n        type: String\n    },\n    phone: {\n        type: String,\n        match: [\n            /^\\+?[\\d\\s-()]+$/,\n            \"Please enter a valid phone number\"\n        ]\n    },\n    addresses: [\n        {\n            type: {\n                type: String,\n                enum: [\n                    \"shipping\",\n                    \"billing\"\n                ],\n                required: true\n            },\n            street: {\n                type: String,\n                required: true\n            },\n            city: {\n                type: String,\n                required: true\n            },\n            state: {\n                type: String,\n                required: true\n            },\n            zipCode: {\n                type: String,\n                required: true\n            },\n            country: {\n                type: String,\n                required: true,\n                default: \"India\"\n            },\n            isDefault: {\n                type: Boolean,\n                default: false\n            }\n        }\n    ],\n    shippingAddress: {\n        name: String,\n        street: String,\n        city: String,\n        state: String,\n        zipCode: String,\n        country: {\n            type: String,\n            default: \"India\"\n        },\n        phone: String\n    },\n    emailVerified: {\n        type: Boolean,\n        default: false\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    // Persist simple cart and wishlist on user profile\n    cart: [\n        {\n            productId: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"Product\"\n            },\n            name: String,\n            image: String,\n            price: Number,\n            quantity: {\n                type: Number,\n                default: 1\n            },\n            slug: String\n        }\n    ],\n    wishlist: [\n        {\n            productId: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"Product\"\n            },\n            name: String,\n            image: String,\n            price: Number,\n            slug: String,\n            addedAt: {\n                type: Date,\n                default: Date.now\n            }\n        }\n    ],\n    lastLogin: {\n        type: Date\n    },\n    resetPasswordToken: {\n        type: String\n    },\n    resetPasswordExpires: {\n        type: Date\n    }\n}, {\n    timestamps: true\n});\n// Index for efficient queries\nuserSchema.index({\n    email: 1\n});\nuserSchema.index({\n    googleId: 1\n});\nuserSchema.index({\n    facebookId: 1\n});\nuserSchema.index({\n    role: 1\n});\n// Virtual for password (not stored in DB)\nuserSchema.virtual(\"password\").set(function(password) {\n    if (password) {\n        this.passwordHash = bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hashSync(password, 12);\n    }\n}).get(function() {\n    return this.passwordHash;\n});\n// Instance method to check password\nuserSchema.methods.checkPassword = function(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compareSync(password, this.passwordHash);\n};\n// Instance method to get public profile\nuserSchema.methods.getPublicProfile = function() {\n    const userObject = this.toObject();\n    delete userObject.passwordHash;\n    delete userObject.__v;\n    return userObject;\n};\n// Static method to find by email\nuserSchema.statics.findByEmail = function(email) {\n    return this.findOne({\n        email: email.toLowerCase()\n    });\n};\n// Static method to find admin users\nuserSchema.statics.findAdmins = function() {\n    return this.find({\n        role: \"admin\"\n    });\n};\n// Pre-save middleware to ensure unique email\nuserSchema.pre(\"save\", async function(next) {\n    if (this.isModified(\"email\")) {\n        const existingUser = await this.constructor.findOne({\n            email: this.email,\n            _id: {\n                $ne: this._id\n            }\n        });\n        if (existingUser) {\n            throw new Error(\"Email already exists\");\n        }\n    }\n    next();\n});\n// Ensure virtuals are serialized\nuserSchema.set(\"toJSON\", {\n    virtuals: true,\n    transform: function(doc, ret) {\n        delete ret.passwordHash;\n        delete ret.__v;\n        return ret;\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztBQUM3Q2YsV0FBV3FFLEdBQUcsQ0FBQyxRQUFRLGVBQWVDLElBQUk7SUFDeEMsSUFBSSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxVQUFVO1FBQzVCLE1BQU1DLGVBQWUsTUFBTSxJQUFJLENBQUNDLFdBQVcsQ0FBQ1IsT0FBTyxDQUFDO1lBQ2xEekQsT0FBTyxJQUFJLENBQUNBLEtBQUs7WUFDakJrRSxLQUFLO2dCQUFFQyxLQUFLLElBQUksQ0FBQ0QsR0FBRztZQUFDO1FBQ3ZCO1FBQ0EsSUFBSUYsY0FBYztZQUNoQixNQUFNLElBQUlJLE1BQU07UUFDbEI7SUFDRjtJQUNBTjtBQUNGO0FBRUEsaUNBQWlDO0FBQ2pDdEUsV0FBV29ELEdBQUcsQ0FBQyxVQUFVO0lBQ3ZCeUIsVUFBVTtJQUNWQyxXQUFXLFNBQVNDLEdBQUcsRUFBRUMsR0FBRztRQUMxQixPQUFPQSxJQUFJcEUsWUFBWTtRQUN2QixPQUFPb0UsSUFBSWxCLEdBQUc7UUFDZCxPQUFPa0I7SUFDVDtBQUNGO0FBRUEsaUVBQWVsRix3REFBZSxDQUFDb0YsSUFBSSxJQUFJcEYscURBQWMsQ0FBQyxRQUFRRSxXQUFXQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmlydmFhbmFhLWVjb21tZXJjZS8uL21vZGVscy9Vc2VyLmpzPzczNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnTmFtZSBpcyByZXF1aXJlZCddLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWF4bGVuZ3RoOiBbNTAsICdOYW1lIGNhbm5vdCBiZSBtb3JlIHRoYW4gNTAgY2hhcmFjdGVycyddLFxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdFbWFpbCBpcyByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgdHJpbTogdHJ1ZSxcbiAgICBtYXRjaDogWy9eXFx3KyhbLi1dP1xcdyspKkBcXHcrKFsuLV0/XFx3KykqKFxcLlxcd3syLDN9KSskLywgJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsJ10sXG4gIH0sXG4gIHBhc3N3b3JkSGFzaDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuZ29vZ2xlSWQgJiYgIXRoaXMuZmFjZWJvb2tJZDsgLy8gUGFzc3dvcmQgcmVxdWlyZWQgb25seSBmb3IgZW1haWwvcGFzc3dvcmQgYXV0aFxuICAgIH0sXG4gIH0sXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWyd1c2VyJywgJ2FkbWluJ10sXG4gICAgZGVmYXVsdDogJ3VzZXInLFxuICB9LFxuICBnb29nbGVJZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBzcGFyc2U6IHRydWUsXG4gIH0sXG4gIGZhY2Vib29rSWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgc3BhcnNlOiB0cnVlLFxuICB9LFxuICBpbWFnZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgcHJvZmlsZUltYWdlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBwaG9uZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBtYXRjaDogWy9eXFwrP1tcXGRcXHMtKCldKyQvLCAnUGxlYXNlIGVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyJ10sXG4gIH0sXG4gIGFkZHJlc3NlczogW3tcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBlbnVtOiBbJ3NoaXBwaW5nJywgJ2JpbGxpbmcnXSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgc3RyZWV0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGNpdHk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgc3RhdGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgemlwQ29kZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBjb3VudHJ5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdJbmRpYScsXG4gICAgfSxcbiAgICBpc0RlZmF1bHQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICB9XSxcbiAgc2hpcHBpbmdBZGRyZXNzOiB7XG4gICAgbmFtZTogU3RyaW5nLFxuICAgIHN0cmVldDogU3RyaW5nLFxuICAgIGNpdHk6IFN0cmluZyxcbiAgICBzdGF0ZTogU3RyaW5nLFxuICAgIHppcENvZGU6IFN0cmluZyxcbiAgICBjb3VudHJ5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnSW5kaWEnLFxuICAgIH0sXG4gICAgcGhvbmU6IFN0cmluZyxcbiAgfSxcbiAgZW1haWxWZXJpZmllZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gIH0sXG4gIGlzQWN0aXZlOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlLFxuICB9LFxuICAvLyBQZXJzaXN0IHNpbXBsZSBjYXJ0IGFuZCB3aXNobGlzdCBvbiB1c2VyIHByb2ZpbGVcbiAgY2FydDogW1xuICAgIHtcbiAgICAgIHByb2R1Y3RJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1Byb2R1Y3QnIH0sXG4gICAgICBuYW1lOiBTdHJpbmcsXG4gICAgICBpbWFnZTogU3RyaW5nLFxuICAgICAgcHJpY2U6IE51bWJlcixcbiAgICAgIHF1YW50aXR5OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMSB9LFxuICAgICAgc2x1ZzogU3RyaW5nLFxuICAgIH1cbiAgXSxcbiAgd2lzaGxpc3Q6IFtcbiAgICB7XG4gICAgICBwcm9kdWN0SWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdQcm9kdWN0JyB9LFxuICAgICAgbmFtZTogU3RyaW5nLFxuICAgICAgaW1hZ2U6IFN0cmluZyxcbiAgICAgIHByaWNlOiBOdW1iZXIsXG4gICAgICBzbHVnOiBTdHJpbmcsXG4gICAgICBhZGRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cbiAgICB9XG4gIF0sXG4gIGxhc3RMb2dpbjoge1xuICAgIHR5cGU6IERhdGUsXG4gIH0sXG4gIHJlc2V0UGFzc3dvcmRUb2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgcmVzZXRQYXNzd29yZEV4cGlyZXM6IHtcbiAgICB0eXBlOiBEYXRlLFxuICB9LFxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbi8vIEluZGV4IGZvciBlZmZpY2llbnQgcXVlcmllc1xudXNlclNjaGVtYS5pbmRleCh7IGVtYWlsOiAxIH0pO1xudXNlclNjaGVtYS5pbmRleCh7IGdvb2dsZUlkOiAxIH0pO1xudXNlclNjaGVtYS5pbmRleCh7IGZhY2Vib29rSWQ6IDEgfSk7XG51c2VyU2NoZW1hLmluZGV4KHsgcm9sZTogMSB9KTtcblxuLy8gVmlydHVhbCBmb3IgcGFzc3dvcmQgKG5vdCBzdG9yZWQgaW4gREIpXG51c2VyU2NoZW1hLnZpcnR1YWwoJ3Bhc3N3b3JkJylcbiAgLnNldChmdW5jdGlvbihwYXNzd29yZCkge1xuICAgIGlmIChwYXNzd29yZCkge1xuICAgICAgdGhpcy5wYXNzd29yZEhhc2ggPSBiY3J5cHQuaGFzaFN5bmMocGFzc3dvcmQsIDEyKTtcbiAgICB9XG4gIH0pXG4gIC5nZXQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGFzc3dvcmRIYXNoO1xuICB9KTtcblxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIGNoZWNrIHBhc3N3b3JkXG51c2VyU2NoZW1hLm1ldGhvZHMuY2hlY2tQYXNzd29yZCA9IGZ1bmN0aW9uKHBhc3N3b3JkKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZVN5bmMocGFzc3dvcmQsIHRoaXMucGFzc3dvcmRIYXNoKTtcbn07XG5cbi8vIEluc3RhbmNlIG1ldGhvZCB0byBnZXQgcHVibGljIHByb2ZpbGVcbnVzZXJTY2hlbWEubWV0aG9kcy5nZXRQdWJsaWNQcm9maWxlID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHVzZXJPYmplY3QgPSB0aGlzLnRvT2JqZWN0KCk7XG4gIGRlbGV0ZSB1c2VyT2JqZWN0LnBhc3N3b3JkSGFzaDtcbiAgZGVsZXRlIHVzZXJPYmplY3QuX192O1xuICByZXR1cm4gdXNlck9iamVjdDtcbn07XG5cbi8vIFN0YXRpYyBtZXRob2QgdG8gZmluZCBieSBlbWFpbFxudXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeUVtYWlsID0gZnVuY3Rpb24oZW1haWwpIHtcbiAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpIH0pO1xufTtcblxuLy8gU3RhdGljIG1ldGhvZCB0byBmaW5kIGFkbWluIHVzZXJzXG51c2VyU2NoZW1hLnN0YXRpY3MuZmluZEFkbWlucyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5maW5kKHsgcm9sZTogJ2FkbWluJyB9KTtcbn07XG5cbi8vIFByZS1zYXZlIG1pZGRsZXdhcmUgdG8gZW5zdXJlIHVuaXF1ZSBlbWFpbFxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4gIGlmICh0aGlzLmlzTW9kaWZpZWQoJ2VtYWlsJykpIHtcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCB0aGlzLmNvbnN0cnVjdG9yLmZpbmRPbmUoeyBcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLCBcbiAgICAgIF9pZDogeyAkbmU6IHRoaXMuX2lkIH0gXG4gICAgfSk7XG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWFpbCBhbHJlYWR5IGV4aXN0cycpO1xuICAgIH1cbiAgfVxuICBuZXh0KCk7XG59KTtcblxuLy8gRW5zdXJlIHZpcnR1YWxzIGFyZSBzZXJpYWxpemVkXG51c2VyU2NoZW1hLnNldCgndG9KU09OJywge1xuICB2aXJ0dWFsczogdHJ1ZSxcbiAgdHJhbnNmb3JtOiBmdW5jdGlvbihkb2MsIHJldCkge1xuICAgIGRlbGV0ZSByZXQucGFzc3dvcmRIYXNoO1xuICAgIGRlbGV0ZSByZXQuX192O1xuICAgIHJldHVybiByZXQ7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImJjcnlwdCIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsIm1heGxlbmd0aCIsImVtYWlsIiwidW5pcXVlIiwibG93ZXJjYXNlIiwibWF0Y2giLCJwYXNzd29yZEhhc2giLCJnb29nbGVJZCIsImZhY2Vib29rSWQiLCJyb2xlIiwiZW51bSIsImRlZmF1bHQiLCJzcGFyc2UiLCJpbWFnZSIsInByb2ZpbGVJbWFnZSIsInBob25lIiwiYWRkcmVzc2VzIiwic3RyZWV0IiwiY2l0eSIsInN0YXRlIiwiemlwQ29kZSIsImNvdW50cnkiLCJpc0RlZmF1bHQiLCJCb29sZWFuIiwic2hpcHBpbmdBZGRyZXNzIiwiZW1haWxWZXJpZmllZCIsImlzQWN0aXZlIiwiY2FydCIsInByb2R1Y3RJZCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJwcmljZSIsIk51bWJlciIsInF1YW50aXR5Iiwic2x1ZyIsIndpc2hsaXN0IiwiYWRkZWRBdCIsIkRhdGUiLCJub3ciLCJsYXN0TG9naW4iLCJyZXNldFBhc3N3b3JkVG9rZW4iLCJyZXNldFBhc3N3b3JkRXhwaXJlcyIsInRpbWVzdGFtcHMiLCJpbmRleCIsInZpcnR1YWwiLCJzZXQiLCJwYXNzd29yZCIsImhhc2hTeW5jIiwiZ2V0IiwibWV0aG9kcyIsImNoZWNrUGFzc3dvcmQiLCJjb21wYXJlU3luYyIsImdldFB1YmxpY1Byb2ZpbGUiLCJ1c2VyT2JqZWN0IiwidG9PYmplY3QiLCJfX3YiLCJzdGF0aWNzIiwiZmluZEJ5RW1haWwiLCJmaW5kT25lIiwidG9Mb3dlckNhc2UiLCJmaW5kQWRtaW5zIiwiZmluZCIsInByZSIsIm5leHQiLCJpc01vZGlmaWVkIiwiZXhpc3RpbmdVc2VyIiwiY29uc3RydWN0b3IiLCJfaWQiLCIkbmUiLCJFcnJvciIsInZpcnR1YWxzIiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwibW9kZWxzIiwiVXNlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/User.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs","vendor-chunks/cookie","vendor-chunks/socket.io-parser","vendor-chunks/engine.io-parser","vendor-chunks/supports-color","vendor-chunks/@socket.io","vendor-chunks/ms","vendor-chunks/has-flag","vendor-chunks/engine.io","vendor-chunks/socket.io-adapter","vendor-chunks/mime-db","vendor-chunks/socket.io","vendor-chunks/negotiator","vendor-chunks/cors","vendor-chunks/accepts","vendor-chunks/mime-types","vendor-chunks/vary","vendor-chunks/base64id","vendor-chunks/object-assign"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.js&appDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnanya%5CDownloads%5CNirvaanaa_current%5CNirvaanaa%20(1)%5CNirvaanaa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();