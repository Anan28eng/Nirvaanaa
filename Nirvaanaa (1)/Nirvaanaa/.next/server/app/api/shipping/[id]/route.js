"use strict";(()=>{var e={};e.id=6154,e.ids=[6154],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},945:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>j,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>q,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>Z});var i={};r.r(i),r.d(i,{DELETE:()=>g,GET:()=>h,PUT:()=>l});var n=r(95419),s=r(69108),o=r(99678),a=r(78070),u=r(81355),p=r(82242),d=r(88578),c=r(74145);async function h(e,{params:t}){try{if(!await (0,u.getServerSession)(p.authOptions))return a.Z.json({error:"Authentication required"},{status:401});await (0,d.Z)();let{id:e}=t,r=await c.Z.findById(e);if(!r)return a.Z.json({error:"Shipping method not found"},{status:404});return a.Z.json({method:r})}catch(e){return console.error("Error fetching shipping method:",e),a.Z.json({error:"Failed to fetch shipping method"},{status:500})}}async function l(e,{params:t}){try{let r=await (0,u.getServerSession)(p.authOptions);if(!r||"admin"!==r.user.role)return a.Z.json({error:"Admin access required"},{status:403});await (0,d.Z)();let{id:i}=t,n=await e.json();if(!await c.Z.findById(i))return a.Z.json({error:"Shipping method not found"},{status:404});n.isDefault&&await c.Z.updateMany({_id:{$ne:i}},{isDefault:!1});let s=await c.Z.findByIdAndUpdate(i,n,{new:!0});return a.Z.json({message:"Shipping method updated successfully",method:s})}catch(e){return console.error("Error updating shipping method:",e),a.Z.json({error:"Failed to update shipping method"},{status:500})}}async function g(e,{params:t}){try{let e=await (0,u.getServerSession)(p.authOptions);if(!e||"admin"!==e.user.role)return a.Z.json({error:"Admin access required"},{status:403});await (0,d.Z)();let{id:r}=t;if(!await c.Z.findById(r))return a.Z.json({error:"Shipping method not found"},{status:404});return await c.Z.findByIdAndDelete(r),a.Z.json({message:"Shipping method deleted successfully"})}catch(e){return console.error("Error deleting shipping method:",e),a.Z.json({error:"Failed to delete shipping method"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/shipping/[id]/route",pathname:"/api/shipping/[id]",filename:"route",bundlePath:"app/api/shipping/[id]/route"},resolvedPagePath:"C:\\Users\\Ananya\\Downloads\\Nirvaanaa_current\\Nirvaanaa (1)\\Nirvaanaa\\app\\api\\shipping\\[id]\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:x,serverHooks:q,headerHooks:y,staticGenerationBailout:Z}=m,j="/api/shipping/[id]/route";function w(){return(0,o.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:x})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638,6206,6521,2455,1355,1671],()=>r(945));module.exports=i})();