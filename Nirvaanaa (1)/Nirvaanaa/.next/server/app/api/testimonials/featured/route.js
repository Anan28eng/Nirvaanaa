"use strict";(()=>{var e={};e.id=3844,e.ids=[3844],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79662:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var i={};r.r(i),r.d(i,{GET:()=>c});var n=r(95419),a=r(69108),o=r(99678),s=r(88578),u=r(85409);async function c(){try{await (0,s.Z)();let e=(await u.Z.find({verified:!0,comment:{$exists:!0,$ne:""},rating:{$gte:4}}).populate("user","name email profileImage").populate("product","title mainImage category").sort({rating:-1,createdAt:-1}).limit(10)).map(e=>({id:e._id,name:e.user.name||"Anonymous",role:"Customer",image:e.user.profileImage||"/images/default-avatar.jpg",rating:e.rating,text:e.comment,location:"India",product:{title:e.product.title,category:e.product.category},createdAt:e.createdAt,verified:e.verified})),t=await u.Z.countDocuments({verified:!0}),r=await u.Z.aggregate([{$match:{verified:!0}},{$group:{_id:null,avgRating:{$avg:"$rating"}}}]),i={averageRating:r[0]?.avgRating?Math.round(10*r[0].avgRating)/10:4.9,totalCustomers:t,satisfactionRate:"98%",customerSupport:"24/7"};return Response.json({testimonials:e,stats:i})}catch(e){return console.error("Featured testimonials API error:",e),Response.json({error:"Failed to fetch featured testimonials"},{status:500})}}r(65537);let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/testimonials/featured/route",pathname:"/api/testimonials/featured",filename:"route",bundlePath:"app/api/testimonials/featured/route"},resolvedPagePath:"C:\\Users\\Ananya\\Downloads\\Nirvaanaa_current\\Nirvaanaa (1)\\Nirvaanaa\\app\\api\\testimonials\\featured\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:p,headerHooks:g,staticGenerationBailout:h}=d,f="/api/testimonials/featured/route";function y(){return(0,o.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:m})}},88578:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(11185),n=r.n(i);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let s=async function(){if(o.conn)return o.conn;o.promise||(o.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},65537:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(11185),n=r.n(i);let a=new(n()).Schema({title:{type:String,required:[!0,"Product title is required"],trim:!0,maxlength:[100,"Title cannot be more than 100 characters"]},slug:{type:String,required:[!0,"Product slug is required"],unique:!0,lowercase:!0,trim:!0,match:[/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"]},description:{type:String,required:[!0,"Product description is required"],maxlength:[2e3,"Description cannot be more than 2000 characters"]},shortDescription:{type:String,maxlength:[200,"Short description cannot be more than 200 characters"]},images:[{url:{type:String,required:!0},alt:{type:String,required:!0},publicId:{type:String,required:!0}}],price:{type:Number,required:[!0,"Product price is required"],min:[0,"Price cannot be negative"]},discount:{type:Number,min:[0,"Discount cannot be negative"],max:[100,"Discount cannot be more than 100%"],default:0},comparePrice:{type:Number,min:[0,"Compare price cannot be negative"]},stock:{type:Number,required:[!0,"Stock quantity is required"],min:[0,"Stock cannot be negative"],default:10},sku:{type:String,unique:!0,sparse:!0,trim:!0},tags:[{type:String,trim:!0,lowercase:!0}],category:{type:String,required:[!0,"Product category is required"],enum:["bangle-box","clutch","gift-hampers","goggle-cover","kitty-bag","long-tote-bag","picnic-bag","potli-purse","sling-bags","velvet-clutch-with-flaps"]},subcategory:{type:String,trim:!0},materials:[{type:String,trim:!0}],dimensions:{length:Number,width:Number,height:Number,unit:{type:String,enum:["cm","inches"],default:"cm"}},weight:{value:Number,unit:{type:String,enum:["g","kg","lbs"],default:"g"}},colors:[{name:String,hex:String}],colorVariants:[{name:{type:String,required:!0,trim:!0},hex:{type:String,required:!0,match:[/^#[0-9A-Fa-f]{6}$/,"Hex color must be in format #RRGGBB"]},images:[{type:String,trim:!0}]}],published:{type:Boolean,default:!0},featured:{type:Boolean,default:!1},seo:{metaTitle:{type:String,maxlength:[60,"Meta title cannot be more than 60 characters"]},metaDescription:{type:String,maxlength:[160,"Meta description cannot be more than 160 characters"]},keywords:[String]},ratings:{average:{type:Number,default:0,min:0,max:5},count:{type:Number,default:0,min:0}},salesCount:{type:Number,default:0,min:0},isHandmade:{type:Boolean,default:!0},madeIn:{type:String,default:"India"},careInstructions:{type:String,maxlength:[500,"Care instructions cannot be more than 500 characters"]}},{timestamps:!0});a.index({slug:1}),a.index({category:1}),a.index({tags:1}),a.index({published:1}),a.index({featured:1}),a.index({"ratings.average":-1}),a.index({salesCount:-1}),a.index({createdAt:-1}),a.set("toJSON",{virtuals:!0,transform:function(e,t){return delete t.__v,t}}),a.virtual("discountPercentage").get(function(){return this.comparePrice&&this.comparePrice>this.price?Math.round((this.comparePrice-this.price)/this.comparePrice*100):0}),a.virtual("inStock").get(function(){return this.stock>0}),a.virtual("mainImage").get(function(){return this.images.length>0?this.images[0]:null}),a.methods.updateStock=function(e){return this.stock=Math.max(0,this.stock-e),this.save()},a.methods.incrementSales=function(e=1){return this.salesCount+=e,this.save()},a.statics.findPublished=function(){return this.find({published:!0})},a.statics.findFeatured=function(){return this.find({published:!0,featured:!0})},a.statics.findByCategory=function(e){return this.find({published:!0,category:e})},a.statics.search=function(e){return this.find({published:!0,$or:[{title:{$regex:e,$options:"i"}},{description:{$regex:e,$options:"i"}},{tags:{$in:[RegExp(e,"i")]}}]})},a.pre("save",function(e){!this.slug&&this.title&&(this.slug=this.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-")),e()}),a.set("toJSON",{virtuals:!0,transform:function(e,t){return delete t.__v,t}});let o=n().models.Product||n().model("Product",a)},85409:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(11185),n=r.n(i);let a=new(n()).Schema({product:{type:n().Schema.Types.ObjectId,ref:"Product",required:!0},user:{type:n().Schema.Types.ObjectId,ref:"User",required:!0},rating:{type:Number,required:!0,min:1,max:5},comment:{type:String,trim:!0,maxlength:1e3},verified:{type:Boolean,default:!1},adminResponse:{type:String,trim:!0,maxlength:2e3},helpful:[{type:n().Schema.Types.ObjectId,ref:"User"}]},{timestamps:!0});a.index({product:1,createdAt:-1}),a.index({user:1,product:1},{unique:!0}),a.virtual("productRating",{ref:"Product",localField:"product",foreignField:"_id",justOne:!0});let o=n().models.Testimonial||n().model("Testimonial",a)},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638],()=>r(79662));module.exports=i})();